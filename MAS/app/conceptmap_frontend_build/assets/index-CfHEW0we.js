var jm=Object.defineProperty;var Xm=(r,e,t)=>e in r?jm(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var qr=(r,e,t)=>Xm(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();function Zm(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ru={exports:{}},tt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd;function Qm(){if(nd)return tt;nd=1;var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,i=r?Symbol.for("react.profiler"):60114,s=r?Symbol.for("react.provider"):60109,o=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,l=r?Symbol.for("react.concurrent_mode"):60111,c=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,d=r?Symbol.for("react.suspense_list"):60120,h=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,p=r?Symbol.for("react.fundamental"):60117,g=r?Symbol.for("react.responder"):60118,m=r?Symbol.for("react.scope"):60119;function b(S){if(typeof S=="object"&&S!==null){var E=S.$$typeof;switch(E){case e:switch(S=S.type,S){case u:case l:case n:case i:case a:case f:return S;default:switch(S=S&&S.$$typeof,S){case o:case c:case v:case h:case s:return S;default:return E}}case t:return E}}}function w(S){return b(S)===l}return tt.AsyncMode=u,tt.ConcurrentMode=l,tt.ContextConsumer=o,tt.ContextProvider=s,tt.Element=e,tt.ForwardRef=c,tt.Fragment=n,tt.Lazy=v,tt.Memo=h,tt.Portal=t,tt.Profiler=i,tt.StrictMode=a,tt.Suspense=f,tt.isAsyncMode=function(S){return w(S)||b(S)===u},tt.isConcurrentMode=w,tt.isContextConsumer=function(S){return b(S)===o},tt.isContextProvider=function(S){return b(S)===s},tt.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===e},tt.isForwardRef=function(S){return b(S)===c},tt.isFragment=function(S){return b(S)===n},tt.isLazy=function(S){return b(S)===v},tt.isMemo=function(S){return b(S)===h},tt.isPortal=function(S){return b(S)===t},tt.isProfiler=function(S){return b(S)===i},tt.isStrictMode=function(S){return b(S)===a},tt.isSuspense=function(S){return b(S)===f},tt.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===l||S===i||S===a||S===f||S===d||typeof S=="object"&&S!==null&&(S.$$typeof===v||S.$$typeof===h||S.$$typeof===s||S.$$typeof===o||S.$$typeof===c||S.$$typeof===p||S.$$typeof===g||S.$$typeof===m||S.$$typeof===y)},tt.typeOf=b,tt}var ad;function Jm(){return ad||(ad=1,Ru.exports=Qm()),Ru.exports}var Ou,id;function e0(){if(id)return Ou;id=1;var r=Jm(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[r.ForwardRef]=n,i[r.Memo]=a;function s(v){return r.isMemo(v)?a:i[v.$$typeof]||e}var o=Object.defineProperty,u=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,c=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,d=Object.prototype;function h(v,y,p){if(typeof y!="string"){if(d){var g=f(y);g&&g!==d&&h(v,g,p)}var m=u(y);l&&(m=m.concat(l(y)));for(var b=s(v),w=s(y),S=0;S<m.length;++S){var E=m[S];if(!t[E]&&!(p&&p[E])&&!(w&&w[E])&&!(b&&b[E])){var x=c(y,E);try{o(v,E,x)}catch{}}}}return v}return Ou=h,Ou}e0();var Mu={exports:{}},rt={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var ku,sd;function t0(){if(sd)return ku;sd=1;var r=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable;function n(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function a(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var s={},o=0;o<10;o++)s["_"+String.fromCharCode(o)]=o;var u=Object.getOwnPropertyNames(s).map(function(c){return s[c]});if(u.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(c){l[c]=c}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return ku=a()?Object.assign:function(i,s){for(var o,u=n(i),l,c=1;c<arguments.length;c++){o=Object(arguments[c]);for(var f in o)e.call(o,f)&&(u[f]=o[f]);if(r){l=r(o);for(var d=0;d<l.length;d++)t.call(o,l[d])&&(u[l[d]]=o[l[d]])}}return u},ku}/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var od;function r0(){if(od)return rt;od=1;var r=t0(),e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.forward_ref"):60112,c=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.memo"):60115,d=e?Symbol.for("react.lazy"):60116,h=typeof Symbol=="function"&&Symbol.iterator;function v(R){for(var L="https://reactjs.org/docs/error-decoder.html?invariant="+R,K=1;K<arguments.length;K++)L+="&args[]="+encodeURIComponent(arguments[K]);return"Minified React error #"+R+"; visit "+L+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p={};function g(R,L,K){this.props=R,this.context=L,this.refs=p,this.updater=K||y}g.prototype.isReactComponent={},g.prototype.setState=function(R,L){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error(v(85));this.updater.enqueueSetState(this,R,L,"setState")},g.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function m(){}m.prototype=g.prototype;function b(R,L,K){this.props=R,this.context=L,this.refs=p,this.updater=K||y}var w=b.prototype=new m;w.constructor=b,r(w,g.prototype),w.isPureReactComponent=!0;var S={current:null},E=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function T(R,L,K){var ne,Y={},N=null,V=null;if(L!=null)for(ne in L.ref!==void 0&&(V=L.ref),L.key!==void 0&&(N=""+L.key),L)E.call(L,ne)&&!x.hasOwnProperty(ne)&&(Y[ne]=L[ne]);var U=arguments.length-2;if(U===1)Y.children=K;else if(1<U){for(var j=Array(U),ae=0;ae<U;ae++)j[ae]=arguments[ae+2];Y.children=j}if(R&&R.defaultProps)for(ne in U=R.defaultProps,U)Y[ne]===void 0&&(Y[ne]=U[ne]);return{$$typeof:t,type:R,key:N,ref:V,props:Y,_owner:S.current}}function B(R,L){return{$$typeof:t,type:R.type,key:L,ref:R.ref,props:R.props,_owner:R._owner}}function I(R){return typeof R=="object"&&R!==null&&R.$$typeof===t}function _(R){var L={"=":"=0",":":"=2"};return"$"+(""+R).replace(/[=:]/g,function(K){return L[K]})}var D=/\/+/g,A=[];function O(R,L,K,ne){if(A.length){var Y=A.pop();return Y.result=R,Y.keyPrefix=L,Y.func=K,Y.context=ne,Y.count=0,Y}return{result:R,keyPrefix:L,func:K,context:ne,count:0}}function k(R){R.result=null,R.keyPrefix=null,R.func=null,R.context=null,R.count=0,10>A.length&&A.push(R)}function P(R,L,K,ne){var Y=typeof R;(Y==="undefined"||Y==="boolean")&&(R=null);var N=!1;if(R===null)N=!0;else switch(Y){case"string":case"number":N=!0;break;case"object":switch(R.$$typeof){case t:case n:N=!0}}if(N)return K(ne,R,L===""?"."+F(R,0):L),1;if(N=0,L=L===""?".":L+":",Array.isArray(R))for(var V=0;V<R.length;V++){Y=R[V];var U=L+F(Y,V);N+=P(Y,U,K,ne)}else if(R===null||typeof R!="object"?U=null:(U=h&&R[h]||R["@@iterator"],U=typeof U=="function"?U:null),typeof U=="function")for(R=U.call(R),V=0;!(Y=R.next()).done;)Y=Y.value,U=L+F(Y,V++),N+=P(Y,U,K,ne);else if(Y==="object")throw K=""+R,Error(v(31,K==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":K,""));return N}function M(R,L,K){return R==null?0:P(R,"",L,K)}function F(R,L){return typeof R=="object"&&R!==null&&R.key!=null?_(R.key):L.toString(36)}function W(R,L){R.func.call(R.context,L,R.count++)}function H(R,L,K){var ne=R.result,Y=R.keyPrefix;R=R.func.call(R.context,L,R.count++),Array.isArray(R)?z(R,ne,K,function(N){return N}):R!=null&&(I(R)&&(R=B(R,Y+(!R.key||L&&L.key===R.key?"":(""+R.key).replace(D,"$&/")+"/")+K)),ne.push(R))}function z(R,L,K,ne,Y){var N="";K!=null&&(N=(""+K).replace(D,"$&/")+"/"),L=O(L,N,ne,Y),M(R,H,L),k(L)}var $={current:null};function X(){var R=$.current;if(R===null)throw Error(v(321));return R}var te={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};return rt.Children={map:function(R,L,K){if(R==null)return R;var ne=[];return z(R,ne,null,L,K),ne},forEach:function(R,L,K){if(R==null)return R;L=O(null,null,L,K),M(R,W,L),k(L)},count:function(R){return M(R,function(){return null},null)},toArray:function(R){var L=[];return z(R,L,null,function(K){return K}),L},only:function(R){if(!I(R))throw Error(v(143));return R}},rt.Component=g,rt.Fragment=a,rt.Profiler=s,rt.PureComponent=b,rt.StrictMode=i,rt.Suspense=c,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=te,rt.cloneElement=function(R,L,K){if(R==null)throw Error(v(267,R));var ne=r({},R.props),Y=R.key,N=R.ref,V=R._owner;if(L!=null){if(L.ref!==void 0&&(N=L.ref,V=S.current),L.key!==void 0&&(Y=""+L.key),R.type&&R.type.defaultProps)var U=R.type.defaultProps;for(j in L)E.call(L,j)&&!x.hasOwnProperty(j)&&(ne[j]=L[j]===void 0&&U!==void 0?U[j]:L[j])}var j=arguments.length-2;if(j===1)ne.children=K;else if(1<j){U=Array(j);for(var ae=0;ae<j;ae++)U[ae]=arguments[ae+2];ne.children=U}return{$$typeof:t,type:R.type,key:Y,ref:N,props:ne,_owner:V}},rt.createContext=function(R,L){return L===void 0&&(L=null),R={$$typeof:u,_calculateChangedBits:L,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider={$$typeof:o,_context:R},R.Consumer=R},rt.createElement=T,rt.createFactory=function(R){var L=T.bind(null,R);return L.type=R,L},rt.createRef=function(){return{current:null}},rt.forwardRef=function(R){return{$$typeof:l,render:R}},rt.isValidElement=I,rt.lazy=function(R){return{$$typeof:d,_ctor:R,_status:-1,_result:null}},rt.memo=function(R,L){return{$$typeof:f,type:R,compare:L===void 0?null:L}},rt.useCallback=function(R,L){return X().useCallback(R,L)},rt.useContext=function(R,L){return X().useContext(R,L)},rt.useDebugValue=function(){},rt.useEffect=function(R,L){return X().useEffect(R,L)},rt.useImperativeHandle=function(R,L,K){return X().useImperativeHandle(R,L,K)},rt.useLayoutEffect=function(R,L){return X().useLayoutEffect(R,L)},rt.useMemo=function(R,L){return X().useMemo(R,L)},rt.useReducer=function(R,L,K){return X().useReducer(R,L,K)},rt.useRef=function(R){return X().useRef(R)},rt.useState=function(R){return X().useState(R)},rt.version="16.14.0",rt}var ud;function n0(){return ud||(ud=1,Mu.exports=r0()),Mu.exports}var a0=n0();const i0=Zm(a0);function Te(r,e,t,n){function a(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(c){try{l(n.next(c))}catch(f){s(f)}}function u(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?i(c.value):a(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})}function ld(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pe(r){return this instanceof Pe?(this.v=r,this):new Pe(r)}function tn(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",s),a[Symbol.asyncIterator]=function(){return this},a;function s(h){return function(v){return Promise.resolve(v).then(h,f)}}function o(h,v){n[h]&&(a[h]=function(y){return new Promise(function(p,g){i.push([h,y,p,g])>1||u(h,y)})},v&&(a[h]=v(a[h])))}function u(h,v){try{l(n[h](v))}catch(y){d(i[0][3],y)}}function l(h){h.value instanceof Pe?Promise.resolve(h.value.v).then(c,f):d(i[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,v){h(v),i.shift(),i.length&&u(i[0][0],i[0][1])}}function Qs(r){var e,t;return e={},n("next"),n("throw",function(a){throw a}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(a,i){e[a]=r[a]?function(s){return(t=!t)?{value:Pe(r[a](s)),done:!1}:i?i(s):s}:i}}function Ca(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof ld=="function"?ld(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=r[i]&&function(s){return new Promise(function(o,u){s=r[i](s),a(o,u,s.done,s.value)})}}function a(i,s,o,u){Promise.resolve(u).then(function(l){i({value:l,done:o})},s)}}const s0=new TextDecoder("utf-8"),mc=r=>s0.decode(r),o0=new TextEncoder,Qc=r=>o0.encode(r),[kC,u0]=(()=>{const r=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw r()}return e.asIntN=()=>{throw r()},e.asUintN=()=>{throw r()},typeof BigInt<"u"?[BigInt,!0]:[e,!1]})(),[ps,PC]=(()=>{const r=()=>{throw new Error("BigInt64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw r()}static from(){throw r()}constructor(){throw r()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[e,!1]})(),[gs,LC]=(()=>{const r=()=>{throw new Error("BigUint64Array is not available in this environment")};class e{static get BYTES_PER_ELEMENT(){return 8}static of(){throw r()}static from(){throw r()}constructor(){throw r()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[e,!1]})(),l0=r=>typeof r=="number",ip=r=>typeof r=="boolean",Pt=r=>typeof r=="function",gr=r=>r!=null&&Object(r)===r,$n=r=>gr(r)&&Pt(r.then),ys=r=>gr(r)&&Pt(r[Symbol.iterator]),Si=r=>gr(r)&&Pt(r[Symbol.asyncIterator]),bc=r=>gr(r)&&gr(r.schema),sp=r=>gr(r)&&"done"in r&&"value"in r,op=r=>gr(r)&&Pt(r.stat)&&l0(r.fd),up=r=>gr(r)&&Jc(r.body),ou=r=>"_getDOMStream"in r&&"_getNodeStream"in r,c0=r=>gr(r)&&Pt(r.abort)&&Pt(r.getWriter)&&!ou(r),Jc=r=>gr(r)&&Pt(r.cancel)&&Pt(r.getReader)&&!ou(r),f0=r=>gr(r)&&Pt(r.end)&&Pt(r.write)&&ip(r.writable)&&!ou(r),lp=r=>gr(r)&&Pt(r.read)&&Pt(r.pipe)&&ip(r.readable)&&!ou(r),d0=r=>gr(r)&&Pt(r.clear)&&Pt(r.bytes)&&Pt(r.position)&&Pt(r.setPosition)&&Pt(r.capacity)&&Pt(r.getBufferIdentifier)&&Pt(r.createLong),ef=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function h0(r){const e=r[0]?[r[0]]:[];let t,n,a,i;for(let s,o,u=0,l=0,c=r.length;++u<c;){if(s=e[l],o=r[u],!s||!o||s.buffer!==o.buffer||o.byteOffset<s.byteOffset){o&&(e[++l]=o);continue}if({byteOffset:t,byteLength:a}=s,{byteOffset:n,byteLength:i}=o,t+a<n||n+i<t){o&&(e[++l]=o);continue}e[l]=new Uint8Array(s.buffer,t,n-t+i)}return e}function cd(r,e,t=0,n=e.byteLength){const a=r.byteLength,i=new Uint8Array(r.buffer,r.byteOffset,a),s=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,a));return i.set(s,t),r}function an(r,e){const t=h0(r),n=t.reduce((c,f)=>c+f.byteLength,0);let a,i,s,o=0,u=-1;const l=Math.min(e||Number.POSITIVE_INFINITY,n);for(const c=t.length;++u<c;){if(a=t[u],i=a.subarray(0,Math.min(a.length,l-o)),l<=o+i.length){i.length<a.length?t[u]=a.subarray(i.length):i.length===a.length&&u++,s?cd(s,i,o):s=i;break}cd(s||(s=new Uint8Array(l)),i,o),o+=i.length}return[s||new Uint8Array(0),t.slice(u),n-(s?s.byteLength:0)]}function ft(r,e){let t=sp(e)?e.value:e;return t instanceof r?r===Uint8Array?new r(t.buffer,t.byteOffset,t.byteLength):t:t?(typeof t=="string"&&(t=Qc(t)),t instanceof ArrayBuffer?new r(t):t instanceof ef?new r(t):d0(t)?ft(r,t.bytes()):ArrayBuffer.isView(t)?t.byteLength<=0?new r(0):new r(t.buffer,t.byteOffset,t.byteLength/r.BYTES_PER_ELEMENT):r.from(t)):new r(0)}const Mi=r=>ft(Int32Array,r),Xe=r=>ft(Uint8Array,r),wc=r=>(r.next(),r);function*v0(r,e){const t=function*(a){yield a},n=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof ef?t(e):ys(e)?e:t(e);return yield*wc(function*(a){let i=null;do i=a.next(yield ft(r,i));while(!i.done)}(n[Symbol.iterator]())),new r}const p0=r=>v0(Uint8Array,r);function cp(r,e){return tn(this,arguments,function*(){if($n(e))return yield Pe(yield Pe(yield*Qs(Ca(cp(r,yield Pe(e))))));const n=function(s){return tn(this,arguments,function*(){yield yield Pe(yield Pe(s))})},a=function(s){return tn(this,arguments,function*(){yield Pe(yield*Qs(Ca(wc(function*(o){let u=null;do u=o.next(yield u==null?void 0:u.value);while(!u.done)}(s[Symbol.iterator]())))))})},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof ef?n(e):ys(e)?a(e):Si(e)?e:n(e);return yield Pe(yield*Qs(Ca(wc(function(s){return tn(this,arguments,function*(){let o=null;do o=yield Pe(s.next(yield yield Pe(ft(r,o))));while(!o.done)})}(i[Symbol.asyncIterator]()))))),yield Pe(new r)})}const g0=r=>cp(Uint8Array,r);function tf(r,e,t){if(r!==0){t=t.slice(0,e+1);for(let n=-1;++n<=e;)t[n]+=r}return t}function y0(r,e){let t=0;const n=r.length;if(n!==e.length)return!1;if(n>0)do if(r[t]!==e[t])return!1;while(++t<n);return!0}const _r={fromIterable(r){return Ls(m0(r))},fromAsyncIterable(r){return Ls(b0(r))},fromDOMStream(r){return Ls(w0(r))},fromNodeStream(r){return Ls(x0(r))},toDOMStream(r,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(r,e){throw new Error('"toNodeStream" not available in this environment')}},Ls=r=>(r.next(),r);function*m0(r){let e,t=!1,n=[],a,i,s,o=0;function u(){return i==="peek"?an(n,s)[0]:([a,n,o]=an(n,s),a)}({cmd:i,size:s}=yield null);const l=p0(r)[Symbol.iterator]();try{do if({done:e,value:a}=Number.isNaN(s-o)?l.next():l.next(s-o),!e&&a.byteLength>0&&(n.push(a),o+=a.byteLength),e||s<=o)do({cmd:i,size:s}=yield u());while(s<o);while(!e)}catch(c){(t=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{t===!1&&typeof l.return=="function"&&l.return(null)}return null}function b0(r){return tn(this,arguments,function*(){let t,n=!1,a=[],i,s,o,u=0;function l(){return s==="peek"?an(a,o)[0]:([i,a,u]=an(a,o),i)}({cmd:s,size:o}=yield yield Pe(null));const c=g0(r)[Symbol.asyncIterator]();try{do if({done:t,value:i}=Number.isNaN(o-u)?yield Pe(c.next()):yield Pe(c.next(o-u)),!t&&i.byteLength>0&&(a.push(i),u+=i.byteLength),t||o<=u)do({cmd:s,size:o}=yield yield Pe(l()));while(o<u);while(!t)}catch(f){(n=!0)&&typeof c.throw=="function"&&(yield Pe(c.throw(f)))}finally{n===!1&&typeof c.return=="function"&&(yield Pe(c.return(new Uint8Array(0))))}return yield Pe(null)})}function w0(r){return tn(this,arguments,function*(){let t=!1,n=!1,a=[],i,s,o,u=0;function l(){return s==="peek"?an(a,o)[0]:([i,a,u]=an(a,o),i)}({cmd:s,size:o}=yield yield Pe(null));const c=new S0(r);try{do if({done:t,value:i}=Number.isNaN(o-u)?yield Pe(c.read()):yield Pe(c.read(o-u)),!t&&i.byteLength>0&&(a.push(Xe(i)),u+=i.byteLength),t||o<=u)do({cmd:s,size:o}=yield yield Pe(l()));while(o<u);while(!t)}catch(f){(n=!0)&&(yield Pe(c.cancel(f)))}finally{n===!1?yield Pe(c.cancel()):r.locked&&c.releaseLock()}return yield Pe(null)})}class S0{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return Te(this,void 0,void 0,function*(){const{reader:t,source:n}=this;t&&(yield t.cancel(e).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(e){return Te(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=Xe(t)),t})}}const Pu=(r,e)=>{const t=a=>n([e,a]);let n;return[e,t,new Promise(a=>(n=a)&&r.once(e,t))]};function x0(r){return tn(this,arguments,function*(){const t=[];let n="error",a=!1,i=null,s,o,u=0,l=[],c;function f(){return s==="peek"?an(l,o)[0]:([c,l,u]=an(l,o),c)}if({cmd:s,size:o}=yield yield Pe(null),r.isTTY)return yield yield Pe(new Uint8Array(0)),yield Pe(null);try{t[0]=Pu(r,"end"),t[1]=Pu(r,"error");do{if(t[2]=Pu(r,"readable"),[n,i]=yield Pe(Promise.race(t.map(h=>h[2]))),n==="error")break;if((a=n==="end")||(Number.isFinite(o-u)?(c=Xe(r.read(o-u)),c.byteLength<o-u&&(c=Xe(r.read()))):c=Xe(r.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),a||o<=u)do({cmd:s,size:o}=yield yield Pe(f()));while(o<u)}while(!a)}finally{yield Pe(d(t,n==="error"?i:null))}return yield Pe(null);function d(h,v){return c=l=null,new Promise((y,p)=>{for(const[g,m]of h)r.off(g,m);try{const g=r.destroy;g&&g.call(r,v),v=void 0}catch(g){v=g||v}finally{v!=null?p(v):y()}})}})}var Sr;(function(r){r[r.V1=0]="V1",r[r.V2=1]="V2",r[r.V3=2]="V3",r[r.V4=3]="V4",r[r.V5=4]="V5"})(Sr||(Sr={}));var Er;(function(r){r[r.Sparse=0]="Sparse",r[r.Dense=1]="Dense"})(Er||(Er={}));var pr;(function(r){r[r.HALF=0]="HALF",r[r.SINGLE=1]="SINGLE",r[r.DOUBLE=2]="DOUBLE"})(pr||(pr={}));var Tn;(function(r){r[r.DAY=0]="DAY",r[r.MILLISECOND=1]="MILLISECOND"})(Tn||(Tn={}));var Ze;(function(r){r[r.SECOND=0]="SECOND",r[r.MILLISECOND=1]="MILLISECOND",r[r.MICROSECOND=2]="MICROSECOND",r[r.NANOSECOND=3]="NANOSECOND"})(Ze||(Ze={}));var Wn;(function(r){r[r.YEAR_MONTH=0]="YEAR_MONTH",r[r.DAY_TIME=1]="DAY_TIME",r[r.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Wn||(Wn={}));var at;(function(r){r[r.NONE=0]="NONE",r[r.Schema=1]="Schema",r[r.DictionaryBatch=2]="DictionaryBatch",r[r.RecordBatch=3]="RecordBatch",r[r.Tensor=4]="Tensor",r[r.SparseTensor=5]="SparseTensor"})(at||(at={}));var q;(function(r){r[r.NONE=0]="NONE",r[r.Null=1]="Null",r[r.Int=2]="Int",r[r.Float=3]="Float",r[r.Binary=4]="Binary",r[r.Utf8=5]="Utf8",r[r.Bool=6]="Bool",r[r.Decimal=7]="Decimal",r[r.Date=8]="Date",r[r.Time=9]="Time",r[r.Timestamp=10]="Timestamp",r[r.Interval=11]="Interval",r[r.List=12]="List",r[r.Struct=13]="Struct",r[r.Union=14]="Union",r[r.FixedSizeBinary=15]="FixedSizeBinary",r[r.FixedSizeList=16]="FixedSizeList",r[r.Map=17]="Map",r[r.Dictionary=-1]="Dictionary",r[r.Int8=-2]="Int8",r[r.Int16=-3]="Int16",r[r.Int32=-4]="Int32",r[r.Int64=-5]="Int64",r[r.Uint8=-6]="Uint8",r[r.Uint16=-7]="Uint16",r[r.Uint32=-8]="Uint32",r[r.Uint64=-9]="Uint64",r[r.Float16=-10]="Float16",r[r.Float32=-11]="Float32",r[r.Float64=-12]="Float64",r[r.DateDay=-13]="DateDay",r[r.DateMillisecond=-14]="DateMillisecond",r[r.TimestampSecond=-15]="TimestampSecond",r[r.TimestampMillisecond=-16]="TimestampMillisecond",r[r.TimestampMicrosecond=-17]="TimestampMicrosecond",r[r.TimestampNanosecond=-18]="TimestampNanosecond",r[r.TimeSecond=-19]="TimeSecond",r[r.TimeMillisecond=-20]="TimeMillisecond",r[r.TimeMicrosecond=-21]="TimeMicrosecond",r[r.TimeNanosecond=-22]="TimeNanosecond",r[r.DenseUnion=-23]="DenseUnion",r[r.SparseUnion=-24]="SparseUnion",r[r.IntervalDayTime=-25]="IntervalDayTime",r[r.IntervalYearMonth=-26]="IntervalYearMonth"})(q||(q={}));var pn;(function(r){r[r.OFFSET=0]="OFFSET",r[r.DATA=1]="DATA",r[r.VALIDITY=2]="VALIDITY",r[r.TYPE=3]="TYPE"})(pn||(pn={}));const E0=void 0;function Qi(r){if(r===null)return"null";if(r===E0)return"undefined";switch(typeof r){case"number":return`${r}`;case"bigint":return`${r}`;case"string":return`"${r}"`}return typeof r[Symbol.toPrimitive]=="function"?r[Symbol.toPrimitive]("string"):ArrayBuffer.isView(r)?r instanceof ps||r instanceof gs?`[${[...r].map(e=>Qi(e))}]`:`[${r}]`:ArrayBuffer.isView(r)?`[${r}]`:JSON.stringify(r,(e,t)=>typeof t=="bigint"?`${t}`:t)}const T0=Symbol.for("isArrowBigNum");function Ur(r,...e){return e.length===0?Object.setPrototypeOf(ft(this.TypedArray,r),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(r,...e),this.constructor.prototype)}Ur.prototype[T0]=!0;Ur.prototype.toJSON=function(){return`"${Ba(this)}"`};Ur.prototype.valueOf=function(){return fp(this)};Ur.prototype.toString=function(){return Ba(this)};Ur.prototype[Symbol.toPrimitive]=function(r="default"){switch(r){case"number":return fp(this);case"string":return Ba(this);case"default":return Sc(this)}return Ba(this)};function ri(...r){return Ur.apply(this,r)}function ni(...r){return Ur.apply(this,r)}function Ji(...r){return Ur.apply(this,r)}Object.setPrototypeOf(ri.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(ni.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Ji.prototype,Object.create(Uint32Array.prototype));Object.assign(ri.prototype,Ur.prototype,{constructor:ri,signed:!0,TypedArray:Int32Array,BigIntArray:ps});Object.assign(ni.prototype,Ur.prototype,{constructor:ni,signed:!1,TypedArray:Uint32Array,BigIntArray:gs});Object.assign(Ji.prototype,Ur.prototype,{constructor:Ji,signed:!0,TypedArray:Uint32Array,BigIntArray:gs});function fp(r){const{buffer:e,byteOffset:t,length:n,signed:a}=r,i=new gs(e,t,n),s=a&&i[i.length-1]&BigInt(1)<<BigInt(63);let o=BigInt(s?1:0),u=BigInt(0);if(s){for(const l of i)o+=~l*(BigInt(1)<<BigInt(32)*u++);o*=BigInt(-1)}else for(const l of i)o+=l*(BigInt(1)<<BigInt(32)*u++);return o}let Ba,Sc;u0?(Sc=r=>r.byteLength===8?new r.BigIntArray(r.buffer,r.byteOffset,1)[0]:Lu(r),Ba=r=>r.byteLength===8?`${new r.BigIntArray(r.buffer,r.byteOffset,1)[0]}`:Lu(r)):(Ba=Lu,Sc=Ba);function Lu(r){let e="";const t=new Uint32Array(2);let n=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2);const a=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let i=-1;const s=n.length-1;do{for(t[0]=n[i=0];i<s;)n[i++]=t[1]=t[0]/10,t[0]=(t[0]-t[1]*10<<16)+n[i];n[i]=t[1]=t[0]/10,t[0]=t[0]-t[1]*10,e=`${t[0]}${e}`}while(a[0]||a[1]||a[2]||a[3]);return e??"0"}class rf{static new(e,t){switch(t){case!0:return new ri(e);case!1:return new ni(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case ps:return new ri(e)}return e.byteLength===16?new Ji(e):new ni(e)}static signed(e){return new ri(e)}static unsigned(e){return new ni(e)}static decimal(e){return new Ji(e)}constructor(e,t){return rf.new(e,t)}}var dp,hp,vp,pp,gp,yp,mp,bp,wp,Sp,xp,Ep,Tp,Cp,Bp,Ip,_p,Dp,Ap;class Be{static isNull(e){return(e==null?void 0:e.typeId)===q.Null}static isInt(e){return(e==null?void 0:e.typeId)===q.Int}static isFloat(e){return(e==null?void 0:e.typeId)===q.Float}static isBinary(e){return(e==null?void 0:e.typeId)===q.Binary}static isUtf8(e){return(e==null?void 0:e.typeId)===q.Utf8}static isBool(e){return(e==null?void 0:e.typeId)===q.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===q.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===q.Date}static isTime(e){return(e==null?void 0:e.typeId)===q.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===q.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===q.Interval}static isList(e){return(e==null?void 0:e.typeId)===q.List}static isStruct(e){return(e==null?void 0:e.typeId)===q.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===q.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===q.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===q.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===q.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===q.Dictionary}static isDenseUnion(e){return Be.isUnion(e)&&e.mode===Er.Dense}static isSparseUnion(e){return Be.isUnion(e)&&e.mode===Er.Sparse}get typeId(){return q.NONE}}dp=Symbol.toStringTag;Be[dp]=(r=>(r.children=null,r.ArrayType=Array,r[Symbol.toStringTag]="DataType"))(Be.prototype);let Gn=class extends Be{toString(){return"Null"}get typeId(){return q.Null}};hp=Symbol.toStringTag;Gn[hp]=(r=>r[Symbol.toStringTag]="Null")(Gn.prototype);class Hn extends Be{constructor(e,t){super(),this.isSigned=e,this.bitWidth=t}get typeId(){return q.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?ps:gs}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}vp=Symbol.toStringTag;Hn[vp]=(r=>(r.isSigned=null,r.bitWidth=null,r[Symbol.toStringTag]="Int"))(Hn.prototype);class es extends Hn{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(es.prototype,"ArrayType",{value:Int32Array});class ts extends Be{constructor(e){super(),this.precision=e}get typeId(){return q.Float}get ArrayType(){switch(this.precision){case pr.HALF:return Uint16Array;case pr.SINGLE:return Float32Array;case pr.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}pp=Symbol.toStringTag;ts[pp]=(r=>(r.precision=null,r[Symbol.toStringTag]="Float"))(ts.prototype);let mo=class extends Be{constructor(){super()}get typeId(){return q.Binary}toString(){return"Binary"}};gp=Symbol.toStringTag;mo[gp]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Binary"))(mo.prototype);let bo=class extends Be{constructor(){super()}get typeId(){return q.Utf8}toString(){return"Utf8"}};yp=Symbol.toStringTag;bo[yp]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Utf8"))(bo.prototype);let wo=class extends Be{constructor(){super()}get typeId(){return q.Bool}toString(){return"Bool"}};mp=Symbol.toStringTag;wo[mp]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Bool"))(wo.prototype);let So=class extends Be{constructor(e,t,n=128){super(),this.scale=e,this.precision=t,this.bitWidth=n}get typeId(){return q.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};bp=Symbol.toStringTag;So[bp]=(r=>(r.scale=null,r.precision=null,r.ArrayType=Uint32Array,r[Symbol.toStringTag]="Decimal"))(So.prototype);class xo extends Be{constructor(e){super(),this.unit=e}get typeId(){return q.Date}toString(){return`Date${(this.unit+1)*32}<${Tn[this.unit]}>`}}wp=Symbol.toStringTag;xo[wp]=(r=>(r.unit=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Date"))(xo.prototype);class rs extends Be{constructor(e,t){super(),this.unit=e,this.bitWidth=t}get typeId(){return q.Time}toString(){return`Time${this.bitWidth}<${Ze[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return ps}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Sp=Symbol.toStringTag;rs[Sp]=(r=>(r.unit=null,r.bitWidth=null,r[Symbol.toStringTag]="Time"))(rs.prototype);class Eo extends Be{constructor(e,t){super(),this.unit=e,this.timezone=t}get typeId(){return q.Timestamp}toString(){return`Timestamp<${Ze[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}xp=Symbol.toStringTag;Eo[xp]=(r=>(r.unit=null,r.timezone=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Timestamp"))(Eo.prototype);class To extends Be{constructor(e){super(),this.unit=e}get typeId(){return q.Interval}toString(){return`Interval<${Wn[this.unit]}>`}}Ep=Symbol.toStringTag;To[Ep]=(r=>(r.unit=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Interval"))(To.prototype);let Co=class extends Be{constructor(e){super(),this.children=[e]}get typeId(){return q.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Tp=Symbol.toStringTag;Co[Tp]=(r=>(r.children=null,r[Symbol.toStringTag]="List"))(Co.prototype);class rr extends Be{constructor(e){super(),this.children=e}get typeId(){return q.Struct}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Cp=Symbol.toStringTag;rr[Cp]=(r=>(r.children=null,r[Symbol.toStringTag]="Struct"))(rr.prototype);class Bo extends Be{constructor(e,t,n){super(),this.mode=e,this.children=n,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((a,i,s)=>(a[i]=s)&&a||a,Object.create(null))}get typeId(){return q.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}Bp=Symbol.toStringTag;Bo[Bp]=(r=>(r.mode=null,r.typeIds=null,r.children=null,r.typeIdToChildIndex=null,r.ArrayType=Int8Array,r[Symbol.toStringTag]="Union"))(Bo.prototype);let Io=class extends Be{constructor(e){super(),this.byteWidth=e}get typeId(){return q.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Ip=Symbol.toStringTag;Io[Ip]=(r=>(r.byteWidth=null,r.ArrayType=Uint8Array,r[Symbol.toStringTag]="FixedSizeBinary"))(Io.prototype);let _o=class extends Be{constructor(e,t){super(),this.listSize=e,this.children=[t]}get typeId(){return q.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};_p=Symbol.toStringTag;_o[_p]=(r=>(r.children=null,r.listSize=null,r[Symbol.toStringTag]="FixedSizeList"))(_o.prototype);class Do extends Be{constructor(e,t=!1){super(),this.children=[e],this.keysSorted=t}get typeId(){return q.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}Dp=Symbol.toStringTag;Do[Dp]=(r=>(r.children=null,r.keysSorted=null,r[Symbol.toStringTag]="Map_"))(Do.prototype);const C0=(r=>()=>++r)(-1);class fi extends Be{constructor(e,t,n,a){super(),this.indices=t,this.dictionary=e,this.isOrdered=a||!1,this.id=n==null?C0():typeof n=="number"?n:n.low}get typeId(){return q.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Ap=Symbol.toStringTag;fi[Ap]=(r=>(r.id=null,r.indices=null,r.isOrdered=null,r.dictionary=null,r[Symbol.toStringTag]="Dictionary"))(fi.prototype);function gn(r){const e=r;switch(r.typeId){case q.Decimal:return r.bitWidth/32;case q.Timestamp:return 2;case q.Date:return 1+e.unit;case q.Interval:return 1+e.unit;case q.FixedSizeList:return e.listSize;case q.FixedSizeBinary:return e.byteWidth;default:return 1}}class We{visitMany(e,...t){return e.map((n,a)=>this.visit(n,...t.map(i=>i[a])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,t=!0){return B0(this,e,t)}getVisitFnByTypeId(e,t=!0){return Ya(this,e,t)}visitNull(e,...t){return null}visitBool(e,...t){return null}visitInt(e,...t){return null}visitFloat(e,...t){return null}visitUtf8(e,...t){return null}visitBinary(e,...t){return null}visitFixedSizeBinary(e,...t){return null}visitDate(e,...t){return null}visitTimestamp(e,...t){return null}visitTime(e,...t){return null}visitDecimal(e,...t){return null}visitList(e,...t){return null}visitStruct(e,...t){return null}visitUnion(e,...t){return null}visitDictionary(e,...t){return null}visitInterval(e,...t){return null}visitFixedSizeList(e,...t){return null}visitMap(e,...t){return null}}function B0(r,e,t=!0){return typeof e=="number"?Ya(r,e,t):typeof e=="string"&&e in q?Ya(r,q[e],t):e&&e instanceof Be?Ya(r,fd(e),t):e!=null&&e.type&&e.type instanceof Be?Ya(r,fd(e.type),t):Ya(r,q.NONE,t)}function Ya(r,e,t=!0){let n=null;switch(e){case q.Null:n=r.visitNull;break;case q.Bool:n=r.visitBool;break;case q.Int:n=r.visitInt;break;case q.Int8:n=r.visitInt8||r.visitInt;break;case q.Int16:n=r.visitInt16||r.visitInt;break;case q.Int32:n=r.visitInt32||r.visitInt;break;case q.Int64:n=r.visitInt64||r.visitInt;break;case q.Uint8:n=r.visitUint8||r.visitInt;break;case q.Uint16:n=r.visitUint16||r.visitInt;break;case q.Uint32:n=r.visitUint32||r.visitInt;break;case q.Uint64:n=r.visitUint64||r.visitInt;break;case q.Float:n=r.visitFloat;break;case q.Float16:n=r.visitFloat16||r.visitFloat;break;case q.Float32:n=r.visitFloat32||r.visitFloat;break;case q.Float64:n=r.visitFloat64||r.visitFloat;break;case q.Utf8:n=r.visitUtf8;break;case q.Binary:n=r.visitBinary;break;case q.FixedSizeBinary:n=r.visitFixedSizeBinary;break;case q.Date:n=r.visitDate;break;case q.DateDay:n=r.visitDateDay||r.visitDate;break;case q.DateMillisecond:n=r.visitDateMillisecond||r.visitDate;break;case q.Timestamp:n=r.visitTimestamp;break;case q.TimestampSecond:n=r.visitTimestampSecond||r.visitTimestamp;break;case q.TimestampMillisecond:n=r.visitTimestampMillisecond||r.visitTimestamp;break;case q.TimestampMicrosecond:n=r.visitTimestampMicrosecond||r.visitTimestamp;break;case q.TimestampNanosecond:n=r.visitTimestampNanosecond||r.visitTimestamp;break;case q.Time:n=r.visitTime;break;case q.TimeSecond:n=r.visitTimeSecond||r.visitTime;break;case q.TimeMillisecond:n=r.visitTimeMillisecond||r.visitTime;break;case q.TimeMicrosecond:n=r.visitTimeMicrosecond||r.visitTime;break;case q.TimeNanosecond:n=r.visitTimeNanosecond||r.visitTime;break;case q.Decimal:n=r.visitDecimal;break;case q.List:n=r.visitList;break;case q.Struct:n=r.visitStruct;break;case q.Union:n=r.visitUnion;break;case q.DenseUnion:n=r.visitDenseUnion||r.visitUnion;break;case q.SparseUnion:n=r.visitSparseUnion||r.visitUnion;break;case q.Dictionary:n=r.visitDictionary;break;case q.Interval:n=r.visitInterval;break;case q.IntervalDayTime:n=r.visitIntervalDayTime||r.visitInterval;break;case q.IntervalYearMonth:n=r.visitIntervalYearMonth||r.visitInterval;break;case q.FixedSizeList:n=r.visitFixedSizeList;break;case q.Map:n=r.visitMap;break}if(typeof n=="function")return n;if(!t)return()=>null;throw new Error(`Unrecognized type '${q[e]}'`)}function fd(r){switch(r.typeId){case q.Null:return q.Null;case q.Int:{const{bitWidth:e,isSigned:t}=r;switch(e){case 8:return t?q.Int8:q.Uint8;case 16:return t?q.Int16:q.Uint16;case 32:return t?q.Int32:q.Uint32;case 64:return t?q.Int64:q.Uint64}return q.Int}case q.Float:switch(r.precision){case pr.HALF:return q.Float16;case pr.SINGLE:return q.Float32;case pr.DOUBLE:return q.Float64}return q.Float;case q.Binary:return q.Binary;case q.Utf8:return q.Utf8;case q.Bool:return q.Bool;case q.Decimal:return q.Decimal;case q.Time:switch(r.unit){case Ze.SECOND:return q.TimeSecond;case Ze.MILLISECOND:return q.TimeMillisecond;case Ze.MICROSECOND:return q.TimeMicrosecond;case Ze.NANOSECOND:return q.TimeNanosecond}return q.Time;case q.Timestamp:switch(r.unit){case Ze.SECOND:return q.TimestampSecond;case Ze.MILLISECOND:return q.TimestampMillisecond;case Ze.MICROSECOND:return q.TimestampMicrosecond;case Ze.NANOSECOND:return q.TimestampNanosecond}return q.Timestamp;case q.Date:switch(r.unit){case Tn.DAY:return q.DateDay;case Tn.MILLISECOND:return q.DateMillisecond}return q.Date;case q.Interval:switch(r.unit){case Wn.DAY_TIME:return q.IntervalDayTime;case Wn.YEAR_MONTH:return q.IntervalYearMonth}return q.Interval;case q.Map:return q.Map;case q.List:return q.List;case q.Struct:return q.Struct;case q.Union:switch(r.mode){case Er.Dense:return q.DenseUnion;case Er.Sparse:return q.SparseUnion}return q.Union;case q.FixedSizeBinary:return q.FixedSizeBinary;case q.FixedSizeList:return q.FixedSizeList;case q.Dictionary:return q.Dictionary}throw new Error(`Unrecognized type '${q[r.typeId]}'`)}We.prototype.visitInt8=null;We.prototype.visitInt16=null;We.prototype.visitInt32=null;We.prototype.visitInt64=null;We.prototype.visitUint8=null;We.prototype.visitUint16=null;We.prototype.visitUint32=null;We.prototype.visitUint64=null;We.prototype.visitFloat16=null;We.prototype.visitFloat32=null;We.prototype.visitFloat64=null;We.prototype.visitDateDay=null;We.prototype.visitDateMillisecond=null;We.prototype.visitTimestampSecond=null;We.prototype.visitTimestampMillisecond=null;We.prototype.visitTimestampMicrosecond=null;We.prototype.visitTimestampNanosecond=null;We.prototype.visitTimeSecond=null;We.prototype.visitTimeMillisecond=null;We.prototype.visitTimeMicrosecond=null;We.prototype.visitTimeNanosecond=null;We.prototype.visitDenseUnion=null;We.prototype.visitSparseUnion=null;We.prototype.visitIntervalDayTime=null;We.prototype.visitIntervalYearMonth=null;const Rp=new Float64Array(1),Na=new Uint32Array(Rp.buffer);function Op(r){const e=(r&31744)>>10,t=(r&1023)/1024,n=Math.pow(-1,(r&32768)>>15);switch(e){case 31:return n*(t?Number.NaN:1/0);case 0:return n*(t?6103515625e-14*t:0)}return n*Math.pow(2,e-15)*(1+t)}function I0(r){if(r!==r)return 32256;Rp[0]=r;const e=(Na[1]&2147483648)>>16&65535;let t=Na[1]&2146435072,n=0;return t>=1089470464?Na[0]>0?t=31744:(t=(t&2080374784)>>16,n=(Na[1]&1048575)>>10):t<=1056964608?(n=1048576+(Na[1]&1048575),n=1048576+(n<<(t>>20)-998)>>21,t=0):(t=t-1056964608>>10,n=(Na[1]&1048575)+512>>10),e|t|n&65535}class Re extends We{}function ke(r){return(e,t,n)=>{if(e.setValid(t,n!=null))return r(e,t,n)}}const _0=(r,e,t)=>{r[e]=Math.trunc(t/864e5)},nf=(r,e,t)=>{r[e]=Math.trunc(t%4294967296),r[e+1]=Math.trunc(t/4294967296)},D0=(r,e,t)=>{r[e]=Math.trunc(t*1e3%4294967296),r[e+1]=Math.trunc(t*1e3/4294967296)},A0=(r,e,t)=>{r[e]=Math.trunc(t*1e6%4294967296),r[e+1]=Math.trunc(t*1e6/4294967296)},Mp=(r,e,t,n)=>{if(t+1<e.length){const{[t]:a,[t+1]:i}=e;r.set(n.subarray(0,i-a),a)}},R0=({offset:r,values:e},t,n)=>{const a=r+t;n?e[a>>3]|=1<<a%8:e[a>>3]&=~(1<<a%8)},In=({values:r},e,t)=>{r[e]=t},af=({values:r},e,t)=>{r[e]=t},kp=({values:r},e,t)=>{r[e]=I0(t)},O0=(r,e,t)=>{switch(r.type.precision){case pr.HALF:return kp(r,e,t);case pr.SINGLE:case pr.DOUBLE:return af(r,e,t)}},Pp=({values:r},e,t)=>{_0(r,e,t.valueOf())},Lp=({values:r},e,t)=>{nf(r,e*2,t.valueOf())},M0=({stride:r,values:e},t,n)=>{e.set(n.subarray(0,r),r*t)},k0=({values:r,valueOffsets:e},t,n)=>Mp(r,e,t,n),P0=({values:r,valueOffsets:e},t,n)=>{Mp(r,e,t,Qc(n))},L0=(r,e,t)=>{r.type.unit===Tn.DAY?Pp(r,e,t):Lp(r,e,t)},Fp=({values:r},e,t)=>nf(r,e*2,t/1e3),Np=({values:r},e,t)=>nf(r,e*2,t),zp=({values:r},e,t)=>D0(r,e*2,t),Vp=({values:r},e,t)=>A0(r,e*2,t),F0=(r,e,t)=>{switch(r.type.unit){case Ze.SECOND:return Fp(r,e,t);case Ze.MILLISECOND:return Np(r,e,t);case Ze.MICROSECOND:return zp(r,e,t);case Ze.NANOSECOND:return Vp(r,e,t)}},Up=({values:r},e,t)=>{r[e]=t},qp=({values:r},e,t)=>{r[e]=t},$p=({values:r},e,t)=>{r[e]=t},Wp=({values:r},e,t)=>{r[e]=t},N0=(r,e,t)=>{switch(r.type.unit){case Ze.SECOND:return Up(r,e,t);case Ze.MILLISECOND:return qp(r,e,t);case Ze.MICROSECOND:return $p(r,e,t);case Ze.NANOSECOND:return Wp(r,e,t)}},z0=({values:r,stride:e},t,n)=>{r.set(n.subarray(0,e),e*t)},V0=(r,e,t)=>{const n=r.children[0],a=r.valueOffsets,i=Mr.getVisitFn(n);if(Array.isArray(t))for(let s=-1,o=a[e],u=a[e+1];o<u;)i(n,o++,t[++s]);else for(let s=-1,o=a[e],u=a[e+1];o<u;)i(n,o++,t.get(++s))},U0=(r,e,t)=>{const n=r.children[0],{valueOffsets:a}=r,i=Mr.getVisitFn(n);let{[e]:s,[e+1]:o}=a;const u=t instanceof Map?t.entries():Object.entries(t);for(const l of u)if(i(n,s,l),++s>=o)break},q0=(r,e)=>(t,n,a,i)=>n&&t(n,r,e[i]),$0=(r,e)=>(t,n,a,i)=>n&&t(n,r,e.get(i)),W0=(r,e)=>(t,n,a,i)=>n&&t(n,r,e.get(a.name)),G0=(r,e)=>(t,n,a,i)=>n&&t(n,r,e[a.name]),H0=(r,e,t)=>{const n=r.type.children.map(i=>Mr.getVisitFn(i.type)),a=t instanceof Map?W0(e,t):t instanceof it?$0(e,t):Array.isArray(t)?q0(e,t):G0(e,t);r.type.children.forEach((i,s)=>a(n[s],r.children[s],i,s))},Y0=(r,e,t)=>{r.type.mode===Er.Dense?Gp(r,e,t):Hp(r,e,t)},Gp=(r,e,t)=>{const n=r.type.typeIdToChildIndex[r.typeIds[e]],a=r.children[n];Mr.visit(a,r.valueOffsets[e],t)},Hp=(r,e,t)=>{const n=r.type.typeIdToChildIndex[r.typeIds[e]],a=r.children[n];Mr.visit(a,e,t)},K0=(r,e,t)=>{var n;(n=r.dictionary)===null||n===void 0||n.set(r.values[e],t)},j0=(r,e,t)=>{r.type.unit===Wn.DAY_TIME?Yp(r,e,t):Kp(r,e,t)},Yp=({values:r},e,t)=>{r.set(t.subarray(0,2),2*e)},Kp=({values:r},e,t)=>{r[e]=t[0]*12+t[1]%12},X0=(r,e,t)=>{const{stride:n}=r,a=r.children[0],i=Mr.getVisitFn(a);if(Array.isArray(t))for(let s=-1,o=e*n;++s<n;)i(a,o+s,t[s]);else for(let s=-1,o=e*n;++s<n;)i(a,o+s,t.get(s))};Re.prototype.visitBool=ke(R0);Re.prototype.visitInt=ke(In);Re.prototype.visitInt8=ke(In);Re.prototype.visitInt16=ke(In);Re.prototype.visitInt32=ke(In);Re.prototype.visitInt64=ke(In);Re.prototype.visitUint8=ke(In);Re.prototype.visitUint16=ke(In);Re.prototype.visitUint32=ke(In);Re.prototype.visitUint64=ke(In);Re.prototype.visitFloat=ke(O0);Re.prototype.visitFloat16=ke(kp);Re.prototype.visitFloat32=ke(af);Re.prototype.visitFloat64=ke(af);Re.prototype.visitUtf8=ke(P0);Re.prototype.visitBinary=ke(k0);Re.prototype.visitFixedSizeBinary=ke(M0);Re.prototype.visitDate=ke(L0);Re.prototype.visitDateDay=ke(Pp);Re.prototype.visitDateMillisecond=ke(Lp);Re.prototype.visitTimestamp=ke(F0);Re.prototype.visitTimestampSecond=ke(Fp);Re.prototype.visitTimestampMillisecond=ke(Np);Re.prototype.visitTimestampMicrosecond=ke(zp);Re.prototype.visitTimestampNanosecond=ke(Vp);Re.prototype.visitTime=ke(N0);Re.prototype.visitTimeSecond=ke(Up);Re.prototype.visitTimeMillisecond=ke(qp);Re.prototype.visitTimeMicrosecond=ke($p);Re.prototype.visitTimeNanosecond=ke(Wp);Re.prototype.visitDecimal=ke(z0);Re.prototype.visitList=ke(V0);Re.prototype.visitStruct=ke(H0);Re.prototype.visitUnion=ke(Y0);Re.prototype.visitDenseUnion=ke(Gp);Re.prototype.visitSparseUnion=ke(Hp);Re.prototype.visitDictionary=ke(K0);Re.prototype.visitInterval=ke(j0);Re.prototype.visitIntervalDayTime=ke(Yp);Re.prototype.visitIntervalYearMonth=ke(Kp);Re.prototype.visitFixedSizeList=ke(X0);Re.prototype.visitMap=ke(U0);const Mr=new Re,Lr=Symbol.for("parent"),ai=Symbol.for("rowIndex");class sf{constructor(e,t){return this[Lr]=e,this[ai]=t,new Proxy(this,new Q0)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[ai],t=this[Lr],n=t.type.children,a={};for(let i=-1,s=n.length;++i<s;)a[n[i].name]=yr.visit(t.children[i],e);return a}toString(){return`{${[...this].map(([e,t])=>`${Qi(e)}: ${Qi(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Z0(this[Lr],this[ai])}}class Z0{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,yr.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(sf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Lr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ai]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Q0{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Lr].type.children.map(t=>t.name)}has(e,t){return e[Lr].type.children.findIndex(n=>n.name===t)!==-1}getOwnPropertyDescriptor(e,t){if(e[Lr].type.children.findIndex(n=>n.name===t)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const n=e[Lr].type.children.findIndex(a=>a.name===t);if(n!==-1){const a=yr.visit(e[Lr].children[n],e[ai]);return Reflect.set(e,t,a),a}}set(e,t,n){const a=e[Lr].type.children.findIndex(i=>i.name===t);return a!==-1?(Mr.visit(e[Lr].children[a],e[ai],n),Reflect.set(e,t,n)):Reflect.has(e,t)||typeof t=="symbol"?Reflect.set(e,t,n):!1}}class Ie extends We{}function Oe(r){return(e,t)=>e.getValid(t)?r(e,t):null}const J0=(r,e)=>864e5*r[e],of=(r,e)=>4294967296*r[e+1]+(r[e]>>>0),eb=(r,e)=>4294967296*(r[e+1]/1e3)+(r[e]>>>0)/1e3,tb=(r,e)=>4294967296*(r[e+1]/1e6)+(r[e]>>>0)/1e6,jp=r=>new Date(r),rb=(r,e)=>jp(J0(r,e)),nb=(r,e)=>jp(of(r,e)),ab=(r,e)=>null,Xp=(r,e,t)=>{if(t+1>=e.length)return null;const n=e[t],a=e[t+1];return r.subarray(n,a)},ib=({offset:r,values:e},t)=>{const n=r+t;return(e[n>>3]&1<<n%8)!==0},Zp=({values:r},e)=>rb(r,e),Qp=({values:r},e)=>nb(r,e*2),ra=({stride:r,values:e},t)=>e[r*t],sb=({stride:r,values:e},t)=>Op(e[r*t]),Jp=({values:r},e)=>r[e],ob=({stride:r,values:e},t)=>e.subarray(r*t,r*(t+1)),ub=({values:r,valueOffsets:e},t)=>Xp(r,e,t),lb=({values:r,valueOffsets:e},t)=>{const n=Xp(r,e,t);return n!==null?mc(n):null},cb=({values:r},e)=>r[e],fb=({type:r,values:e},t)=>r.precision!==pr.HALF?e[t]:Op(e[t]),db=(r,e)=>r.type.unit===Tn.DAY?Zp(r,e):Qp(r,e),eg=({values:r},e)=>1e3*of(r,e*2),tg=({values:r},e)=>of(r,e*2),rg=({values:r},e)=>eb(r,e*2),ng=({values:r},e)=>tb(r,e*2),hb=(r,e)=>{switch(r.type.unit){case Ze.SECOND:return eg(r,e);case Ze.MILLISECOND:return tg(r,e);case Ze.MICROSECOND:return rg(r,e);case Ze.NANOSECOND:return ng(r,e)}},ag=({values:r},e)=>r[e],ig=({values:r},e)=>r[e],sg=({values:r},e)=>r[e],og=({values:r},e)=>r[e],vb=(r,e)=>{switch(r.type.unit){case Ze.SECOND:return ag(r,e);case Ze.MILLISECOND:return ig(r,e);case Ze.MICROSECOND:return sg(r,e);case Ze.NANOSECOND:return og(r,e)}},pb=({values:r,stride:e},t)=>rf.decimal(r.subarray(e*t,e*(t+1))),gb=(r,e)=>{const{valueOffsets:t,stride:n,children:a}=r,{[e*n]:i,[e*n+1]:s}=t,u=a[0].slice(i,s-i);return new it([u])},yb=(r,e)=>{const{valueOffsets:t,children:n}=r,{[e]:a,[e+1]:i}=t,s=n[0];return new uf(s.slice(a,i-a))},mb=(r,e)=>new sf(r,e),bb=(r,e)=>r.type.mode===Er.Dense?ug(r,e):lg(r,e),ug=(r,e)=>{const t=r.type.typeIdToChildIndex[r.typeIds[e]],n=r.children[t];return yr.visit(n,r.valueOffsets[e])},lg=(r,e)=>{const t=r.type.typeIdToChildIndex[r.typeIds[e]],n=r.children[t];return yr.visit(n,e)},wb=(r,e)=>{var t;return(t=r.dictionary)===null||t===void 0?void 0:t.get(r.values[e])},Sb=(r,e)=>r.type.unit===Wn.DAY_TIME?cg(r,e):fg(r,e),cg=({values:r},e)=>r.subarray(2*e,2*(e+1)),fg=({values:r},e)=>{const t=r[e],n=new Int32Array(2);return n[0]=Math.trunc(t/12),n[1]=Math.trunc(t%12),n},xb=(r,e)=>{const{stride:t,children:n}=r,i=n[0].slice(e*t,t);return new it([i])};Ie.prototype.visitNull=Oe(ab);Ie.prototype.visitBool=Oe(ib);Ie.prototype.visitInt=Oe(cb);Ie.prototype.visitInt8=Oe(ra);Ie.prototype.visitInt16=Oe(ra);Ie.prototype.visitInt32=Oe(ra);Ie.prototype.visitInt64=Oe(Jp);Ie.prototype.visitUint8=Oe(ra);Ie.prototype.visitUint16=Oe(ra);Ie.prototype.visitUint32=Oe(ra);Ie.prototype.visitUint64=Oe(Jp);Ie.prototype.visitFloat=Oe(fb);Ie.prototype.visitFloat16=Oe(sb);Ie.prototype.visitFloat32=Oe(ra);Ie.prototype.visitFloat64=Oe(ra);Ie.prototype.visitUtf8=Oe(lb);Ie.prototype.visitBinary=Oe(ub);Ie.prototype.visitFixedSizeBinary=Oe(ob);Ie.prototype.visitDate=Oe(db);Ie.prototype.visitDateDay=Oe(Zp);Ie.prototype.visitDateMillisecond=Oe(Qp);Ie.prototype.visitTimestamp=Oe(hb);Ie.prototype.visitTimestampSecond=Oe(eg);Ie.prototype.visitTimestampMillisecond=Oe(tg);Ie.prototype.visitTimestampMicrosecond=Oe(rg);Ie.prototype.visitTimestampNanosecond=Oe(ng);Ie.prototype.visitTime=Oe(vb);Ie.prototype.visitTimeSecond=Oe(ag);Ie.prototype.visitTimeMillisecond=Oe(ig);Ie.prototype.visitTimeMicrosecond=Oe(sg);Ie.prototype.visitTimeNanosecond=Oe(og);Ie.prototype.visitDecimal=Oe(pb);Ie.prototype.visitList=Oe(gb);Ie.prototype.visitStruct=Oe(mb);Ie.prototype.visitUnion=Oe(bb);Ie.prototype.visitDenseUnion=Oe(ug);Ie.prototype.visitSparseUnion=Oe(lg);Ie.prototype.visitDictionary=Oe(wb);Ie.prototype.visitInterval=Oe(Sb);Ie.prototype.visitIntervalDayTime=Oe(cg);Ie.prototype.visitIntervalYearMonth=Oe(fg);Ie.prototype.visitFixedSizeList=Oe(xb);Ie.prototype.visitMap=Oe(yb);const yr=new Ie,jr=Symbol.for("keys"),ii=Symbol.for("vals");class uf{constructor(e){return this[jr]=new it([e.children[0]]).memoize(),this[ii]=e.children[1],new Proxy(this,new Tb)}[Symbol.iterator](){return new Eb(this[jr],this[ii])}get size(){return this[jr].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[jr],t=this[ii],n={};for(let a=-1,i=e.length;++a<i;)n[e.get(a)]=yr.visit(t,a);return n}toString(){return`{${[...this].map(([e,t])=>`${Qi(e)}: ${Qi(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Eb{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),yr.visit(this.vals,e)]})}}class Tb{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[jr].toArray().map(String)}has(e,t){return e[jr].includes(t)}getOwnPropertyDescriptor(e,t){if(e[jr].indexOf(t)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const n=e[jr].indexOf(t);if(n!==-1){const a=yr.visit(Reflect.get(e,ii),n);return Reflect.set(e,t,a),a}}set(e,t,n){const a=e[jr].indexOf(t);return a!==-1?(Mr.visit(Reflect.get(e,ii),a,n),Reflect.set(e,t,n)):Reflect.has(e,t)?Reflect.set(e,t,n):!1}}Object.defineProperties(uf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[jr]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ii]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let dd;function dg(r,e,t,n){const{length:a=0}=r;let i=typeof e!="number"?0:e,s=typeof t!="number"?a:t;return i<0&&(i=(i%a+a)%a),s<0&&(s=(s%a+a)%a),s<i&&(dd=i,i=s,s=dd),s>a&&(s=a),n?n(r,i,s):[i,s]}const hd=r=>r!==r;function xi(r){if(typeof r!=="object"||r===null)return hd(r)?hd:t=>t===r;if(r instanceof Date){const t=r.valueOf();return n=>n instanceof Date?n.valueOf()===t:!1}return ArrayBuffer.isView(r)?t=>t?y0(r,t):!1:r instanceof Map?Bb(r):Array.isArray(r)?Cb(r):r instanceof it?Ib(r):_b(r,!0)}function Cb(r){const e=[];for(let t=-1,n=r.length;++t<n;)e[t]=xi(r[t]);return uu(e)}function Bb(r){let e=-1;const t=[];for(const n of r.values())t[++e]=xi(n);return uu(t)}function Ib(r){const e=[];for(let t=-1,n=r.length;++t<n;)e[t]=xi(r.get(t));return uu(e)}function _b(r,e=!1){const t=Object.keys(r);if(!e&&t.length===0)return()=>!1;const n=[];for(let a=-1,i=t.length;++a<i;)n[a]=xi(r[t[a]]);return uu(n,t)}function uu(r,e){return t=>{if(!t||typeof t!="object")return!1;switch(t.constructor){case Array:return Db(r,t);case Map:return vd(r,t,t.keys());case uf:case sf:case Object:case void 0:return vd(r,t,e||Object.keys(t))}return t instanceof it?Ab(r,t):!1}}function Db(r,e){const t=r.length;if(e.length!==t)return!1;for(let n=-1;++n<t;)if(!r[n](e[n]))return!1;return!0}function Ab(r,e){const t=r.length;if(e.length!==t)return!1;for(let n=-1;++n<t;)if(!r[n](e.get(n)))return!1;return!0}function vd(r,e,t){const n=t[Symbol.iterator](),a=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),i=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let s=0;const o=r.length;let u=i.next(),l=n.next(),c=a.next();for(;s<o&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!r[s](u.value));++s,l=n.next(),c=a.next(),u=i.next());return s===o&&l.done&&c.done&&u.done?!0:(n.return&&n.return(),a.return&&a.return(),i.return&&i.return(),!1)}function hg(r,e,t,n){return(t&1<<n)!==0}function Rb(r,e,t,n){return(t&1<<n)>>n}function lf(r,e,t){const n=t.byteLength+7&-8;if(r>0||t.byteLength<n){const a=new Uint8Array(n);return a.set(r%8===0?t.subarray(r>>3):Ao(new cf(t,r,e,null,hg)).subarray(0,n)),a}return t}function Ao(r){const e=[];let t=0,n=0,a=0;for(const s of r)s&&(a|=1<<n),++n===8&&(e[t++]=a,a=n=0);(t===0||n>0)&&(e[t++]=a);const i=new Uint8Array(e.length+7&-8);return i.set(e),i}class cf{constructor(e,t,n,a,i){this.bytes=e,this.length=n,this.context=a,this.get=i,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function xc(r,e,t){if(t-e<=0)return 0;if(t-e<8){let i=0;for(const s of new cf(r,e,t-e,r,Rb))i+=s;return i}const n=t>>3<<3,a=e+(e%8===0?0:8-e%8);return xc(r,e,a)+xc(r,n,t)+Ob(r,a>>3,n-a>>3)}function Ob(r,e,t){let n=0,a=Math.trunc(e);const i=new DataView(r.buffer,r.byteOffset,r.byteLength),s=t===void 0?r.byteLength:a+t;for(;s-a>=4;)n+=Fu(i.getUint32(a)),a+=4;for(;s-a>=2;)n+=Fu(i.getUint16(a)),a+=2;for(;s-a>=1;)n+=Fu(i.getUint8(a)),a+=1;return n}function Fu(r){let e=Math.trunc(r);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const Mb=-1;class pt{constructor(e,t,n,a,i,s=[],o){this.type=e,this.children=s,this.dictionary=o,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(a||0,-1));let u;i instanceof pt?(this.stride=i.stride,this.values=i.values,this.typeIds=i.typeIds,this.nullBitmap=i.nullBitmap,this.valueOffsets=i.valueOffsets):(this.stride=gn(e),i&&((u=i[0])&&(this.valueOffsets=u),(u=i[1])&&(this.values=u),(u=i[2])&&(this.nullBitmap=u),(u=i[3])&&(this.typeIds=u))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:t,values:n,nullBitmap:a,typeIds:i}=this;return t&&(e+=t.byteLength),n&&(e+=n.byteLength),a&&(e+=a.byteLength),i&&(e+=i.byteLength),this.children.reduce((s,o)=>s+o.byteLength,e)}get nullCount(){let e=this._nullCount,t;return e<=Mb&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-xc(t,this.offset,this.offset+this.length)),e}getValid(e){if(this.nullable&&this.nullCount>0){const t=this.offset+e;return(this.nullBitmap[t>>3]&1<<t%8)!==0}return!0}setValid(e,t){if(!this.nullable)return t;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:u}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:u,_nullCount:0})}const{nullBitmap:n,offset:a}=this,i=a+e>>3,s=(a+e)%8,o=n[i]>>s&1;return t?o===0&&(n[i]|=1<<s,this._nullCount=this.nullCount+1):o===1&&(n[i]&=~(1<<s),this._nullCount=this.nullCount-1),t}clone(e=this.type,t=this.offset,n=this.length,a=this._nullCount,i=this,s=this.children){return new pt(e,t,n,a,i,s,this.dictionary)}slice(e,t){const{stride:n,typeId:a,children:i}=this,s=+(this._nullCount===0)-1,o=a===16?n:1,u=this._sliceBuffers(e,t,n,a);return this.clone(this.type,this.offset+e,t,s,u,i.length===0||this.valueOffsets?i:this._sliceChildren(i,o*e,o*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===q.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:n}=this,a=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);a[t>>3]=(1<<t-(t&-8))-1,n>0&&a.set(lf(this.offset,t,this.nullBitmap),0);const i=this.buffers;return i[pn.VALIDITY]=a,this.clone(this.type,0,e,n+(e-t),i)}_sliceBuffers(e,t,n,a){let i;const{buffers:s}=this;return(i=s[pn.TYPE])&&(s[pn.TYPE]=i.subarray(e,e+t)),(i=s[pn.OFFSET])&&(s[pn.OFFSET]=i.subarray(e,e+t+1))||(i=s[pn.DATA])&&(s[pn.DATA]=a===6?i:i.subarray(n*e,n*(e+t))),s}_sliceChildren(e,t,n){return e.map(a=>a.slice(t,n))}}pt.prototype.children=Object.freeze([]);class Hi extends We{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:t,["offset"]:n=0,["length"]:a=0}=e;return new pt(t,n,a,0)}visitBool(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length>>3,["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitInt(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length,["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitFloat(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length,["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitUtf8(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.data),i=Xe(e.nullBitmap),s=Mi(e.valueOffsets),{["length"]:o=s.length-1,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new pt(t,n,o,u,[s,a,i])}visitBinary(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.data),i=Xe(e.nullBitmap),s=Mi(e.valueOffsets),{["length"]:o=s.length-1,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new pt(t,n,o,u,[s,a,i])}visitFixedSizeBinary(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length/gn(t),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitDate(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length/gn(t),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitTimestamp(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length/gn(t),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitTime(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length/gn(t),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitDecimal(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length/gn(t),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitList(e){const{["type"]:t,["offset"]:n=0,["child"]:a}=e,i=Xe(e.nullBitmap),s=Mi(e.valueOffsets),{["length"]:o=s.length-1,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new pt(t,n,o,u,[s,void 0,i],[a])}visitStruct(e){const{["type"]:t,["offset"]:n=0,["children"]:a=[]}=e,i=Xe(e.nullBitmap),{length:s=a.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,void 0,i],a)}visitUnion(e){const{["type"]:t,["offset"]:n=0,["children"]:a=[]}=e,i=Xe(e.nullBitmap),s=ft(t.ArrayType,e.typeIds),{["length"]:o=s.length,["nullCount"]:u=e.nullBitmap?-1:0}=e;if(Be.isSparseUnion(t))return new pt(t,n,o,u,[void 0,void 0,i,s],a);const l=Mi(e.valueOffsets);return new pt(t,n,o,u,[l,void 0,i,s],a)}visitDictionary(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.indices.ArrayType,e.data),{["dictionary"]:s=new it([new Hi().visit({type:t.dictionary})])}=e,{["length"]:o=i.length,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new pt(t,n,o,u,[void 0,i,a],[],s)}visitInterval(e){const{["type"]:t,["offset"]:n=0}=e,a=Xe(e.nullBitmap),i=ft(t.ArrayType,e.data),{["length"]:s=i.length/gn(t),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,i,a])}visitFixedSizeList(e){const{["type"]:t,["offset"]:n=0,["child"]:a=new Hi().visit({type:t.valueType})}=e,i=Xe(e.nullBitmap),{["length"]:s=a.length/gn(t),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new pt(t,n,s,o,[void 0,void 0,i],[a])}visitMap(e){const{["type"]:t,["offset"]:n=0,["child"]:a=new Hi().visit({type:t.childType})}=e,i=Xe(e.nullBitmap),s=Mi(e.valueOffsets),{["length"]:o=s.length-1,["nullCount"]:u=e.nullBitmap?-1:0}=e;return new pt(t,n,o,u,[s,void 0,i],[a])}}function $e(r){return new Hi().visit(r)}class pd{constructor(e=0,t){this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function vg(r){return r.reduce((e,t)=>e+t.nullCount,0)}function pg(r){return r.reduce((e,t,n)=>(e[n+1]=e[n]+t.length,e),new Uint32Array(r.length+1))}function gg(r,e,t,n){const a=[];for(let i=-1,s=r.length;++i<s;){const o=r[i],u=e[i],{length:l}=o;if(u>=n)break;if(t>=u+l)continue;if(u>=t&&u+l<=n){a.push(o);continue}const c=Math.max(0,t-u),f=Math.min(n-u,l);a.push(o.slice(c,f-c))}return a.length===0&&a.push(r[0].slice(0,0)),a}function ff(r,e,t,n){let a=0,i=0,s=e.length-1;do{if(a>=s-1)return t<e[s]?n(r,a,t-e[a]):null;i=a+Math.trunc((s-a)*.5),t<e[i]?s=i:a=i}while(a<s)}function df(r,e){return r.getValid(e)}function si(r){function e(t,n,a){return r(t[n],a)}return function(t){const n=this.data;return ff(n,this._offsets,t,e)}}function yg(r){let e;function t(n,a,i){return r(n[a],i,e)}return function(n,a){const i=this.data;e=a;const s=ff(i,this._offsets,n,t);return e=void 0,s}}function mg(r){let e;function t(n,a,i){let s=i,o=0,u=0;for(let l=a-1,c=n.length;++l<c;){const f=n[l];if(~(o=r(f,e,s)))return u+o;s=0,u+=f.length}return-1}return function(n,a){e=n;const i=this.data,s=typeof a!="number"?t(i,0,0):ff(i,this._offsets,a,t);return e=void 0,s}}class _e extends We{}function kb(r,e){return e===null&&r.length>0?0:-1}function Pb(r,e){const{nullBitmap:t}=r;if(!t||r.nullCount<=0)return-1;let n=0;for(const a of new cf(t,r.offset+(e||0),r.length,t,hg)){if(!a)return n;++n}return-1}function Fe(r,e,t){if(e===void 0)return-1;if(e===null)return Pb(r,t);const n=yr.getVisitFn(r),a=xi(e);for(let i=(t||0)-1,s=r.length;++i<s;)if(a(n(r,i)))return i;return-1}function bg(r,e,t){const n=yr.getVisitFn(r),a=xi(e);for(let i=(t||0)-1,s=r.length;++i<s;)if(a(n(r,i)))return i;return-1}_e.prototype.visitNull=kb;_e.prototype.visitBool=Fe;_e.prototype.visitInt=Fe;_e.prototype.visitInt8=Fe;_e.prototype.visitInt16=Fe;_e.prototype.visitInt32=Fe;_e.prototype.visitInt64=Fe;_e.prototype.visitUint8=Fe;_e.prototype.visitUint16=Fe;_e.prototype.visitUint32=Fe;_e.prototype.visitUint64=Fe;_e.prototype.visitFloat=Fe;_e.prototype.visitFloat16=Fe;_e.prototype.visitFloat32=Fe;_e.prototype.visitFloat64=Fe;_e.prototype.visitUtf8=Fe;_e.prototype.visitBinary=Fe;_e.prototype.visitFixedSizeBinary=Fe;_e.prototype.visitDate=Fe;_e.prototype.visitDateDay=Fe;_e.prototype.visitDateMillisecond=Fe;_e.prototype.visitTimestamp=Fe;_e.prototype.visitTimestampSecond=Fe;_e.prototype.visitTimestampMillisecond=Fe;_e.prototype.visitTimestampMicrosecond=Fe;_e.prototype.visitTimestampNanosecond=Fe;_e.prototype.visitTime=Fe;_e.prototype.visitTimeSecond=Fe;_e.prototype.visitTimeMillisecond=Fe;_e.prototype.visitTimeMicrosecond=Fe;_e.prototype.visitTimeNanosecond=Fe;_e.prototype.visitDecimal=Fe;_e.prototype.visitList=Fe;_e.prototype.visitStruct=Fe;_e.prototype.visitUnion=Fe;_e.prototype.visitDenseUnion=bg;_e.prototype.visitSparseUnion=bg;_e.prototype.visitDictionary=Fe;_e.prototype.visitInterval=Fe;_e.prototype.visitIntervalDayTime=Fe;_e.prototype.visitIntervalYearMonth=Fe;_e.prototype.visitFixedSizeList=Fe;_e.prototype.visitMap=Fe;const Ro=new _e;class De extends We{}function Me(r){const{type:e}=r;if(r.nullCount===0&&r.stride===1&&(e.typeId===q.Timestamp||e instanceof Hn&&e.bitWidth!==64||e instanceof rs&&e.bitWidth!==64||e instanceof ts&&e.precision!==pr.HALF))return new pd(r.data.length,n=>{const a=r.data[n];return a.values.subarray(0,a.length)[Symbol.iterator]()});let t=0;return new pd(r.data.length,n=>{const i=r.data[n].length,s=r.slice(t,t+i);return t+=i,new Lb(s)})}class Lb{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}De.prototype.visitNull=Me;De.prototype.visitBool=Me;De.prototype.visitInt=Me;De.prototype.visitInt8=Me;De.prototype.visitInt16=Me;De.prototype.visitInt32=Me;De.prototype.visitInt64=Me;De.prototype.visitUint8=Me;De.prototype.visitUint16=Me;De.prototype.visitUint32=Me;De.prototype.visitUint64=Me;De.prototype.visitFloat=Me;De.prototype.visitFloat16=Me;De.prototype.visitFloat32=Me;De.prototype.visitFloat64=Me;De.prototype.visitUtf8=Me;De.prototype.visitBinary=Me;De.prototype.visitFixedSizeBinary=Me;De.prototype.visitDate=Me;De.prototype.visitDateDay=Me;De.prototype.visitDateMillisecond=Me;De.prototype.visitTimestamp=Me;De.prototype.visitTimestampSecond=Me;De.prototype.visitTimestampMillisecond=Me;De.prototype.visitTimestampMicrosecond=Me;De.prototype.visitTimestampNanosecond=Me;De.prototype.visitTime=Me;De.prototype.visitTimeSecond=Me;De.prototype.visitTimeMillisecond=Me;De.prototype.visitTimeMicrosecond=Me;De.prototype.visitTimeNanosecond=Me;De.prototype.visitDecimal=Me;De.prototype.visitList=Me;De.prototype.visitStruct=Me;De.prototype.visitUnion=Me;De.prototype.visitDenseUnion=Me;De.prototype.visitSparseUnion=Me;De.prototype.visitDictionary=Me;De.prototype.visitInterval=Me;De.prototype.visitIntervalDayTime=Me;De.prototype.visitIntervalYearMonth=Me;De.prototype.visitFixedSizeList=Me;De.prototype.visitMap=Me;const hf=new De,Fb=(r,e)=>r+e;class na extends We{visitNull(e,t){return 0}visitInt(e,t){return e.type.bitWidth/8}visitFloat(e,t){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,t){return 1/8}visitDecimal(e,t){return e.type.bitWidth/8}visitDate(e,t){return(e.type.unit+1)*4}visitTime(e,t){return e.type.bitWidth/8}visitTimestamp(e,t){return e.type.unit===Ze.SECOND?4:8}visitInterval(e,t){return(e.type.unit+1)*4}visitStruct(e,t){return e.children.reduce((n,a)=>n+sn.visit(a,t),0)}visitFixedSizeBinary(e,t){return e.type.byteWidth}visitMap(e,t){return 8+e.children.reduce((n,a)=>n+sn.visit(a,t),0)}visitDictionary(e,t){var n;return e.type.indices.bitWidth/8+(((n=e.dictionary)===null||n===void 0?void 0:n.getByteLength(e.values[t]))||0)}}const Nb=({valueOffsets:r},e)=>8+(r[e+1]-r[e]),zb=({valueOffsets:r},e)=>8+(r[e+1]-r[e]),Vb=({valueOffsets:r,stride:e,children:t},n)=>{const a=t[0],{[n*e]:i}=r,{[n*e+1]:s}=r,o=sn.getVisitFn(a.type),u=a.slice(i,s-i);let l=8;for(let c=-1,f=s-i;++c<f;)l+=o(u,c);return l},Ub=({stride:r,children:e},t)=>{const n=e[0],a=n.slice(t*r,r),i=sn.getVisitFn(n.type);let s=0;for(let o=-1,u=a.length;++o<u;)s+=i(a,o);return s},qb=(r,e)=>r.type.mode===Er.Dense?wg(r,e):Sg(r,e),wg=({type:r,children:e,typeIds:t,valueOffsets:n},a)=>{const i=r.typeIdToChildIndex[t[a]];return 8+sn.visit(e[i],n[a])},Sg=({children:r},e)=>4+sn.visitMany(r,r.map(()=>e)).reduce(Fb,0);na.prototype.visitUtf8=Nb;na.prototype.visitBinary=zb;na.prototype.visitList=Vb;na.prototype.visitFixedSizeList=Ub;na.prototype.visitUnion=qb;na.prototype.visitDenseUnion=wg;na.prototype.visitSparseUnion=Sg;const sn=new na;var xg;const Eg={},Tg={};class it{constructor(e){var t,n,a;const i=e[0]instanceof it?e.flatMap(o=>o.data):e;if(i.length===0||i.some(o=>!(o instanceof pt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const s=(t=i[0])===null||t===void 0?void 0:t.type;switch(i.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:u,indexOf:l,byteLength:c}=Eg[s.typeId],f=i[0];this.isValid=d=>df(f,d),this.get=d=>o(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,Tg[s.typeId]),this._offsets=pg(i);break}this.data=i,this.type=s,this.stride=gn(s),this.numChildren=(a=(n=s.children)===null||n===void 0?void 0:n.length)!==null&&a!==void 0?a:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((e,t)=>e+t.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=vg(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${q[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>0}getByteLength(e){return 0}[Symbol.iterator](){return hf.visit(this)}concat(...e){return new it(this.data.concat(e.flatMap(t=>t.data).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new it(dg(this,e,t,({data:n,_offsets:a},i,s)=>gg(n,a,i,s)))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:n,stride:a,ArrayType:i}=this;switch(e.typeId){case q.Int:case q.Float:case q.Decimal:case q.Time:case q.Timestamp:switch(t.length){case 0:return new i;case 1:return t[0].values.subarray(0,n*a);default:return t.reduce((s,{values:o,length:u})=>(s.array.set(o.subarray(0,u*a),s.offset),s.offset+=u*a,s),{array:new i(n*a),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt((t=this.type.children)===null||t===void 0?void 0:t.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new it(this.data.map(({children:t})=>t[e])):null}get isMemoized(){return Be.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Be.isDictionary(this.type)){const e=new Oo(this.data[0].dictionary),t=this.data.map(n=>{const a=n.clone();return a.dictionary=e,a});return new it(t)}return new Oo(this)}unmemoize(){if(Be.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map(n=>{const a=n.clone();return a.dictionary=e,a});return new it(t)}return this}}xg=Symbol.toStringTag;it[xg]=(r=>{r.type=Be.prototype,r.data=[],r.length=0,r.stride=1,r.numChildren=0,r._nullCount=-1,r._byteLength=-1,r._offsets=new Uint32Array([0]),r[Symbol.isConcatSpreadable]=!0;const e=Object.keys(q).map(t=>q[t]).filter(t=>typeof t=="number"&&t!==q.NONE);for(const t of e){const n=yr.getVisitFnByTypeId(t),a=Mr.getVisitFnByTypeId(t),i=Ro.getVisitFnByTypeId(t),s=sn.getVisitFnByTypeId(t);Eg[t]={get:n,set:a,indexOf:i,byteLength:s},Tg[t]=Object.create(r,{isValid:{value:si(df)},get:{value:si(yr.getVisitFnByTypeId(t))},set:{value:yg(Mr.getVisitFnByTypeId(t))},indexOf:{value:mg(Ro.getVisitFnByTypeId(t))},getByteLength:{value:si(sn.getVisitFnByTypeId(t))}})}return"Vector"})(it.prototype);class Oo extends it{constructor(e){super(e.data);const t=this.get,n=this.set,a=this.slice,i=new Array(this.length);Object.defineProperty(this,"get",{value(s){const o=i[s];if(o!==void 0)return o;const u=t.call(this,s);return i[s]=u,u}}),Object.defineProperty(this,"set",{value(s,o){n.call(this,s,o),i[s]=o}}),Object.defineProperty(this,"slice",{value:(s,o)=>new Oo(a.call(this,s,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new it(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Ec{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,n,a){return e.prep(8,24),e.writeInt64(a),e.pad(4),e.writeInt32(n),e.writeInt64(t),e.offset()}}const Nu=2,Xr=4,bn=4,ht=4,Pn=new Int32Array(2),gd=new Float32Array(Pn.buffer),yd=new Float64Array(Pn.buffer),Fs=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let xn=class Tc{constructor(e,t){this.low=e|0,this.high=t|0}static create(e,t){return e==0&&t==0?Tc.ZERO:new Tc(e,t)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(e){return this.low==e.low&&this.high==e.high}};xn.ZERO=new xn(0,0);var Cc;(function(r){r[r.UTF8_BYTES=1]="UTF8_BYTES",r[r.UTF16_STRING=2]="UTF16_STRING"})(Cc||(Cc={}));let di=class Cg{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new Cg(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new xn(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new xn(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return Pn[0]=this.readInt32(e),gd[0]}readFloat64(e){return Pn[Fs?0:1]=this.readInt32(e),Pn[Fs?1:0]=this.readInt32(e+4),yd[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)}writeUint64(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)}writeFloat32(e,t){gd[0]=t,this.writeInt32(e,Pn[0])}writeFloat64(e,t){yd[0]=t,this.writeInt32(e,Pn[Fs?0:1]),this.writeInt32(e+4,Pn[Fs?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Xr+bn)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<bn;t++)e+=String.fromCharCode(this.readInt8(this.position_+Xr+t));return e}__offset(e,t){const n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const n=this.readInt32(e);let a="",i=0;if(e+=Xr,t===Cc.UTF8_BYTES)return this.bytes_.subarray(e,e+n);for(;i<n;){let s;const o=this.readUint8(e+i++);if(o<192)s=o;else{const u=this.readUint8(e+i++);if(o<224)s=(o&31)<<6|u&63;else{const l=this.readUint8(e+i++);if(o<240)s=(o&15)<<12|(u&63)<<6|l&63;else{const c=this.readUint8(e+i++);s=(o&7)<<18|(u&63)<<12|(l&63)<<6|c&63}}}s<65536?a+=String.fromCharCode(s):(s-=65536,a+=String.fromCharCode((s>>10)+55296,(s&1023)+56320))}return a}__union_with_string(e,t){return typeof e=="string"?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Xr}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=bn)throw new Error("FlatBuffers: file identifier must be length "+bn);for(let t=0;t<bn;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+Xr+t))return!1;return!0}createLong(e,t){return xn.create(e,t)}createScalarList(e,t){const n=[];for(let a=0;a<t;++a)e(a)!==null&&n.push(e(a));return n}createObjList(e,t){const n=[];for(let a=0;a<t;++a){const i=e(a);i!==null&&n.push(i.unpack())}return n}},Bg=class Ig{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let t;e?t=e:t=1024,this.bb=di.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const n=~(this.bb.capacity()-this.space+t)+1&e-1;for(;this.space<n+e+t;){const a=this.bb.capacity();this.bb=Ig.growByteBuffer(this.bb),this.space+=this.bb.capacity()-a}this.pad(n)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,n){(this.force_defaults||t!=n)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,n){(this.force_defaults||t!=n)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,n){(this.force_defaults||t!=n)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,n){(this.force_defaults||!t.equals(n))&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,n){(this.force_defaults||t!=n)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,n){t!=n&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(t&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=t<<1,a=di.allocate(n);return a.setPosition(n-t),a.bytes().set(e.bytes(),n-t),a}addOffset(e){this.prep(Xr,0),this.writeInt32(this.offset()-e+Xr)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&this.vtable[t]==0;t--);const n=t+1;for(;t>=0;t--)this.addInt16(this.vtable[t]!=0?e-this.vtable[t]:0);const a=2;this.addInt16(e-this.object_start);const i=(n+a)*Nu;this.addInt16(i);let s=0;const o=this.space;e:for(t=0;t<this.vtables.length;t++){const u=this.bb.capacity()-this.vtables[t];if(i==this.bb.readInt16(u)){for(let l=Nu;l<i;l+=Nu)if(this.bb.readInt16(o+l)!=this.bb.readInt16(u+l))continue e;s=this.vtables[t];break}}return s?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,s-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,n){const a=n?ht:0;if(t){const i=t;if(this.prep(this.minalign,Xr+bn+a),i.length!=bn)throw new Error("FlatBuffers: file identifier must be length "+bn);for(let s=bn-1;s>=0;s--)this.writeInt8(i.charCodeAt(s))}this.prep(this.minalign,Xr+a),this.addOffset(e),a&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const n=this.bb.capacity()-e,a=n-this.bb.readInt32(n);if(!(this.bb.readInt16(a+t)!=0))throw new Error("FlatBuffers: field "+t+" must be set")}startVector(e,t,n){this.notNested(),this.vector_num_elems=t,this.prep(Xr,e*t),this.prep(n,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(!e)return 0;let t;if(e instanceof Uint8Array)t=e;else{t=[];let n=0;for(;n<e.length;){let a;const i=e.charCodeAt(n++);if(i<55296||i>=56320)a=i;else{const s=e.charCodeAt(n++);a=(i<<10)+s+-56613888}a<128?t.push(a):(a<2048?t.push(a>>6&31|192):(a<65536?t.push(a>>12&15|224):t.push(a>>18&7|240,a>>12&63|128),t.push(a>>6&63|128)),t.push(a&63|128))}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(let n=0,a=this.space,i=this.bb.bytes();n<t.length;n++)i[a++]=t[n];return this.endVector()}createLong(e,t){return xn.create(e,t)}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let n=0;n<e.length;++n){const a=e[n];if(a!==null)t.push(this.createObjectOffset(a));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e),this.endVector()}};class Lt{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new Lt).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+ht),(t||new Lt).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,n){return Lt.startKeyValue(e),Lt.addKey(e,t),Lt.addValue(e,n),Lt.endKeyValue(e)}}var hi;(function(r){r[r.V1=0]="V1",r[r.V2=1]="V2",r[r.V3=2]="V3",r[r.V4=3]="V4",r[r.V5=4]="V5"})(hi||(hi={}));var vi;(function(r){r[r.Little=0]="Little",r[r.Big=1]="Big"})(vi||(vi={}));var Mo;(function(r){r[r.DenseArray=0]="DenseArray"})(Mo||(Mo={}));class wr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new wr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+ht),(t||new wr).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,n){return wr.startInt(e),wr.addBitWidth(e,t),wr.addIsSigned(e,n),wr.endInt(e)}}class wn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new wn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+ht),(t||new wn).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new wr).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):Mo.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,Mo.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class ma{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new ma).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+ht),(t||new ma).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return ma.startBinary(e),ma.endBinary(e)}}class ba{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new ba).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+ht),(t||new ba).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return ba.startBool(e),ba.endBool(e)}}var ko;(function(r){r[r.DAY=0]="DAY",r[r.MILLISECOND=1]="MILLISECOND"})(ko||(ko={}));let Js=class Ka{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new Ka).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+ht),(t||new Ka).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ko.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,ko.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return Ka.startDate(e),Ka.addUnit(e,t),Ka.endDate(e)}};class lr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new lr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+ht),(t||new lr).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,n,a){return lr.startDecimal(e),lr.addPrecision(e,t),lr.addScale(e,n),lr.addBitWidth(e,a),lr.endDecimal(e)}}var pi;(function(r){r[r.SECOND=0]="SECOND",r[r.MILLISECOND=1]="MILLISECOND",r[r.MICROSECOND=2]="MICROSECOND",r[r.NANOSECOND=3]="NANOSECOND"})(pi||(pi={}));class Zr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new Zr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+ht),(t||new Zr).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return Zr.startFixedSizeBinary(e),Zr.addByteWidth(e,t),Zr.endFixedSizeBinary(e)}}class Qr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new Qr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+ht),(t||new Qr).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return Qr.startFixedSizeList(e),Qr.addListSize(e,t),Qr.endFixedSizeList(e)}}var Po;(function(r){r[r.HALF=0]="HALF",r[r.SINGLE=1]="SINGLE",r[r.DOUBLE=2]="DOUBLE"})(Po||(Po={}));class Jr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new Jr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+ht),(t||new Jr).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Po.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,Po.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return Jr.startFloatingPoint(e),Jr.addPrecision(e,t),Jr.endFloatingPoint(e)}}var Lo;(function(r){r[r.YEAR_MONTH=0]="YEAR_MONTH",r[r.DAY_TIME=1]="DAY_TIME",r[r.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Lo||(Lo={}));class en{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new en).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+ht),(t||new en).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Lo.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,Lo.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return en.startInterval(e),en.addUnit(e,t),en.endInterval(e)}}class wa{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new wa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+ht),(t||new wa).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return wa.startList(e),wa.endList(e)}}let eo=class ja{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new ja).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+ht),(t||new ja).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return ja.startMap(e),ja.addKeysSorted(e,t),ja.endMap(e)}};class Sa{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new Sa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+ht),(t||new Sa).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Sa.startNull(e),Sa.endNull(e)}}class xa{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new xa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+ht),(t||new xa).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return xa.startStruct_(e),xa.endStruct_(e)}}class Dr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new Dr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+ht),(t||new Dr).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):pi.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,pi.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,n){return Dr.startTime(e),Dr.addUnit(e,t),Dr.addBitWidth(e,n),Dr.endTime(e)}}class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new Ar).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+ht),(t||new Ar).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):pi.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,pi.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,n){return Ar.startTimestamp(e),Ar.addUnit(e,t),Ar.addTimezone(e,n),Ar.endTimestamp(e)}}var Fo;(function(r){r[r.Sparse=0]="Sparse",r[r.Dense=1]="Dense"})(Fo||(Fo={}));class cr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new cr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+ht),(t||new cr).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Fo.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,Fo.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,n){return cr.startUnion(e),cr.addMode(e,t),cr.addTypeIds(e,n),cr.endUnion(e)}}class Ea{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new Ea).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+ht),(t||new Ea).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Ea.startUtf8(e),Ea.endUtf8(e)}}var wt;(function(r){r[r.NONE=0]="NONE",r[r.Null=1]="Null",r[r.Int=2]="Int",r[r.FloatingPoint=3]="FloatingPoint",r[r.Binary=4]="Binary",r[r.Utf8=5]="Utf8",r[r.Bool=6]="Bool",r[r.Decimal=7]="Decimal",r[r.Date=8]="Date",r[r.Time=9]="Time",r[r.Timestamp=10]="Timestamp",r[r.Interval=11]="Interval",r[r.List=12]="List",r[r.Struct_=13]="Struct_",r[r.Union=14]="Union",r[r.FixedSizeBinary=15]="FixedSizeBinary",r[r.FixedSizeList=16]="FixedSizeList",r[r.Map=17]="Map",r[r.Duration=18]="Duration",r[r.LargeBinary=19]="LargeBinary",r[r.LargeUtf8=20]="LargeUtf8",r[r.LargeList=21]="LargeList"})(wt||(wt={}));let Br=class to{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new to).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+ht),(t||new to).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):wt.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new wn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){const n=this.bb.__offset(this.bb_pos,14);return n?(t||new to).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,16);return n?(t||new Lt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,wt.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}},Yr=class vn{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new vn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+ht),(t||new vn).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):vi.Little}fields(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Br).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new Lt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+e*8):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,vi.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,n,a,i){return vn.startSchema(e),vn.addEndianness(e,t),vn.addFields(e,n),vn.addCustomMetadata(e,a),vn.addFeatures(e,i),vn.endSchema(e)}};class br{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new br).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+ht),(t||new br).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):hi.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Yr).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new Ec).__init(this.bb.__vector(this.bb_pos+n)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ec).__init(this.bb.__vector(this.bb_pos+n)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Lt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,hi.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}class st{constructor(e=[],t,n){this.fields=e||[],this.metadata=t||new Map,n||(n=Bc(e)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(e){const t=new Set(e),n=this.fields.filter(a=>t.has(a.name));return new st(n,this.metadata)}selectAt(e){const t=e.map(n=>this.fields[n]).filter(Boolean);return new st(t,this.metadata)}assign(...e){const t=e[0]instanceof st?e[0]:Array.isArray(e[0])?new st(e[0]):new st(e),n=[...this.fields],a=Ns(Ns(new Map,this.metadata),t.metadata),i=t.fields.filter(o=>{const u=n.findIndex(l=>l.name===o.name);return~u?(n[u]=o.clone({metadata:Ns(Ns(new Map,n[u].metadata),o.metadata)}))&&!1:!0}),s=Bc(i,new Map);return new st([...n,...i],a,new Map([...this.dictionaries,...s]))}}st.prototype.fields=null;st.prototype.metadata=null;st.prototype.dictionaries=null;class mt{constructor(e,t,n=!1,a){this.name=e,this.type=t,this.nullable=n,this.metadata=a||new Map}static new(...e){let[t,n,a,i]=e;return e[0]&&typeof e[0]=="object"&&({name:t}=e[0],n===void 0&&(n=e[0].type),a===void 0&&(a=e[0].nullable),i===void 0&&(i=e[0].metadata)),new mt(`${t}`,n,a,i)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[t,n,a,i]=e;return!e[0]||typeof e[0]!="object"?[t=this.name,n=this.type,a=this.nullable,i=this.metadata]=e:{name:t=this.name,type:n=this.type,nullable:a=this.nullable,metadata:i=this.metadata}=e[0],mt.new(t,n,a,i)}}mt.prototype.type=null;mt.prototype.name=null;mt.prototype.nullable=null;mt.prototype.metadata=null;function Ns(r,e){return new Map([...r||new Map,...e||new Map])}function Bc(r,e=new Map){for(let t=-1,n=r.length;++t<n;){const i=r[t].type;if(Be.isDictionary(i)){if(!e.has(i.id))e.set(i.id,i.dictionary);else if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}i.children&&i.children.length>0&&Bc(i.children,e)}return e}var md=xn,$b=Bg,Wb=di;class ns{constructor(e,t=Sr.V4,n,a){this.schema=e,this.version=t,n&&(this._recordBatches=n),a&&(this._dictionaryBatches=a)}static decode(e){e=new Wb(Xe(e));const t=br.getRootAsFooter(e),n=st.decode(t.schema());return new Gb(n,t)}static encode(e){const t=new $b,n=st.encode(t,e.schema);br.startRecordBatchesVector(t,e.numRecordBatches);for(const s of[...e.recordBatches()].slice().reverse())Yn.encode(t,s);const a=t.endVector();br.startDictionariesVector(t,e.numDictionaries);for(const s of[...e.dictionaryBatches()].slice().reverse())Yn.encode(t,s);const i=t.endVector();return br.startFooter(t),br.addSchema(t,n),br.addVersion(t,Sr.V4),br.addRecordBatches(t,a),br.addDictionaries(t,i),br.finishFooterBuffer(t,br.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,t=-1,n=this.numRecordBatches;++t<n;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,n=this.numDictionaries;++t<n;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class Gb extends ns{constructor(e,t){super(e,t.version()),this._footer=t}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return Yn.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return Yn.decode(t)}return null}}class Yn{constructor(e,t,n){this.metaDataLength=e,this.offset=typeof n=="number"?n:n.low,this.bodyLength=typeof t=="number"?t:t.low}static decode(e){return new Yn(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:n}=t,a=new md(t.offset,0),i=new md(t.bodyLength,0);return Ec.createBlock(e,a,n,i)}}const St=Object.freeze({done:!0,value:void 0});class bd{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class vf{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Hb extends vf{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return Te(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(St);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return _r.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return _r.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return Te(this,void 0,void 0,function*(){return yield this.abort(e),St})}return(e){return Te(this,void 0,void 0,function*(){return yield this.close(),St})}read(e){return Te(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return Te(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((t,n)=>{this.resolvers.push({resolve:t,reject:n})}):Promise.resolve(St)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ro extends Hb{write(e){if((e=Xe(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?mc(this.toUint8Array(!0)):this.toUint8Array(!1).then(mc)}toUint8Array(e=!1){return e?an(this._values)[0]:Te(this,void 0,void 0,function*(){var t,n;const a=[];let i=0;try{for(var s=Ca(this),o;o=yield s.next(),!o.done;){const u=o.value;a.push(u),i+=u.byteLength}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=s.return)&&(yield n.call(s))}finally{if(t)throw t.error}}return an(a,i)[0]})}}class No{constructor(e){e&&(this.source=new Yb(_r.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class gi{constructor(e){e instanceof gi?this.source=e.source:e instanceof ro?this.source=new fa(_r.fromAsyncIterable(e)):lp(e)?this.source=new fa(_r.fromNodeStream(e)):Jc(e)?this.source=new fa(_r.fromDOMStream(e)):up(e)?this.source=new fa(_r.fromDOMStream(e.body)):ys(e)?this.source=new fa(_r.fromIterable(e)):$n(e)?this.source=new fa(_r.fromAsyncIterable(e)):Si(e)&&(this.source=new fa(_r.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Yb{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,t="read"){return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||St)}return(e){return Object.create(this.source.return&&this.source.return(e)||St)}}class fa{constructor(e){this.source=e,this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}cancel(e){return Te(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return Te(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return Te(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e,t="read"){return Te(this,void 0,void 0,function*(){return yield this.source.next({cmd:t,size:e})})}throw(e){return Te(this,void 0,void 0,function*(){const t=this.source.throw&&(yield this.source.throw(e))||St;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}return(e){return Te(this,void 0,void 0,function*(){const t=this.source.return&&(yield this.source.return(e))||St;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}}class wd extends No{constructor(e,t){super(),this.position=0,this.buffer=Xe(e),this.size=typeof t>"u"?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:n}=this.readAt(e,4);return new DataView(t,n).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:n,position:a}=this;return t&&a<n?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(n,a+Math.min(n-a,e)),t.subarray(a,this.position)):null}readAt(e,t){const n=this.buffer,a=Math.min(this.size,e+t);return n?n.subarray(e,a):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class zo extends gi{constructor(e,t){super(),this.position=0,this._handle=e,typeof t=="number"?this.size=t:this._pending=Te(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return Te(this,void 0,void 0,function*(){const{buffer:t,byteOffset:n}=yield this.readAt(e,4);return new DataView(t,n).getInt32(0,!0)})}seek(e){return Te(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return Te(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:t,size:n,position:a}=this;if(t&&a<n){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let i=a,s=0,o=0;const u=Math.min(n,i+Math.min(n-i,e)),l=new Uint8Array(Math.max(0,(this.position=u)-i));for(;(i+=o)<u&&(s+=o)<l.byteLength;)({bytesRead:o}=yield t.read(l,s,l.byteLength-s,i));return l}return null})}readAt(e,t){return Te(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:a}=this;if(n&&e+t<a){const i=Math.min(a,e+t),s=new Uint8Array(i-e);return(yield n.read(s,0,t,e)).buffer}return new Uint8Array(t)})}close(){return Te(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return Te(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return Te(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const Kb=65536;function Qa(r){return r<0&&(r=4294967295+r+1),`0x${r.toString(16)}`}const yi=8,pf=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class _g{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let a=t[3]*n[3];this.buffer[0]=a&65535;let i=a>>>16;return a=t[2]*n[3],i+=a,a=t[3]*n[2]>>>0,i+=a,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<a?Kb:0,this.buffer[1]+=i>>>16,this.buffer[1]+=t[1]*n[3]+t[2]*n[2]+t[3]*n[1],this.buffer[1]+=t[0]*n[3]+t[1]*n[2]+t[2]*n[1]+t[3]*n[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${Qa(this.buffer[1])} ${Qa(this.buffer[0])}`}}class ut extends _g{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,t=new Uint32Array(2)){return ut.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return ut.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const n=e.length,a=new ut(t);for(let i=0;i<n;){const s=yi<n-i?yi:n-i,o=new ut(new Uint32Array([Number.parseInt(e.slice(i,i+s),10),0])),u=new ut(new Uint32Array([pf[s],0]));a.times(u),a.plus(o),i+=s}return a}static convertArray(e){const t=new Uint32Array(e.length*2);for(let n=-1,a=e.length;++n<a;)ut.from(e[n],new Uint32Array(t.buffer,t.byteOffset+2*n*4,2));return t}static multiply(e,t){return new ut(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new ut(new Uint32Array(e.buffer)).plus(t)}}class ur extends _g{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=this.buffer[1]<<0,n=e.buffer[1]<<0;return t<n||t===n&&this.buffer[0]<e.buffer[0]}static from(e,t=new Uint32Array(2)){return ur.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return ur.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const n=e.startsWith("-"),a=e.length,i=new ur(t);for(let s=n?1:0;s<a;){const o=yi<a-s?yi:a-s,u=new ur(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),l=new ur(new Uint32Array([pf[o],0]));i.times(l),i.plus(u),s+=o}return n?i.negate():i}static convertArray(e){const t=new Uint32Array(e.length*2);for(let n=-1,a=e.length;++n<a;)ur.from(e[n],new Uint32Array(t.buffer,t.byteOffset+2*n*4,2));return t}static multiply(e,t){return new ur(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new ur(new Uint32Array(e.buffer)).plus(t)}}class Kr{constructor(e){this.buffer=e}high(){return new ur(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new ur(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const t=new ut(new Uint32Array([this.buffer[3],0])),n=new ut(new Uint32Array([this.buffer[2],0])),a=new ut(new Uint32Array([this.buffer[1],0])),i=new ut(new Uint32Array([this.buffer[0],0])),s=new ut(new Uint32Array([e.buffer[3],0])),o=new ut(new Uint32Array([e.buffer[2],0])),u=new ut(new Uint32Array([e.buffer[1],0])),l=new ut(new Uint32Array([e.buffer[0],0]));let c=ut.multiply(i,l);this.buffer[0]=c.low();const f=new ut(new Uint32Array([c.high(),0]));return c=ut.multiply(a,l),f.plus(c),c=ut.multiply(i,u),f.plus(c),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(c)?1:0,this.buffer[2]=f.high(),new ut(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ut.multiply(n,l)).plus(ut.multiply(a,u)).plus(ut.multiply(i,o)),this.buffer[3]+=ut.multiply(t,l).plus(ut.multiply(n,u)).plus(ut.multiply(a,o)).plus(ut.multiply(i,s)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${Qa(this.buffer[3])} ${Qa(this.buffer[2])} ${Qa(this.buffer[1])} ${Qa(this.buffer[0])}`}static multiply(e,t){return new Kr(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new Kr(new Uint32Array(e.buffer)).plus(t)}static from(e,t=new Uint32Array(4)){return Kr.fromString(typeof e=="string"?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(4)){return Kr.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(4)){const n=e.startsWith("-"),a=e.length,i=new Kr(t);for(let s=n?1:0;s<a;){const o=yi<a-s?yi:a-s,u=new Kr(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0,0,0])),l=new Kr(new Uint32Array([pf[o],0,0,0]));i.times(l),i.plus(u),s+=o}return n?i.negate():i}static convertArray(e){const t=new Uint32Array(e.length*4);for(let n=-1,a=e.length;++n<a;)Kr.from(e[n],new Uint32Array(t.buffer,t.byteOffset+16*n,4));return t}}class Dg extends We{constructor(e,t,n,a){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=n,this.dictionaries=a}visit(e){return super.visit(e instanceof mt?e.type:e)}visitNull(e,{length:t}=this.nextFieldNode()){return $e({type:e,length:t})}visitBool(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitInt(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFloat(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitUtf8(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDate(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTimestamp(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTime(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDecimal(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitList(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===Er.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFixedSizeList(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),child:this.visit(e.children[0])})}visitMap(e,{length:t,nullCount:n}=this.nextFieldNode()){return $e({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t,n=this.nextBufferRange()){return t>0&&this.readData(e,n)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e,{length:t,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class jb extends Dg{constructor(e,t,n,a){super(new Uint8Array(0),t,n,a),this.sources=e}readNullBitmap(e,t,{offset:n}=this.nextBufferRange()){return t<=0?new Uint8Array(0):Ao(this.sources[n])}readOffsets(e,{offset:t}=this.nextBufferRange()){return ft(Uint8Array,ft(Int32Array,this.sources[t]))}readTypeIds(e,{offset:t}=this.nextBufferRange()){return ft(Uint8Array,ft(e.ArrayType,this.sources[t]))}readData(e,{offset:t}=this.nextBufferRange()){const{sources:n}=this;return Be.isTimestamp(e)||(Be.isInt(e)||Be.isTime(e))&&e.bitWidth===64||Be.isDate(e)&&e.unit===Tn.MILLISECOND?ft(Uint8Array,ur.convertArray(n[t])):Be.isDecimal(e)?ft(Uint8Array,Kr.convertArray(n[t])):Be.isBinary(e)||Be.isFixedSizeBinary(e)?Xb(n[t]):Be.isBool(e)?Ao(n[t]):Be.isUtf8(e)?Qc(n[t].join("")):ft(Uint8Array,ft(e.ArrayType,n[t].map(a=>+a)))}}function Xb(r){const e=r.join(""),t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n>>1]=Number.parseInt(e.slice(n,n+2),16);return t}class Ae extends We{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((n,a)=>this.compareFields(n,t[a]))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function mr(r,e){return e instanceof r.constructor}function ms(r,e){return r===e||mr(r,e)}function _n(r,e){return r===e||mr(r,e)&&r.bitWidth===e.bitWidth&&r.isSigned===e.isSigned}function lu(r,e){return r===e||mr(r,e)&&r.precision===e.precision}function Zb(r,e){return r===e||mr(r,e)&&r.byteWidth===e.byteWidth}function gf(r,e){return r===e||mr(r,e)&&r.unit===e.unit}function bs(r,e){return r===e||mr(r,e)&&r.unit===e.unit&&r.timezone===e.timezone}function ws(r,e){return r===e||mr(r,e)&&r.unit===e.unit&&r.bitWidth===e.bitWidth}function Qb(r,e){return r===e||mr(r,e)&&r.children.length===e.children.length&&Kn.compareManyFields(r.children,e.children)}function Jb(r,e){return r===e||mr(r,e)&&r.children.length===e.children.length&&Kn.compareManyFields(r.children,e.children)}function yf(r,e){return r===e||mr(r,e)&&r.mode===e.mode&&r.typeIds.every((t,n)=>t===e.typeIds[n])&&Kn.compareManyFields(r.children,e.children)}function ew(r,e){return r===e||mr(r,e)&&r.id===e.id&&r.isOrdered===e.isOrdered&&Kn.visit(r.indices,e.indices)&&Kn.visit(r.dictionary,e.dictionary)}function mf(r,e){return r===e||mr(r,e)&&r.unit===e.unit}function tw(r,e){return r===e||mr(r,e)&&r.listSize===e.listSize&&r.children.length===e.children.length&&Kn.compareManyFields(r.children,e.children)}function rw(r,e){return r===e||mr(r,e)&&r.keysSorted===e.keysSorted&&r.children.length===e.children.length&&Kn.compareManyFields(r.children,e.children)}Ae.prototype.visitNull=ms;Ae.prototype.visitBool=ms;Ae.prototype.visitInt=_n;Ae.prototype.visitInt8=_n;Ae.prototype.visitInt16=_n;Ae.prototype.visitInt32=_n;Ae.prototype.visitInt64=_n;Ae.prototype.visitUint8=_n;Ae.prototype.visitUint16=_n;Ae.prototype.visitUint32=_n;Ae.prototype.visitUint64=_n;Ae.prototype.visitFloat=lu;Ae.prototype.visitFloat16=lu;Ae.prototype.visitFloat32=lu;Ae.prototype.visitFloat64=lu;Ae.prototype.visitUtf8=ms;Ae.prototype.visitBinary=ms;Ae.prototype.visitFixedSizeBinary=Zb;Ae.prototype.visitDate=gf;Ae.prototype.visitDateDay=gf;Ae.prototype.visitDateMillisecond=gf;Ae.prototype.visitTimestamp=bs;Ae.prototype.visitTimestampSecond=bs;Ae.prototype.visitTimestampMillisecond=bs;Ae.prototype.visitTimestampMicrosecond=bs;Ae.prototype.visitTimestampNanosecond=bs;Ae.prototype.visitTime=ws;Ae.prototype.visitTimeSecond=ws;Ae.prototype.visitTimeMillisecond=ws;Ae.prototype.visitTimeMicrosecond=ws;Ae.prototype.visitTimeNanosecond=ws;Ae.prototype.visitDecimal=ms;Ae.prototype.visitList=Qb;Ae.prototype.visitStruct=Jb;Ae.prototype.visitUnion=yf;Ae.prototype.visitDenseUnion=yf;Ae.prototype.visitSparseUnion=yf;Ae.prototype.visitDictionary=ew;Ae.prototype.visitInterval=mf;Ae.prototype.visitIntervalDayTime=mf;Ae.prototype.visitIntervalYearMonth=mf;Ae.prototype.visitFixedSizeList=tw;Ae.prototype.visitMap=rw;const Kn=new Ae;function Ic(r,e){return Kn.compareSchemas(r,e)}function zu(r,e){return nw(r,e.map(t=>t.data.concat()))}function nw(r,e){const t=[...r.fields],n=[],a={numBatches:e.reduce((f,d)=>Math.max(f,d.length),0)};let i=0,s=0,o=-1;const u=e.length;let l,c=[];for(;a.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,o=-1;++o<u;)c[o]=l=e[o].shift(),s=Math.min(s,l?l.length:s);Number.isFinite(s)&&(c=aw(t,s,c,e,a),s>0&&(n[i++]=$e({type:new rr(t),length:s,nullCount:0,children:c.slice()})))}return[r=r.assign(t),n.map(f=>new fr(r,f))]}function aw(r,e,t,n,a){var i;const s=(e+63&-64)>>3;for(let o=-1,u=n.length;++o<u;){const l=t[o],c=l==null?void 0:l.length;if(c>=e)c===e?t[o]=l:(t[o]=l.slice(0,e),a.numBatches=Math.max(a.numBatches,n[o].unshift(l.slice(e,c-e))));else{const f=r[o];r[o]=f.clone({nullable:!0}),t[o]=(i=l==null?void 0:l._changeLengthAndBackfillNullBitmap(e))!==null&&i!==void 0?i:$e({type:f.type,length:e,nullCount:e,nullBitmap:new Uint8Array(s)})}}return t}var Ag;class tr{constructor(...e){var t,n;if(e.length===0)return this.batches=[],this.schema=new st([]),this._offsets=[0],this;let a,i;e[0]instanceof st&&(a=e.shift()),e[e.length-1]instanceof Uint32Array&&(i=e.pop());const s=u=>{if(u){if(u instanceof fr)return[u];if(u instanceof tr)return u.batches;if(u instanceof pt){if(u.type instanceof rr)return[new fr(new st(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>s(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>s(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new it([u[h]])),f=new st(l.map((h,v)=>new mt(String(h),c[v].type))),[,d]=zu(f,c);return d.length===0?[new fr(u)]:d}}}return[]},o=e.flatMap(u=>s(u));if(a=(n=a??((t=o[0])===null||t===void 0?void 0:t.schema))!==null&&n!==void 0?n:new st([]),!(a instanceof st))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of o){if(!(u instanceof fr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Ic(a,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=a,this.batches=o,this._offsets=i??pg(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,t)=>e+t.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=vg(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?hf.visit(new it(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const t=this.schema,n=this.data.concat(e.flatMap(({data:a})=>a));return new tr(t,n.map(a=>new fr(t,a)))}slice(e,t){const n=this.schema;[e,t]=dg({length:this.numRows},e,t);const a=gg(this.data,this._offsets,e,t);return new tr(n,a.map(i=>new fr(n,i)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(t=>t.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map(n=>n.children[e]);if(t.length===0){const{type:n}=this.schema.fields[e],a=$e({type:n,length:0,nullCount:0});t.push(a._changeLengthAndBackfillNullBitmap(this.numRows))}return new it(t)}return null}setChild(e,t){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(a=>a.name===e),t)}setChildAt(e,t){let n=this.schema,a=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new it([$e({type:new Gn,length:this.numRows})]));const i=n.fields.slice(),s=i[e].clone({type:t.type}),o=this.schema.fields.map((u,l)=>this.getChildAt(l));[i[e],o[e]]=[s,t],[n,a]=zu(n,o)}return new tr(n,a)}select(e){const t=this.schema.fields.reduce((n,a,i)=>n.set(a.name,i),new Map);return this.selectAt(e.map(n=>t.get(n)).filter(n=>n>-1))}selectAt(e){const t=this.schema.selectAt(e),n=this.batches.map(a=>a.selectAt(e));return new tr(t,n)}assign(e){const t=this.schema.fields,[n,a]=e.schema.fields.reduce((o,u,l)=>{const[c,f]=o,d=t.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),o},[[],[]]),i=this.schema.assign(e.schema),s=[...t.map((o,u)=>[u,a[u]]).map(([o,u])=>u===void 0?this.getChildAt(o):e.getChildAt(u)),...n.map(o=>e.getChildAt(o))].filter(Boolean);return new tr(...zu(i,s))}}Ag=Symbol.toStringTag;tr[Ag]=(r=>(r.schema=null,r.batches=[],r._offsets=new Uint32Array([0]),r._nullCount=-1,r[Symbol.isConcatSpreadable]=!0,r.isValid=si(df),r.get=si(yr.getVisitFn(q.Struct)),r.set=yg(Mr.getVisitFn(q.Struct)),r.indexOf=mg(Ro.getVisitFn(q.Struct)),r.getByteLength=si(sn.getVisitFn(q.Struct)),"Table"))(tr.prototype);var Rg;let fr=class Ui{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof st))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=$e({nullCount:0,type:new rr(this.schema.fields),children:this.schema.fields.map(t=>$e({type:t.type,nullCount:0}))})]=e,!(this.data instanceof pt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Sd(this.schema,this.data.children);break}case 1:{const[t]=e,{fields:n,children:a,length:i}=Object.keys(t).reduce((u,l,c)=>(u.children[c]=t[l],u.length=Math.max(u.length,t[l].length),u.fields[c]=mt.new({name:l,type:t[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),s=new st(n),o=$e({type:new rr(n),length:i,children:a,nullCount:0});[this.schema,this.data]=Sd(s,o.children,i);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Og(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return yr.visit(this.data,e)}set(e,t){return Mr.visit(this.data,e,t)}indexOf(e,t){return Ro.visit(this.data,e,t)}getByteLength(e){return sn.visit(this.data,e)}[Symbol.iterator](){return hf.visit(new it([this.data]))}toArray(){return[...this]}concat(...e){return new tr(this.schema,[this,...e])}slice(e,t){const[n]=new it([this.data]).slice(e,t).data;return new Ui(this.schema,n)}getChild(e){var t;return this.getChildAt((t=this.schema.fields)===null||t===void 0?void 0:t.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new it([this.data.children[e]]):null}setChild(e,t){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(a=>a.name===e),t)}setChildAt(e,t){let n=this.schema,a=this.data;if(e>-1&&e<this.numCols){t||(t=new it([$e({type:new Gn,length:this.numRows})]));const i=n.fields.slice(),s=a.children.slice(),o=i[e].clone({type:t.type});[i[e],s[e]]=[o,t.data[0]],n=new st(i,new Map(this.schema.metadata)),a=$e({type:new rr(i),children:s})}return new Ui(n,a)}select(e){const t=this.schema.select(e),n=new rr(t.fields),a=[];for(const i of e){const s=this.schema.fields.findIndex(o=>o.name===i);~s&&(a[s]=this.data.children[s])}return new Ui(t,$e({type:n,length:this.numRows,children:a}))}selectAt(e){const t=this.schema.selectAt(e),n=e.map(i=>this.data.children[i]).filter(Boolean),a=$e({type:new rr(t.fields),length:this.numRows,children:n});return new Ui(t,a)}};Rg=Symbol.toStringTag;fr[Rg]=(r=>(r._nullCount=-1,r[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(fr.prototype);function Sd(r,e,t=e.reduce((n,a)=>Math.max(n,a.length),0)){var n;const a=[...r.fields],i=[...e],s=(t+63&-64)>>3;for(const[o,u]of r.fields.entries()){const l=e[o];(!l||l.length!==t)&&(a[o]=u.clone({nullable:!0}),i[o]=(n=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&n!==void 0?n:$e({type:u.type,length:t,nullCount:t,nullBitmap:new Uint8Array(s)}))}return[r.assign(a),$e({type:new rr(a),length:t,children:i})]}function Og(r,e,t=new Map){for(let n=-1,a=r.length;++n<a;){const s=r[n].type,o=e[n];if(Be.isDictionary(s)){if(!t.has(s.id))o.dictionary&&t.set(s.id,o.dictionary);else if(t.get(s.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Og(s.children,o.children,t)}return t}class bf extends fr{constructor(e){const t=e.fields.map(a=>$e({type:a.type})),n=$e({type:new rr(e.fields),nullCount:0,children:t});super(e,n)}}var Vo;(function(r){r[r.BUFFER=0]="BUFFER"})(Vo||(Vo={}));var Uo;(function(r){r[r.LZ4_FRAME=0]="LZ4_FRAME",r[r.ZSTD=1]="ZSTD"})(Uo||(Uo={}));class Ln{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new Ln).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+ht),(t||new Ln).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):Uo.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Vo.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,Uo.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,Vo.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,n){return Ln.startBodyCompression(e),Ln.addCodec(e,t),Ln.addMethod(e,n),Ln.endBodyCompression(e)}}class Mg{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,n){return e.prep(8,16),e.writeInt64(n),e.writeInt64(t),e.offset()}}let kg=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,n){return e.prep(8,16),e.writeInt64(n),e.writeInt64(t),e.offset()}},yn=class _c{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new _c).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+ht),(t||new _c).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new kg).__init(this.bb.__vector(this.bb_pos+n)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new Mg).__init(this.bb.__vector(this.bb_pos+n)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new Ln).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}},Xa=class Dc{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new Dc).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+ht),(t||new Dc).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new yn).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}};var qo;(function(r){r[r.NONE=0]="NONE",r[r.Schema=1]="Schema",r[r.DictionaryBatch=2]="DictionaryBatch",r[r.RecordBatch=3]="RecordBatch",r[r.Tensor=4]="Tensor",r[r.SparseTensor=5]="SparseTensor"})(qo||(qo={}));let On=class Gr{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new Gr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+ht),(t||new Gr).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):hi.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):qo.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Lt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,hi.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,qo.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,e.createLong(0,0))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,n,a,i,s){return Gr.startMessage(e),Gr.addVersion(e,t),Gr.addHeaderType(e,n),Gr.addHeader(e,a),Gr.addBodyLength(e,i),Gr.addCustomMetadata(e,s),Gr.endMessage(e)}};var iw=xn;class sw extends We{visit(e,t){return e==null||t==null?void 0:super.visit(e,t)}visitNull(e,t){return Sa.startNull(t),Sa.endNull(t)}visitInt(e,t){return wr.startInt(t),wr.addBitWidth(t,e.bitWidth),wr.addIsSigned(t,e.isSigned),wr.endInt(t)}visitFloat(e,t){return Jr.startFloatingPoint(t),Jr.addPrecision(t,e.precision),Jr.endFloatingPoint(t)}visitBinary(e,t){return ma.startBinary(t),ma.endBinary(t)}visitBool(e,t){return ba.startBool(t),ba.endBool(t)}visitUtf8(e,t){return Ea.startUtf8(t),Ea.endUtf8(t)}visitDecimal(e,t){return lr.startDecimal(t),lr.addScale(t,e.scale),lr.addPrecision(t,e.precision),lr.addBitWidth(t,e.bitWidth),lr.endDecimal(t)}visitDate(e,t){return Js.startDate(t),Js.addUnit(t,e.unit),Js.endDate(t)}visitTime(e,t){return Dr.startTime(t),Dr.addUnit(t,e.unit),Dr.addBitWidth(t,e.bitWidth),Dr.endTime(t)}visitTimestamp(e,t){const n=e.timezone&&t.createString(e.timezone)||void 0;return Ar.startTimestamp(t),Ar.addUnit(t,e.unit),n!==void 0&&Ar.addTimezone(t,n),Ar.endTimestamp(t)}visitInterval(e,t){return en.startInterval(t),en.addUnit(t,e.unit),en.endInterval(t)}visitList(e,t){return wa.startList(t),wa.endList(t)}visitStruct(e,t){return xa.startStruct_(t),xa.endStruct_(t)}visitUnion(e,t){cr.startTypeIdsVector(t,e.typeIds.length);const n=cr.createTypeIdsVector(t,e.typeIds);return cr.startUnion(t),cr.addMode(t,e.mode),cr.addTypeIds(t,n),cr.endUnion(t)}visitDictionary(e,t){const n=this.visit(e.indices,t);return wn.startDictionaryEncoding(t),wn.addId(t,new iw(e.id,0)),wn.addIsOrdered(t,e.isOrdered),n!==void 0&&wn.addIndexType(t,n),wn.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return Zr.startFixedSizeBinary(t),Zr.addByteWidth(t,e.byteWidth),Zr.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return Qr.startFixedSizeList(t),Qr.addListSize(t,e.listSize),Qr.endFixedSizeList(t)}visitMap(e,t){return eo.startMap(t),eo.addKeysSorted(t,e.keysSorted),eo.endMap(t)}}const Vu=new sw;function ow(r,e=new Map){return new st(lw(r,e),no(r.customMetadata),e)}function Pg(r){return new Tr(r.count,Lg(r.columns),Fg(r.columns))}function uw(r){return new on(Pg(r.data),r.id,r.isDelta)}function lw(r,e){return(r.fields||[]).filter(Boolean).map(t=>mt.fromJSON(t,e))}function xd(r,e){return(r.children||[]).filter(Boolean).map(t=>mt.fromJSON(t,e))}function Lg(r){return(r||[]).reduce((e,t)=>[...e,new ka(t.count,cw(t.VALIDITY)),...Lg(t.children)],[])}function Fg(r,e=[]){for(let t=-1,n=(r||[]).length;++t<n;){const a=r[t];a.VALIDITY&&e.push(new rn(e.length,a.VALIDITY.length)),a.TYPE&&e.push(new rn(e.length,a.TYPE.length)),a.OFFSET&&e.push(new rn(e.length,a.OFFSET.length)),a.DATA&&e.push(new rn(e.length,a.DATA.length)),e=Fg(a.children,e)}return e}function cw(r){return(r||[]).reduce((e,t)=>e+ +(t===0),0)}function fw(r,e){let t,n,a,i,s,o;return!e||!(i=r.dictionary)?(s=Td(r,xd(r,e)),a=new mt(r.name,s,r.nullable,no(r.customMetadata))):e.has(t=i.id)?(n=(n=i.indexType)?Ed(n):new es,o=new fi(e.get(t),n,t,i.isOrdered),a=new mt(r.name,o,r.nullable,no(r.customMetadata))):(n=(n=i.indexType)?Ed(n):new es,e.set(t,s=Td(r,xd(r,e))),o=new fi(s,n,t,i.isOrdered),a=new mt(r.name,o,r.nullable,no(r.customMetadata))),a||null}function no(r){return new Map(Object.entries(r||{}))}function Ed(r){return new Hn(r.isSigned,r.bitWidth)}function Td(r,e){const t=r.type.name;switch(t){case"NONE":return new Gn;case"null":return new Gn;case"binary":return new mo;case"utf8":return new bo;case"bool":return new wo;case"list":return new Co((e||[])[0]);case"struct":return new rr(e||[]);case"struct_":return new rr(e||[])}switch(t){case"int":{const n=r.type;return new Hn(n.isSigned,n.bitWidth)}case"floatingpoint":{const n=r.type;return new ts(pr[n.precision])}case"decimal":{const n=r.type;return new So(n.scale,n.precision,n.bitWidth)}case"date":{const n=r.type;return new xo(Tn[n.unit])}case"time":{const n=r.type;return new rs(Ze[n.unit],n.bitWidth)}case"timestamp":{const n=r.type;return new Eo(Ze[n.unit],n.timezone)}case"interval":{const n=r.type;return new To(Wn[n.unit])}case"union":{const n=r.type;return new Bo(Er[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const n=r.type;return new Io(n.byteWidth)}case"fixedsizelist":{const n=r.type;return new _o(n.listSize,(e||[])[0])}case"map":{const n=r.type;return new Do((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${t}"`)}var Ia=xn,dw=Bg,hw=di;class nr{constructor(e,t,n,a){this._version=t,this._headerType=n,this.body=new Uint8Array(0),a&&(this._createHeader=()=>a),this._bodyLength=typeof e=="number"?e:e.low}static fromJSON(e,t){const n=new nr(0,Sr.V4,t);return n._createHeader=vw(e,t),n}static decode(e){e=new hw(Xe(e));const t=On.getRootAsMessage(e),n=t.bodyLength(),a=t.version(),i=t.headerType(),s=new nr(n,a,i);return s._createHeader=pw(t,i),s}static encode(e){const t=new dw;let n=-1;return e.isSchema()?n=st.encode(t,e.header()):e.isRecordBatch()?n=Tr.encode(t,e.header()):e.isDictionaryBatch()&&(n=on.encode(t,e.header())),On.startMessage(t),On.addVersion(t,Sr.V4),On.addHeader(t,n),On.addHeaderType(t,e.headerType),On.addBodyLength(t,new Ia(e.bodyLength,0)),On.finishMessageBuffer(t,On.endMessage(t)),t.asUint8Array()}static from(e,t=0){if(e instanceof st)return new nr(0,Sr.V4,at.Schema,e);if(e instanceof Tr)return new nr(t,Sr.V4,at.RecordBatch,e);if(e instanceof on)return new nr(t,Sr.V4,at.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===at.Schema}isRecordBatch(){return this.headerType===at.RecordBatch}isDictionaryBatch(){return this.headerType===at.DictionaryBatch}}class Tr{constructor(e,t,n){this._nodes=t,this._buffers=n,this._length=typeof e=="number"?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class on{constructor(e,t,n=!1){this._data=e,this._isDelta=n,this._id=typeof t=="number"?t:t.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class rn{constructor(e,t){this.offset=typeof e=="number"?e:e.low,this.length=typeof t=="number"?t:t.low}}class ka{constructor(e,t){this.length=typeof e=="number"?e:e.low,this.nullCount=typeof t=="number"?t:t.low}}function vw(r,e){return()=>{switch(e){case at.Schema:return st.fromJSON(r);case at.RecordBatch:return Tr.fromJSON(r);case at.DictionaryBatch:return on.fromJSON(r)}throw new Error(`Unrecognized Message type: { name: ${at[e]}, type: ${e} }`)}}function pw(r,e){return()=>{switch(e){case at.Schema:return st.decode(r.header(new Yr));case at.RecordBatch:return Tr.decode(r.header(new yn),r.version());case at.DictionaryBatch:return on.decode(r.header(new Xa),r.version())}throw new Error(`Unrecognized Message type: { name: ${at[e]}, type: ${e} }`)}}mt.encode=Bw;mt.decode=Tw;mt.fromJSON=fw;st.encode=Cw;st.decode=gw;st.fromJSON=ow;Tr.encode=Iw;Tr.decode=yw;Tr.fromJSON=Pg;on.encode=_w;on.decode=mw;on.fromJSON=uw;ka.encode=Dw;ka.decode=ww;rn.encode=Aw;rn.decode=bw;function gw(r,e=new Map){const t=Ew(r,e);return new st(t,ao(r),e)}function yw(r,e=Sr.V4){if(r.compression()!==null)throw new Error("Record batch compression not implemented");return new Tr(r.length(),Sw(r),xw(r,e))}function mw(r,e=Sr.V4){return new on(Tr.decode(r.data(),e),r.id(),r.isDelta())}function bw(r){return new rn(r.offset(),r.length())}function ww(r){return new ka(r.length(),r.nullCount())}function Sw(r){const e=[];for(let t,n=-1,a=-1,i=r.nodesLength();++n<i;)(t=r.nodes(n))&&(e[++a]=ka.decode(t));return e}function xw(r,e){const t=[];for(let n,a=-1,i=-1,s=r.buffersLength();++a<s;)(n=r.buffers(a))&&(e<Sr.V4&&(n.bb_pos+=8*(a+1)),t[++i]=rn.decode(n));return t}function Ew(r,e){const t=[];for(let n,a=-1,i=-1,s=r.fieldsLength();++a<s;)(n=r.fields(a))&&(t[++i]=mt.decode(n,e));return t}function Cd(r,e){const t=[];for(let n,a=-1,i=-1,s=r.childrenLength();++a<s;)(n=r.children(a))&&(t[++i]=mt.decode(n,e));return t}function Tw(r,e){let t,n,a,i,s,o;return!e||!(o=r.dictionary())?(a=Id(r,Cd(r,e)),n=new mt(r.name(),a,r.nullable(),ao(r))):e.has(t=o.id().low)?(i=(i=o.indexType())?Bd(i):new es,s=new fi(e.get(t),i,t,o.isOrdered()),n=new mt(r.name(),s,r.nullable(),ao(r))):(i=(i=o.indexType())?Bd(i):new es,e.set(t,a=Id(r,Cd(r,e))),s=new fi(a,i,t,o.isOrdered()),n=new mt(r.name(),s,r.nullable(),ao(r))),n||null}function ao(r){const e=new Map;if(r)for(let t,n,a=-1,i=Math.trunc(r.customMetadataLength());++a<i;)(t=r.customMetadata(a))&&(n=t.key())!=null&&e.set(n,t.value());return e}function Bd(r){return new Hn(r.isSigned(),r.bitWidth())}function Id(r,e){const t=r.typeType();switch(t){case wt.NONE:return new Gn;case wt.Null:return new Gn;case wt.Binary:return new mo;case wt.Utf8:return new bo;case wt.Bool:return new wo;case wt.List:return new Co((e||[])[0]);case wt.Struct_:return new rr(e||[])}switch(t){case wt.Int:{const n=r.type(new wr);return new Hn(n.isSigned(),n.bitWidth())}case wt.FloatingPoint:{const n=r.type(new Jr);return new ts(n.precision())}case wt.Decimal:{const n=r.type(new lr);return new So(n.scale(),n.precision(),n.bitWidth())}case wt.Date:{const n=r.type(new Js);return new xo(n.unit())}case wt.Time:{const n=r.type(new Dr);return new rs(n.unit(),n.bitWidth())}case wt.Timestamp:{const n=r.type(new Ar);return new Eo(n.unit(),n.timezone())}case wt.Interval:{const n=r.type(new en);return new To(n.unit())}case wt.Union:{const n=r.type(new cr);return new Bo(n.mode(),n.typeIdsArray()||[],e||[])}case wt.FixedSizeBinary:{const n=r.type(new Zr);return new Io(n.byteWidth())}case wt.FixedSizeList:{const n=r.type(new Qr);return new _o(n.listSize(),(e||[])[0])}case wt.Map:{const n=r.type(new eo);return new Do((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${wt[t]}" (${t})`)}function Cw(r,e){const t=e.fields.map(i=>mt.encode(r,i));Yr.startFieldsVector(r,t.length);const n=Yr.createFieldsVector(r,t),a=e.metadata&&e.metadata.size>0?Yr.createCustomMetadataVector(r,[...e.metadata].map(([i,s])=>{const o=r.createString(`${i}`),u=r.createString(`${s}`);return Lt.startKeyValue(r),Lt.addKey(r,o),Lt.addValue(r,u),Lt.endKeyValue(r)})):-1;return Yr.startSchema(r),Yr.addFields(r,n),Yr.addEndianness(r,Rw?vi.Little:vi.Big),a!==-1&&Yr.addCustomMetadata(r,a),Yr.endSchema(r)}function Bw(r,e){let t=-1,n=-1,a=-1;const i=e.type;let s=e.typeId;Be.isDictionary(i)?(s=i.dictionary.typeId,a=Vu.visit(i,r),n=Vu.visit(i.dictionary,r)):n=Vu.visit(i,r);const o=(i.children||[]).map(c=>mt.encode(r,c)),u=Br.createChildrenVector(r,o),l=e.metadata&&e.metadata.size>0?Br.createCustomMetadataVector(r,[...e.metadata].map(([c,f])=>{const d=r.createString(`${c}`),h=r.createString(`${f}`);return Lt.startKeyValue(r),Lt.addKey(r,d),Lt.addValue(r,h),Lt.endKeyValue(r)})):-1;return e.name&&(t=r.createString(e.name)),Br.startField(r),Br.addType(r,n),Br.addTypeType(r,s),Br.addChildren(r,u),Br.addNullable(r,!!e.nullable),t!==-1&&Br.addName(r,t),a!==-1&&Br.addDictionary(r,a),l!==-1&&Br.addCustomMetadata(r,l),Br.endField(r)}function Iw(r,e){const t=e.nodes||[],n=e.buffers||[];yn.startNodesVector(r,t.length);for(const s of t.slice().reverse())ka.encode(r,s);const a=r.endVector();yn.startBuffersVector(r,n.length);for(const s of n.slice().reverse())rn.encode(r,s);const i=r.endVector();return yn.startRecordBatch(r),yn.addLength(r,new Ia(e.length,0)),yn.addNodes(r,a),yn.addBuffers(r,i),yn.endRecordBatch(r)}function _w(r,e){const t=Tr.encode(r,e.data);return Xa.startDictionaryBatch(r),Xa.addId(r,new Ia(e.id,0)),Xa.addIsDelta(r,e.isDelta),Xa.addData(r,t),Xa.endDictionaryBatch(r)}function Dw(r,e){return kg.createFieldNode(r,new Ia(e.length,0),new Ia(e.nullCount,0))}function Aw(r,e){return Mg.createBuffer(r,new Ia(e.offset,0),new Ia(e.length,0))}const Rw=(()=>{const r=new ArrayBuffer(2);return new DataView(r).setInt16(0,256,!0),new Int16Array(r)[0]===256})(),wf=r=>`Expected ${at[r]} Message in stream, but was null or length 0.`,Sf=r=>`Header pointer of flatbuffer-encoded ${at[r]} Message is null or length 0.`,Ng=(r,e)=>`Expected to read ${r} metadata bytes, but only read ${e}.`,zg=(r,e)=>`Expected to read ${r} bytes for message body, but only read ${e}.`;class Vg{constructor(e){this.source=e instanceof No?e:new No(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?St:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(wf(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=Xe(this.source.read(e));if(t.byteLength<e)throw new Error(zg(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(e=!1){const t=at.Schema,n=this.readMessage(t),a=n==null?void 0:n.header();if(e&&!a)throw new Error(Sf(t));return a}readMetadataLength(){const e=this.source.read(cu),t=e&&new di(e),n=(t==null?void 0:t.readInt32(0))||0;return{done:n===0,value:n}}readMetadata(e){const t=this.source.read(e);if(!t)return St;if(t.byteLength<e)throw new Error(Ng(e,t.byteLength));return{done:!1,value:nr.decode(t)}}}class Ow{constructor(e,t){this.source=e instanceof gi?e:op(e)?new zo(e,t):new gi(e)}[Symbol.asyncIterator](){return this}next(){return Te(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?St:e})}throw(e){return Te(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return Te(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return Te(this,void 0,void 0,function*(){let t;if((t=yield this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(wf(e));return t.value})}readMessageBody(e){return Te(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const t=Xe(yield this.source.read(e));if(t.byteLength<e)throw new Error(zg(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()})}readSchema(e=!1){return Te(this,void 0,void 0,function*(){const t=at.Schema,n=yield this.readMessage(t),a=n==null?void 0:n.header();if(e&&!a)throw new Error(Sf(t));return a})}readMetadataLength(){return Te(this,void 0,void 0,function*(){const e=yield this.source.read(cu),t=e&&new di(e),n=(t==null?void 0:t.readInt32(0))||0;return{done:n===0,value:n}})}readMetadata(e){return Te(this,void 0,void 0,function*(){const t=yield this.source.read(e);if(!t)return St;if(t.byteLength<e)throw new Error(Ng(e,t.byteLength));return{done:!1,value:nr.decode(t)}})}}class Mw extends Vg{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof bd?e:new bd(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:nr.fromJSON(e.schema,at.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];return this._body=t.data.columns,{done:!1,value:nr.fromJSON(t,at.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];return this._body=t.columns,{done:!1,value:nr.fromJSON(t,at.RecordBatch)}}return this._body=[],St}readMessageBody(e){return t(this._body);function t(n){return(n||[]).reduce((a,i)=>[...a,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE&&[i.TYPE]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...t(i.children)],[])}}readMessage(e){let t;if((t=this.next()).done)return null;if(e!=null&&t.value.headerType!==e)throw new Error(wf(e));return t.value}readSchema(){const e=at.Schema,t=this.readMessage(e),n=t==null?void 0:t.header();if(!t||!n)throw new Error(Sf(e));return n}}const cu=4,Ac="ARROW1",as=new Uint8Array(Ac.length);for(let r=0;r<Ac.length;r+=1)as[r]=Ac.codePointAt(r);function xf(r,e=0){for(let t=-1,n=as.length;++t<n;)if(as[t]!==r[e+t])return!1;return!0}const Ss=as.length,Ug=Ss+cu,kw=Ss*2+cu;class En extends vf{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return $n(t)?t.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return _r.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return _r.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof En?e:bc(e)?Nw(e):op(e)?Uw(e):$n(e)?Te(this,void 0,void 0,function*(){return yield En.from(yield e)}):up(e)||Jc(e)||lp(e)||Si(e)?Vw(new gi(e)):zw(new No(e))}static readAll(e){return e instanceof En?e.isSync()?_d(e):Dd(e):bc(e)||ArrayBuffer.isView(e)||ys(e)||sp(e)?_d(e):Dd(e)}}class $o extends En{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return tn(this,arguments,function*(){yield Pe(yield*Qs(Ca(this[Symbol.iterator]())))})}}class Wo extends En{constructor(e){super(e),this._impl=e}readAll(){var e,t;return Te(this,void 0,void 0,function*(){const n=new Array;try{for(var a=Ca(this),i;i=yield a.next(),!i.done;){const s=i.value;n.push(s)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=a.return)&&(yield t.call(a))}finally{if(e)throw e.error}}return n})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class qg extends $o{constructor(e){super(e),this._impl=e}}class Pw extends Wo{constructor(e){super(e),this._impl=e}}class $g{constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const n=this._loadVectors(e,t,this.schema.fields),a=$e({type:new rr(this.schema.fields),length:e.length,children:n});return new fr(this.schema,a)}_loadDictionaryBatch(e,t){const{id:n,isDelta:a}=e,{dictionaries:i,schema:s}=this,o=i.get(n);if(a||!o){const u=s.dictionaries.get(n),l=this._loadVectors(e.data,t,[u]);return(o&&a?o.concat(new it(l)):new it(l)).memoize()}return o.memoize()}_loadVectors(e,t,n){return new Dg(t,e.nodes,e.buffers,this.dictionaries).visitMany(n)}}class Go extends $g{constructor(e,t){super(t),this._reader=bc(e)?new Mw(this._handle=e):new Vg(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Gg(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):St}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):St}next(){if(this.closed)return St;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),a=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,a)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),a=t.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(n,a);this.dictionaries.set(n.id,i)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new bf(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class Ho extends $g{constructor(e,t){super(t),this._reader=new Ow(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return Te(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return Te(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Gg(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return Te(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):St})}return(e){return Te(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):St})}next(){return Te(this,void 0,void 0,function*(){if(this.closed)return St;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),a=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,a)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),a=yield t.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(n,a);this.dictionaries.set(n.id,i)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new bf(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return Te(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class Wg extends Go{constructor(e,t){super(e instanceof wd?e:new wd(e),t)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const n=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(e);if(n&&this._handle.seek(n.offset)){const a=this._reader.readMessage(at.RecordBatch);if(a!=null&&a.isRecordBatch()){const i=a.header(),s=this._reader.readMessageBody(a.bodyLength);return this._loadRecordBatch(i,s)}}return null}_readDictionaryBatch(e){var t;const n=(t=this._footer)===null||t===void 0?void 0:t.getDictionaryBatch(e);if(n&&this._handle.seek(n.offset)){const a=this._reader.readMessage(at.DictionaryBatch);if(a!=null&&a.isDictionaryBatch()){const i=a.header(),s=this._reader.readMessageBody(a.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}}}_readFooter(){const{_handle:e}=this,t=e.size-Ug,n=e.readInt32(t),a=e.readAt(t-n,n);return ns.decode(a)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(e)}return null}}class Lw extends Ho{constructor(e,...t){const n=typeof t[0]!="number"?t.shift():void 0,a=t[0]instanceof Map?t.shift():void 0;super(e instanceof zo?e:new zo(e,n),a)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return Te(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)})}readRecordBatch(e){var t;return Te(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const n=(t=this._footer)===null||t===void 0?void 0:t.getRecordBatch(e);if(n&&(yield this._handle.seek(n.offset))){const a=yield this._reader.readMessage(at.RecordBatch);if(a!=null&&a.isRecordBatch()){const i=a.header(),s=yield this._reader.readMessageBody(a.bodyLength);return this._loadRecordBatch(i,s)}}return null})}_readDictionaryBatch(e){var t;return Te(this,void 0,void 0,function*(){const n=(t=this._footer)===null||t===void 0?void 0:t.getDictionaryBatch(e);if(n&&(yield this._handle.seek(n.offset))){const a=yield this._reader.readMessage(at.DictionaryBatch);if(a!=null&&a.isDictionaryBatch()){const i=a.header(),s=yield this._reader.readMessageBody(a.bodyLength),o=this._loadDictionaryBatch(i,s);this.dictionaries.set(i.id,o)}}})}_readFooter(){return Te(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-Ug,n=yield e.readInt32(t),a=yield e.readAt(t-n,n);return ns.decode(a)})}_readNextMessageAndValidate(e){return Te(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null})}}class Fw extends Go{constructor(e,t){super(e,t)}_loadVectors(e,t,n){return new jb(t,e.nodes,e.buffers,this.dictionaries).visitMany(n)}}function Gg(r,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:r.autoDestroy}function*_d(r){const e=En.from(r);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function Dd(r){return tn(this,arguments,function*(){const t=yield Pe(En.from(r));try{if(!(yield Pe(t.open({autoDestroy:!1}))).closed)do yield yield Pe(t);while(!(yield Pe(t.reset().open())).closed)}finally{yield Pe(t.cancel())}})}function Nw(r){return new $o(new Fw(r))}function zw(r){const e=r.peek(Ss+7&-8);return e&&e.byteLength>=4?xf(e)?new qg(new Wg(r.read())):new $o(new Go(r)):new $o(new Go(function*(){}()))}function Vw(r){return Te(this,void 0,void 0,function*(){const e=yield r.peek(Ss+7&-8);return e&&e.byteLength>=4?xf(e)?new qg(new Wg(yield r.read())):new Wo(new Ho(r)):new Wo(new Ho(function(){return tn(this,arguments,function*(){})}()))})}function Uw(r){return Te(this,void 0,void 0,function*(){const{size:e}=yield r.stat(),t=new zo(r,e);return e>=kw&&xf(yield t.readAt(0,Ss+7&-8))?new Pw(new Lw(t)):new Wo(new Ho(t))})}class Rt extends We{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...e){const t=a=>a.flatMap(i=>Array.isArray(i)?t(i):i instanceof fr?i.data.children:i.data),n=new Rt;return n.visitMany(t(e)),n}visit(e){if(e instanceof it)return this.visitMany(e.data),this;const{type:t}=e;if(!Be.isDictionary(t)){const{length:n,nullCount:a}=e;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Be.isNull(t)||Nr.call(this,a<=0?new Uint8Array(0):lf(e.offset,n,e.nullBitmap)),this.nodes.push(new ka(n,a))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Nr(r){const e=r.byteLength+7&-8;return this.buffers.push(r),this.bufferRegions.push(new rn(this._byteLength,e)),this._byteLength+=e,this}function qw(r){const{type:e,length:t,typeIds:n,valueOffsets:a}=r;if(Nr.call(this,n),e.mode===Er.Sparse)return Rc.call(this,r);if(e.mode===Er.Dense){if(r.offset<=0)return Nr.call(this,a),Rc.call(this,r);{const i=n.reduce((c,f)=>Math.max(c,f),n[0]),s=new Int32Array(i+1),o=new Int32Array(i+1).fill(-1),u=new Int32Array(t),l=tf(-a[0],t,a);for(let c,f,d=-1;++d<t;)(f=o[c=n[d]])===-1&&(f=o[c]=l[c]),u[d]=l[d]-f,++s[c];Nr.call(this,u);for(let c,f=-1,d=e.children.length;++f<d;)if(c=r.children[f]){const h=e.typeIds[f],v=Math.min(t,s[h]);this.visit(c.slice(o[h],v))}}}return this}function $w(r){let e;return r.nullCount>=r.length?Nr.call(this,new Uint8Array(0)):(e=r.values)instanceof Uint8Array?Nr.call(this,lf(r.offset,r.length,e)):Nr.call(this,Ao(r.values))}function aa(r){return Nr.call(this,r.values.subarray(0,r.length*r.stride))}function Hg(r){const{length:e,values:t,valueOffsets:n}=r,a=n[0],i=n[e],s=Math.min(i-a,t.byteLength-a);return Nr.call(this,tf(-n[0],e,n)),Nr.call(this,t.subarray(a,a+s)),this}function Ef(r){const{length:e,valueOffsets:t}=r;return t&&Nr.call(this,tf(t[0],e,t)),this.visit(r.children[0])}function Rc(r){return this.visitMany(r.type.children.map((e,t)=>r.children[t]).filter(Boolean))[0]}Rt.prototype.visitBool=$w;Rt.prototype.visitInt=aa;Rt.prototype.visitFloat=aa;Rt.prototype.visitUtf8=Hg;Rt.prototype.visitBinary=Hg;Rt.prototype.visitFixedSizeBinary=aa;Rt.prototype.visitDate=aa;Rt.prototype.visitTimestamp=aa;Rt.prototype.visitTime=aa;Rt.prototype.visitDecimal=aa;Rt.prototype.visitList=Ef;Rt.prototype.visitStruct=Rc;Rt.prototype.visitUnion=qw;Rt.prototype.visitInterval=aa;Rt.prototype.visitFixedSizeList=Ef;Rt.prototype.visitMap=Ef;class Yg extends vf{constructor(e){super(),this._position=0,this._started=!1,this._sink=new ro,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,gr(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return $n(e)?e.then(t=>this.writeAll(t)):Si(e)?If(this,e):Bf(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,t=null){return e===this._sink||e instanceof ro?this._sink=e:(this._sink=new ro,e&&c0(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&f0(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!t||!Ic(t,this._schema))&&(t==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof tr&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof fr&&!(t=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(t&&!Ic(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof fr?e instanceof bf||this._writeRecordBatch(e):e instanceof tr?this.writeAll(e.batches):ys(e)&&this.writeAll(e)}_writeMessage(e,t=8){const n=t-1,a=nr.encode(e),i=a.byteLength,s=this._writeLegacyIpcFormat?4:8,o=i+s+n&~n,u=o-i-s;return e.headerType===at.RecordBatch?this._recordBatchBlocks.push(new Yn(o,e.bodyLength,this._position)):e.headerType===at.DictionaryBatch&&this._dictionaryBlocks.push(new Yn(o,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-s)),i>0&&this._write(a),this._writePadding(u)}_write(e){if(this._started){const t=Xe(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(nr.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(as)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:n,bufferRegions:a,buffers:i}=Rt.assemble(e),s=new Tr(e.numRows,n,a),o=nr.from(s,t);return this._writeDictionaries(e)._writeMessage(o)._writeBodyBuffers(i)}_writeDictionaryBatch(e,t,n=!1){this._dictionaryDeltaOffsets.set(t,e.length+(this._dictionaryDeltaOffsets.get(t)||0));const{byteLength:a,nodes:i,bufferRegions:s,buffers:o}=Rt.assemble(new it([e])),u=new Tr(e.length,i,s),l=new on(u,t,n),c=nr.from(l,a);return this._writeMessage(c)._writeBodyBuffers(o)}_writeBodyBuffers(e){let t,n,a;for(let i=-1,s=e.length;++i<s;)(t=e[i])&&(n=t.byteLength)>0&&(this._write(t),(a=(n+7&-8)-n)>0&&this._writePadding(a));return this}_writeDictionaries(e){for(let[t,n]of e.dictionaries){let a=this._dictionaryDeltaOffsets.get(t)||0;if(a===0||(n=n==null?void 0:n.slice(a)).length>0)for(const i of n.data)this._writeDictionaryBatch(i,t,a>0),a+=i.length}return this}}class Tf extends Yg{static writeAll(e,t){const n=new Tf(t);return $n(e)?e.then(a=>n.writeAll(a)):Si(e)?If(n,e):Bf(n,e)}}class Cf extends Yg{static writeAll(e){const t=new Cf;return $n(e)?e.then(n=>t.writeAll(n)):Si(e)?If(t,e):Bf(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const t=ns.encode(new ns(e,Sr.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function Bf(r,e){let t=e;e instanceof tr&&(t=e.batches,r.reset(void 0,e.schema));for(const n of t)r.write(n);return r.finish()}function If(r,e){var t,n,a,i;return Te(this,void 0,void 0,function*(){try{for(t=Ca(e);n=yield t.next(),!n.done;){const s=n.value;r.write(s)}}catch(s){a={error:s}}finally{try{n&&!n.done&&(i=t.return)&&(yield i.call(t))}finally{if(a)throw a.error}}return r.finish()})}function qi(r){const e=En.from(r);return $n(e)?e.then(t=>qi(t)):e.isAsync()?e.readAll().then(t=>new tr(t)):new tr(e.readAll())}function Uu(r,e="stream"){return(e==="stream"?Tf:Cf).writeAll(r).toUint8Array(!0)}var Ad=function(){function r(e,t,n,a){var i=this;this.getCell=function(s,o){var u=s<i.headerRows&&o<i.headerColumns,l=s>=i.headerRows&&o<i.headerColumns,c=s<i.headerRows&&o>=i.headerColumns;if(u){var f=["blank"];return o>0&&f.push("level"+s),{type:"blank",classNames:f.join(" "),content:""}}else if(c){var d=o-i.headerColumns,f=["col_heading","level"+s,"col"+d];return{type:"columns",classNames:f.join(" "),content:i.getContent(i.columnsTable,d,s)}}else if(l){var h=s-i.headerRows,f=["row_heading","level"+o,"row"+h];return{type:"index",id:"T_".concat(i.uuid,"level").concat(o,"_row").concat(h),classNames:f.join(" "),content:i.getContent(i.indexTable,h,o)}}else{var h=s-i.headerRows,d=o-i.headerColumns,f=["data","row"+h,"col"+d],v=i.styler?i.getContent(i.styler.displayValuesTable,h,d):i.getContent(i.dataTable,h,d);return{type:"data",id:"T_".concat(i.uuid,"row").concat(h,"_col").concat(d),classNames:f.join(" "),content:v}}},this.getContent=function(s,o,u){var l=s.getChildAt(u);if(l===null)return"";var c=i.getColumnTypeId(s,u);switch(c){case q.Timestamp:return i.nanosToDate(l.get(o));default:return l.get(o)}},this.dataTable=qi(e),this.indexTable=qi(t),this.columnsTable=qi(n),this.styler=a?{caption:a.caption,displayValuesTable:qi(a.displayValues),styles:a.styles,uuid:a.uuid}:void 0}return Object.defineProperty(r.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),r.prototype.serialize=function(){return{data:Uu(this.dataTable),index:Uu(this.indexTable),columns:Uu(this.columnsTable)}},r.prototype.getColumnTypeId=function(e,t){return e.schema.fields[t].type.typeId},r.prototype.nanosToDate=function(e){return new Date(e/1e6)},r}(),Yi=function(){return Yi=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Yi.apply(this,arguments)},Ki;(function(r){r.COMPONENT_READY="streamlit:componentReady",r.SET_COMPONENT_VALUE="streamlit:setComponentValue",r.SET_FRAME_HEIGHT="streamlit:setFrameHeight"})(Ki||(Ki={}));var jn=function(){function r(){}return r.API_VERSION=1,r.RENDER_EVENT="streamlit:render",r.events=new EventTarget,r.registeredMessageListener=!1,r.setComponentReady=function(){r.registeredMessageListener||(window.addEventListener("message",r.onMessageEvent),r.registeredMessageListener=!0),r.sendBackMsg(Ki.COMPONENT_READY,{apiVersion:r.API_VERSION})},r.setFrameHeight=function(e){e===void 0&&(e=document.body.scrollHeight),e!==r.lastFrameHeight&&(r.lastFrameHeight=e,r.sendBackMsg(Ki.SET_FRAME_HEIGHT,{height:e}))},r.setComponentValue=function(e){var t;e instanceof Ad?(t="dataframe",e=e.serialize()):Gw(e)?(t="bytes",e=new Uint8Array(e.buffer)):e instanceof ArrayBuffer?(t="bytes",e=new Uint8Array(e)):t="json",r.sendBackMsg(Ki.SET_COMPONENT_VALUE,{value:e,dataType:t})},r.onMessageEvent=function(e){var t=e.data.type;switch(t){case r.RENDER_EVENT:r.onRenderMessage(e.data);break}},r.onRenderMessage=function(e){var t=e.args;t==null&&(console.error("Got null args in onRenderMessage. This should never happen"),t={});var n=e.dfs&&e.dfs.length>0?r.argsDataframeToObject(e.dfs):{};t=Yi(Yi({},t),n);var a=!!e.disabled,i=e.theme;i&&Ww(i);var s={disabled:a,args:t,theme:i},o=new CustomEvent(r.RENDER_EVENT,{detail:s});r.events.dispatchEvent(o)},r.argsDataframeToObject=function(e){var t=e.map(function(n){var a=n.key,i=n.value;return[a,r.toArrowTable(i)]});return Object.fromEntries(t)},r.toArrowTable=function(e){var t,n=(t=e.data,t.data),a=t.index,i=t.columns,s=t.styler;return new Ad(n,a,i,s)},r.sendBackMsg=function(e,t){window.parent.postMessage(Yi({isStreamlitMessage:!0,type:e},t),"*")},r}(),Ww=function(r){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML=`
    :root {
      --primary-color: `.concat(r.primaryColor,`;
      --background-color: `).concat(r.backgroundColor,`;
      --secondary-background-color: `).concat(r.secondaryBackgroundColor,`;
      --text-color: `).concat(r.textColor,`;
      --font: `).concat(r.font,`;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
    }
  `)};function Gw(r){var e=!1;try{e=r instanceof BigInt64Array||r instanceof BigUint64Array}catch{}return r instanceof Int8Array||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array||e}var Hw=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();(function(r){Hw(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.componentDidMount=function(){jn.setFrameHeight()},e.prototype.componentDidUpdate=function(){jn.setFrameHeight()},e})(i0.PureComponent);function Oc(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Yw(r){if(Array.isArray(r))return r}function Kw(r){if(Array.isArray(r))return Oc(r)}function ia(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function jw(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,jg(n.key),n)}}function sa(r,e,t){return e&&jw(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function vr(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_f(r))||e){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i,s=!0,o=!1;return{s:function(){t=t.call(r)},n:function(){var u=t.next();return s=u.done,u},e:function(u){o=!0,i=u},f:function(){try{s||t.return==null||t.return()}finally{if(o)throw i}}}}function Kg(r,e,t){return(e=jg(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Xw(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Zw(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,a,i,s,o=[],u=!0,l=!1;try{if(i=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=i.call(t)).done)&&(o.push(n.value),o.length!==e);u=!0);}catch(c){l=!0,a=c}finally{try{if(!u&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}function Qw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dt(r,e){return Yw(r)||Zw(r,e)||_f(r,e)||Qw()}function Yo(r){return Kw(r)||Xw(r)||_f(r)||Jw()}function e1(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function jg(r){var e=e1(r,"string");return typeof e=="symbol"?e:e+""}function Nt(r){"@babel/helpers - typeof";return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(r)}function _f(r,e){if(r){if(typeof r=="string")return Oc(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Oc(r,e):void 0}}var kt=typeof window>"u"?null:window,Rd=kt?kt.navigator:null;kt&&kt.document;var t1=Nt(""),Xg=Nt({}),r1=Nt(function(){}),n1=typeof HTMLElement>"u"?"undefined":Nt(HTMLElement),xs=function(e){return e&&e.instanceString&&xt(e.instanceString)?e.instanceString():null},ge=function(e){return e!=null&&Nt(e)==t1},xt=function(e){return e!=null&&Nt(e)===r1},dt=function(e){return!xr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Ke=function(e){return e!=null&&Nt(e)===Xg&&!dt(e)&&e.constructor===Object},a1=function(e){return e!=null&&Nt(e)===Xg},ie=function(e){return e!=null&&Nt(e)===Nt(1)&&!isNaN(e)},i1=function(e){return ie(e)&&Math.floor(e)===e},Ko=function(e){if(n1!=="undefined")return e!=null&&e instanceof HTMLElement},xr=function(e){return Es(e)||Zg(e)},Es=function(e){return xs(e)==="collection"&&e._private.single},Zg=function(e){return xs(e)==="collection"&&!e._private.single},Df=function(e){return xs(e)==="core"},Qg=function(e){return xs(e)==="stylesheet"},s1=function(e){return xs(e)==="event"},Xn=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},o1=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},u1=function(e){return Ke(e)&&ie(e.x1)&&ie(e.x2)&&ie(e.y1)&&ie(e.y2)},l1=function(e){return a1(e)&&xt(e.then)},c1=function(){return Rd&&Rd.userAgent.match(/msie|trident|edge/i)},mi=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);return i.join("$")});var n=function(){var i=this,s=arguments,o,u=t.apply(i,s),l=n.cache;return(o=l[u])||(o=l[u]=e.apply(i,s)),o};return n.cache={},n},Af=mi(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),fu=mi(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Jg=mi(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),Od=function(e){return Xn(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},Nn=function(e,t){return e.slice(-1*t.length)===t},Ft="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",f1="rgb[a]?\\(("+Ft+"[%]?)\\s*,\\s*("+Ft+"[%]?)\\s*,\\s*("+Ft+"[%]?)(?:\\s*,\\s*("+Ft+"))?\\)",d1="rgb[a]?\\((?:"+Ft+"[%]?)\\s*,\\s*(?:"+Ft+"[%]?)\\s*,\\s*(?:"+Ft+"[%]?)(?:\\s*,\\s*(?:"+Ft+"))?\\)",h1="hsl[a]?\\(("+Ft+")\\s*,\\s*("+Ft+"[%])\\s*,\\s*("+Ft+"[%])(?:\\s*,\\s*("+Ft+"))?\\)",v1="hsl[a]?\\((?:"+Ft+")\\s*,\\s*(?:"+Ft+"[%])\\s*,\\s*(?:"+Ft+"[%])(?:\\s*,\\s*(?:"+Ft+"))?\\)",p1="\\#[0-9a-fA-F]{3}",g1="\\#[0-9a-fA-F]{6}",ey=function(e,t){return e<t?-1:e>t?1:0},y1=function(e,t){return-1*ey(e,t)},we=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var s=a[i];r[s]=n[s]}}return r},m1=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,a,i,s=16;return t?(n=parseInt(e[1]+e[1],s),a=parseInt(e[2]+e[2],s),i=parseInt(e[3]+e[3],s)):(n=parseInt(e[1]+e[2],s),a=parseInt(e[3]+e[4],s),i=parseInt(e[5]+e[6],s)),[n,a,i]}},b1=function(e){var t,n,a,i,s,o,u,l;function c(v,y,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?v+(y-v)*6*p:p<1/2?y:p<2/3?v+(y-v)*(2/3-p)*6:v}var f=new RegExp("^"+h1+"$").exec(e);if(f){if(n=parseInt(f[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(f[2]),a<0||a>100||(a=a/100,i=parseFloat(f[3]),i<0||i>100)||(i=i/100,s=f[4],s!==void 0&&(s=parseFloat(s),s<0||s>1)))return;if(a===0)o=u=l=Math.round(i*255);else{var d=i<.5?i*(1+a):i+a-i*a,h=2*i-d;o=Math.round(255*c(h,d,n+1/3)),u=Math.round(255*c(h,d,n)),l=Math.round(255*c(h,d,n-1/3))}t=[o,u,l,s]}return t},w1=function(e){var t,n=new RegExp("^"+f1+"$").exec(e);if(n){t=[];for(var a=[],i=1;i<=3;i++){var s=n[i];if(s[s.length-1]==="%"&&(a[i]=!0),s=parseFloat(s),a[i]&&(s=s/100*255),s<0||s>255)return;t.push(Math.floor(s))}var o=a[1]||a[2]||a[3],u=a[1]&&a[2]&&a[3];if(o&&!u)return;var l=n[4];if(l!==void 0){if(l=parseFloat(l),l<0||l>1)return;t.push(l)}}return t},S1=function(e){return x1[e.toLowerCase()]},ty=function(e){return(dt(e)?e:null)||S1(e)||m1(e)||w1(e)||b1(e)},x1={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ry=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(Ke(s))throw Error("Tried to set map with object key");i<n.length-1?(t[s]==null&&(t[s]={}),t=t[s]):t[s]=e.value}},ny=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var s=n[i];if(Ke(s))throw Error("Tried to get map with object key");if(t=t[s],t==null)return t}return t},zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ts(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var qu,Md;function Cs(){if(Md)return qu;Md=1;function r(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}return qu=r,qu}var $u,kd;function E1(){if(kd)return $u;kd=1;var r=typeof zs=="object"&&zs&&zs.Object===Object&&zs;return $u=r,$u}var Wu,Pd;function du(){if(Pd)return Wu;Pd=1;var r=E1(),e=typeof self=="object"&&self&&self.Object===Object&&self,t=r||e||Function("return this")();return Wu=t,Wu}var Gu,Ld;function T1(){if(Ld)return Gu;Ld=1;var r=du(),e=function(){return r.Date.now()};return Gu=e,Gu}var Hu,Fd;function C1(){if(Fd)return Hu;Fd=1;var r=/\s/;function e(t){for(var n=t.length;n--&&r.test(t.charAt(n)););return n}return Hu=e,Hu}var Yu,Nd;function B1(){if(Nd)return Yu;Nd=1;var r=C1(),e=/^\s+/;function t(n){return n&&n.slice(0,r(n)+1).replace(e,"")}return Yu=t,Yu}var Ku,zd;function Rf(){if(zd)return Ku;zd=1;var r=du(),e=r.Symbol;return Ku=e,Ku}var ju,Vd;function I1(){if(Vd)return ju;Vd=1;var r=Rf(),e=Object.prototype,t=e.hasOwnProperty,n=e.toString,a=r?r.toStringTag:void 0;function i(s){var o=t.call(s,a),u=s[a];try{s[a]=void 0;var l=!0}catch{}var c=n.call(s);return l&&(o?s[a]=u:delete s[a]),c}return ju=i,ju}var Xu,Ud;function _1(){if(Ud)return Xu;Ud=1;var r=Object.prototype,e=r.toString;function t(n){return e.call(n)}return Xu=t,Xu}var Zu,qd;function ay(){if(qd)return Zu;qd=1;var r=Rf(),e=I1(),t=_1(),n="[object Null]",a="[object Undefined]",i=r?r.toStringTag:void 0;function s(o){return o==null?o===void 0?a:n:i&&i in Object(o)?e(o):t(o)}return Zu=s,Zu}var Qu,$d;function D1(){if($d)return Qu;$d=1;function r(e){return e!=null&&typeof e=="object"}return Qu=r,Qu}var Ju,Wd;function Bs(){if(Wd)return Ju;Wd=1;var r=ay(),e=D1(),t="[object Symbol]";function n(a){return typeof a=="symbol"||e(a)&&r(a)==t}return Ju=n,Ju}var el,Gd;function A1(){if(Gd)return el;Gd=1;var r=B1(),e=Cs(),t=Bs(),n=NaN,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt;function u(l){if(typeof l=="number")return l;if(t(l))return n;if(e(l)){var c=typeof l.valueOf=="function"?l.valueOf():l;l=e(c)?c+"":c}if(typeof l!="string")return l===0?l:+l;l=r(l);var f=i.test(l);return f||s.test(l)?o(l.slice(2),f?2:8):a.test(l)?n:+l}return el=u,el}var tl,Hd;function R1(){if(Hd)return tl;Hd=1;var r=Cs(),e=T1(),t=A1(),n="Expected a function",a=Math.max,i=Math.min;function s(o,u,l){var c,f,d,h,v,y,p=0,g=!1,m=!1,b=!0;if(typeof o!="function")throw new TypeError(n);u=t(u)||0,r(l)&&(g=!!l.leading,m="maxWait"in l,d=m?a(t(l.maxWait)||0,u):d,b="trailing"in l?!!l.trailing:b);function w(A){var O=c,k=f;return c=f=void 0,p=A,h=o.apply(k,O),h}function S(A){return p=A,v=setTimeout(T,u),g?w(A):h}function E(A){var O=A-y,k=A-p,P=u-O;return m?i(P,d-k):P}function x(A){var O=A-y,k=A-p;return y===void 0||O>=u||O<0||m&&k>=d}function T(){var A=e();if(x(A))return B(A);v=setTimeout(T,E(A))}function B(A){return v=void 0,b&&c?w(A):(c=f=void 0,h)}function I(){v!==void 0&&clearTimeout(v),p=0,c=y=f=v=void 0}function _(){return v===void 0?h:B(e())}function D(){var A=e(),O=x(A);if(c=arguments,f=this,y=A,O){if(v===void 0)return S(y);if(m)return clearTimeout(v),v=setTimeout(T,u),w(y)}return v===void 0&&(v=setTimeout(T,u)),h}return D.cancel=I,D.flush=_,D}return tl=s,tl}var O1=R1(),Is=Ts(O1),rl=kt?kt.performance:null,iy=rl&&rl.now?function(){return rl.now()}:function(){return Date.now()},M1=function(){if(kt){if(kt.requestAnimationFrame)return function(r){kt.requestAnimationFrame(r)};if(kt.mozRequestAnimationFrame)return function(r){kt.mozRequestAnimationFrame(r)};if(kt.webkitRequestAnimationFrame)return function(r){kt.webkitRequestAnimationFrame(r)};if(kt.msRequestAnimationFrame)return function(r){kt.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(iy())},1e3/60)}}(),jo=function(e){return M1(e)},Cn=iy,ga=9261,sy=65599,Za=5381,oy=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ga,n=t,a;a=e.next(),!a.done;)n=n*sy+a.value|0;return n},is=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ga;return t*sy+e|0},ss=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Za;return(t<<5)+t+e|0},k1=function(e,t){return e*2097152+t},Mn=function(e){return e[0]*2097152+e[1]},Vs=function(e,t){return[is(e[0],t[0]),ss(e[1],t[1])]},Yd=function(e,t){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return oy(s,t)},_a=function(e,t){var n={value:0,done:!1},a=0,i=e.length,s={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return oy(s,t)},uy=function(){return P1(arguments)},P1=function(e){for(var t,n=0;n<e.length;n++){var a=e[n];n===0?t=_a(a):t=_a(a,t)}return t};function L1(r,e,t,n,a){var i=a*Math.PI/180,s=Math.cos(i)*(r-t)-Math.sin(i)*(e-n)+t,o=Math.sin(i)*(r-t)+Math.cos(i)*(e-n)+n;return{x:s,y:o}}var F1=function(e,t,n,a,i,s){return{x:(e-n)*i+n,y:(t-a)*s+a}};function N1(r,e,t){if(t===0)return r;var n=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,i=e.w/e.h,s=1/i,o=L1(r.x,r.y,n,a,t),u=F1(o.x,o.y,n,a,i,s);return{x:u.x,y:u.y}}var Kd=!0,z1=console.warn!=null,V1=console.trace!=null,Of=Number.MAX_SAFE_INTEGER||9007199254740991,ly=function(){return!0},Xo=function(){return!1},jd=function(){return 0},Mf=function(){},bt=function(e){throw new Error(e)},cy=function(e){if(e!==void 0)Kd=!!e;else return Kd},ot=function(e){cy()&&(z1?console.warn(e):(console.log(e),V1&&console.trace()))},U1=function(e){return we({},e)},nn=function(e){return e==null?e:dt(e)?e.slice():Ke(e)?U1(e):e},q1=function(e){return e.slice()},fy=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},$1={},dy=function(){return $1},Yt=function(e){var t=Object.keys(e);return function(n){for(var a={},i=0;i<t.length;i++){var s=t[i],o=n==null?void 0:n[s];a[s]=o===void 0?e[s]:o}return a}},Zn=function(e,t,n){for(var a=e.length-1;a>=0;a--)e[a]===t&&e.splice(a,1)},kf=function(e){e.splice(0,e.length)},W1=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}},dr=function(e,t,n){return n&&(t=Jg(n,t)),e[t]},mn=function(e,t,n,a){n&&(t=Jg(n,t)),e[t]=a},G1=function(){function r(){ia(this,r),this._obj={}}return sa(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}])}(),Sn=typeof Map<"u"?Map:G1,H1="undefined",Y1=function(){function r(e){if(ia(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return sa(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}])}(),Ei=(typeof Set>"u"?"undefined":Nt(Set))!==H1?Set:Y1,hu=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Df(e)){bt("An element must have a core reference and parameters set");return}var a=t.group;if(a==null&&(t.data&&t.data.source!=null&&t.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){bt("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?a==="edges":!!t.pannable,active:!1,classes:new Ei,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var s=t.renderedPosition,o=e.pan(),u=e.zoom();i.position={x:(s.x-o.x)/u,y:(s.y-o.y)/u}}var l=[];dt(t.classes)?l=t.classes:ge(t.classes)&&(l=t.classes.split(/\s+/));for(var c=0,f=l.length;c<f;c++){var d=l[c];!d||d===""||i.classes.add(d)}this.createEmitter(),(n===void 0||n)&&this.restore();var h=t.style||t.css;h&&(ot("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},Xd=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var s;Ke(n)&&!xr(n)&&(s=n,n=s.roots||s.root,a=s.visit,i=s.directed),i=arguments.length===2&&!xt(a)?a:i,a=xt(a)?a:function(){};for(var o=this._private.cy,u=n=ge(n)?this.filter(n):n,l=[],c=[],f={},d={},h={},v=0,y,p=this.byGroup(),g=p.nodes,m=p.edges,b=0;b<u.length;b++){var w=u[b],S=w.id();w.isNode()&&(l.unshift(w),e.bfs&&(h[S]=!0,c.push(w)),d[S]=0)}for(var E=function(){var A=e.bfs?l.shift():l.pop(),O=A.id();if(e.dfs){if(h[O])return 0;h[O]=!0,c.push(A)}var k=d[O],P=f[O],M=P!=null?P.source():null,F=P!=null?P.target():null,W=P==null?void 0:A.same(M)?F[0]:M[0],H;if(H=a(A,P,W,v++,k),H===!0)return y=A,1;if(H===!1)return 1;for(var z=A.connectedEdges().filter(function(L){return(!i||L.source().same(A))&&m.has(L)}),$=0;$<z.length;$++){var X=z[$],te=X.connectedNodes().filter(function(L){return!L.same(A)&&g.has(L)}),R=te.id();te.length!==0&&!h[R]&&(te=te[0],l.push(te),e.bfs&&(h[R]=!0,c.push(te)),f[R]=X,d[R]=d[O]+1)}},x;l.length!==0&&(x=E(),!(x!==0&&x===1)););for(var T=o.collection(),B=0;B<c.length;B++){var I=c[B],_=f[I.id()];_!=null&&T.push(_),T.push(I)}return{path:o.collection(T),found:o.collection(y)}}},os={breadthFirstSearch:Xd({bfs:!0}),depthFirstSearch:Xd({dfs:!0})};os.bfs=os.breadthFirstSearch;os.dfs=os.depthFirstSearch;var io={exports:{}},K1=io.exports,Zd;function j1(){return Zd||(Zd=1,function(r,e){(function(){var t,n,a,i,s,o,u,l,c,f,d,h,v,y,p;a=Math.floor,f=Math.min,n=function(g,m){return g<m?-1:g>m?1:0},c=function(g,m,b,w,S){var E;if(b==null&&(b=0),S==null&&(S=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=g.length);b<w;)E=a((b+w)/2),S(m,g[E])<0?w=E:b=E+1;return[].splice.apply(g,[b,b-b].concat(m)),m},o=function(g,m,b){return b==null&&(b=n),g.push(m),y(g,0,g.length-1,b)},s=function(g,m){var b,w;return m==null&&(m=n),b=g.pop(),g.length?(w=g[0],g[0]=b,p(g,0,m)):w=b,w},l=function(g,m,b){var w;return b==null&&(b=n),w=g[0],g[0]=m,p(g,0,b),w},u=function(g,m,b){var w;return b==null&&(b=n),g.length&&b(g[0],m)<0&&(w=[g[0],m],m=w[0],g[0]=w[1],p(g,0,b)),m},i=function(g,m){var b,w,S,E,x,T;for(m==null&&(m=n),E=(function(){T=[];for(var B=0,I=a(g.length/2);0<=I?B<I:B>I;0<=I?B++:B--)T.push(B);return T}).apply(this).reverse(),x=[],w=0,S=E.length;w<S;w++)b=E[w],x.push(p(g,b,m));return x},v=function(g,m,b){var w;if(b==null&&(b=n),w=g.indexOf(m),w!==-1)return y(g,0,w,b),p(g,w,b)},d=function(g,m,b){var w,S,E,x,T;if(b==null&&(b=n),S=g.slice(0,m),!S.length)return S;for(i(S,b),T=g.slice(m),E=0,x=T.length;E<x;E++)w=T[E],u(S,w,b);return S.sort(b).reverse()},h=function(g,m,b){var w,S,E,x,T,B,I,_,D;if(b==null&&(b=n),m*10<=g.length){if(E=g.slice(0,m).sort(b),!E.length)return E;for(S=E[E.length-1],I=g.slice(m),x=0,B=I.length;x<B;x++)w=I[x],b(w,S)<0&&(c(E,w,0,null,b),E.pop(),S=E[E.length-1]);return E}for(i(g,b),D=[],T=0,_=f(m,g.length);0<=_?T<_:T>_;0<=_?++T:--T)D.push(s(g,b));return D},y=function(g,m,b,w){var S,E,x;for(w==null&&(w=n),S=g[b];b>m;){if(x=b-1>>1,E=g[x],w(S,E)<0){g[b]=E,b=x;continue}break}return g[b]=S},p=function(g,m,b){var w,S,E,x,T;for(b==null&&(b=n),S=g.length,T=m,E=g[m],w=2*m+1;w<S;)x=w+1,x<S&&!(b(g[w],g[x])<0)&&(w=x),g[m]=g[w],m=w,w=2*m+1;return g[m]=E,y(g,T,m,b)},t=function(){g.push=o,g.pop=s,g.replace=l,g.pushpop=u,g.heapify=i,g.updateItem=v,g.nlargest=d,g.nsmallest=h;function g(m){this.cmp=m??n,this.nodes=[]}return g.prototype.push=function(m){return o(this.nodes,m,this.cmp)},g.prototype.pop=function(){return s(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(m){return this.nodes.indexOf(m)!==-1},g.prototype.replace=function(m){return l(this.nodes,m,this.cmp)},g.prototype.pushpop=function(m){return u(this.nodes,m,this.cmp)},g.prototype.heapify=function(){return i(this.nodes,this.cmp)},g.prototype.updateItem=function(m){return v(this.nodes,m,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var m;return m=new g,m.nodes=this.nodes.slice(0),m},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,m){return r.exports=m()}(this,function(){return t})}).call(K1)}(io)),io.exports}var nl,Qd;function X1(){return Qd||(Qd=1,nl=j1()),nl}var Z1=X1(),_s=Ts(Z1),Q1=Yt({root:null,weight:function(e){return 1},directed:!1}),J1={dijkstra:function(e){if(!Ke(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Q1(e),a=n.root,i=n.weight,s=n.directed,o=this,u=i,l=ge(a)?this.filter(a)[0]:a[0],c={},f={},d={},h=this.byGroup(),v=h.nodes,y=h.edges;y.unmergeBy(function(k){return k.isLoop()});for(var p=function(P){return c[P.id()]},g=function(P,M){c[P.id()]=M,m.updateItem(P)},m=new _s(function(k,P){return p(k)-p(P)}),b=0;b<v.length;b++){var w=v[b];c[w.id()]=w.same(l)?0:1/0,m.push(w)}for(var S=function(P,M){for(var F=(s?P.edgesTo(M):P.edgesWith(M)).intersect(y),W=1/0,H,z=0;z<F.length;z++){var $=F[z],X=u($);(X<W||!H)&&(W=X,H=$)}return{edge:H,dist:W}};m.size()>0;){var E=m.pop(),x=p(E),T=E.id();if(d[T]=x,x!==1/0)for(var B=E.neighborhood().intersect(v),I=0;I<B.length;I++){var _=B[I],D=_.id(),A=S(E,_),O=x+A.dist;O<p(_)&&(g(_,O),f[D]={node:E,edge:A.edge})}}return{distanceTo:function(P){var M=ge(P)?v.filter(P)[0]:P[0];return d[M.id()]},pathTo:function(P){var M=ge(P)?v.filter(P)[0]:P[0],F=[],W=M,H=W.id();if(M.length>0)for(F.unshift(M);f[H];){var z=f[H];F.unshift(z.edge),F.unshift(z.node),W=z.node,H=W.id()}return o.spawn(F)}}}},eS={kruskal:function(e){e=e||function(b){return 1};for(var t=this.byGroup(),n=t.nodes,a=t.edges,i=n.length,s=new Array(i),o=n,u=function(w){for(var S=0;S<s.length;S++){var E=s[S];if(E.has(w))return S}},l=0;l<i;l++)s[l]=this.spawn(n[l]);for(var c=a.sort(function(b,w){return e(b)-e(w)}),f=0;f<c.length;f++){var d=c[f],h=d.source()[0],v=d.target()[0],y=u(h),p=u(v),g=s[y],m=s[p];y!==p&&(o.merge(d),g.merge(m),s.splice(p,1))}return o}},tS=Yt({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),rS={aStar:function(e){var t=this.cy(),n=tS(e),a=n.root,i=n.goal,s=n.heuristic,o=n.directed,u=n.weight;a=t.collection(a)[0],i=t.collection(i)[0];var l=a.id(),c=i.id(),f={},d={},h={},v=new _s(function(H,z){return d[H.id()]-d[z.id()]}),y=new Ei,p={},g={},m=function(z,$){v.push(z),y.add($)},b,w,S=function(){b=v.pop(),w=b.id(),y.delete(w)},E=function(z){return y.has(z)};m(a,l),f[l]=0,d[l]=s(a);for(var x=0;v.size()>0;){if(S(),x++,w===c){for(var T=[],B=i,I=c,_=g[I];T.unshift(B),_!=null&&T.unshift(_),B=p[I],B!=null;)I=B.id(),_=g[I];return{found:!0,distance:f[w],path:this.spawn(T),steps:x}}h[w]=!0;for(var D=b._private.edges,A=0;A<D.length;A++){var O=D[A];if(this.hasElementWithId(O.id())&&!(o&&O.data("source")!==w)){var k=O.source(),P=O.target(),M=k.id()!==w?k:P,F=M.id();if(this.hasElementWithId(F)&&!h[F]){var W=f[w]+u(O);if(!E(F)){f[F]=W,d[F]=W+s(M),m(M,F),p[F]=b,g[F]=O;continue}W<f[F]&&(f[F]=W,d[F]=W+s(M),p[F]=b,g[F]=O)}}}}return{found:!1,distance:void 0,path:void 0,steps:x}}},nS=Yt({weight:function(e){return 1},directed:!1}),aS={floydWarshall:function(e){for(var t=this.cy(),n=nS(e),a=n.weight,i=n.directed,s=a,o=this.byGroup(),u=o.nodes,l=o.edges,c=u.length,f=c*c,d=function(X){return u.indexOf(X)},h=function(X){return u[X]},v=new Array(f),y=0;y<f;y++){var p=y%c,g=(y-p)/c;g===p?v[y]=0:v[y]=1/0}for(var m=new Array(f),b=new Array(f),w=0;w<l.length;w++){var S=l[w],E=S.source()[0],x=S.target()[0];if(E!==x){var T=d(E),B=d(x),I=T*c+B,_=s(S);if(v[I]>_&&(v[I]=_,m[I]=B,b[I]=S),!i){var D=B*c+T;!i&&v[D]>_&&(v[D]=_,m[D]=T,b[D]=S)}}}for(var A=0;A<c;A++)for(var O=0;O<c;O++)for(var k=O*c+A,P=0;P<c;P++){var M=O*c+P,F=A*c+P;v[k]+v[F]<v[M]&&(v[M]=v[k]+v[F],m[M]=m[k])}var W=function(X){return(ge(X)?t.filter(X):X)[0]},H=function(X){return d(W(X))},z={distance:function(X,te){var R=H(X),L=H(te);return v[R*c+L]},path:function(X,te){var R=H(X),L=H(te),K=h(R);if(R===L)return K.collection();if(m[R*c+L]==null)return t.collection();var ne=t.collection(),Y=R,N;for(ne.merge(K);R!==L;)Y=R,R=m[R*c+L],N=b[Y*c+R],ne.merge(N),ne.merge(h(R));return ne}};return z}},iS=Yt({weight:function(e){return 1},directed:!1,root:null}),sS={bellmanFord:function(e){var t=this,n=iS(e),a=n.weight,i=n.directed,s=n.root,o=a,u=this,l=this.cy(),c=this.byGroup(),f=c.edges,d=c.nodes,h=d.length,v=new Sn,y=!1,p=[];s=l.collection(s)[0],f.unmergeBy(function(Ce){return Ce.isLoop()});for(var g=f.length,m=function(Se){var me=v.get(Se.id());return me||(me={},v.set(Se.id(),me)),me},b=function(Se){return(ge(Se)?l.$(Se):Se)[0]},w=function(Se){return m(b(Se)).dist},S=function(Se){for(var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s,se=b(Se),ve=[],pe=se;;){if(pe==null)return t.spawn();var Ee=m(pe),ye=Ee.edge,Ne=Ee.pred;if(ve.unshift(pe[0]),pe.same(me)&&ve.length>0)break;ye!=null&&ve.unshift(ye),pe=Ne}return u.spawn(ve)},E=0;E<h;E++){var x=d[E],T=m(x);x.same(s)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var B=!1,I=function(Se,me,se,ve,pe,Ee){var ye=ve.dist+Ee;ye<pe.dist&&!se.same(ve.edge)&&(pe.dist=ye,pe.pred=Se,pe.edge=se,B=!0)},_=1;_<h;_++){B=!1;for(var D=0;D<g;D++){var A=f[D],O=A.source(),k=A.target(),P=o(A),M=m(O),F=m(k);I(O,k,A,M,F,P),i||I(k,O,A,F,M,P)}if(!B)break}if(B)for(var W=[],H=0;H<g;H++){var z=f[H],$=z.source(),X=z.target(),te=o(z),R=m($).dist,L=m(X).dist;if(R+te<L||!i&&L+te<R)if(y||(ot("Graph contains a negative weight cycle for Bellman-Ford"),y=!0),e.findNegativeWeightCycles!==!1){var K=[];R+te<L&&K.push($),!i&&L+te<R&&K.push(X);for(var ne=K.length,Y=0;Y<ne;Y++){var N=K[Y],V=[N];V.push(m(N).edge);for(var U=m(N).pred;V.indexOf(U)===-1;)V.push(U),V.push(m(U).edge),U=m(U).pred;V=V.slice(V.indexOf(U));for(var j=V[0].id(),ae=0,he=2;he<V.length;he+=2)V[he].id()<j&&(j=V[he].id(),ae=he);V=V.slice(ae).concat(V.slice(0,ae)),V.push(V[0]);var Ge=V.map(function(Ce){return Ce.id()}).join(",");W.indexOf(Ge)===-1&&(p.push(u.spawn(V)),W.push(Ge))}}else break}return{distanceTo:w,pathTo:S,hasNegativeWeightCycle:y,negativeWeightCycles:p}}},oS=Math.sqrt(2),uS=function(e,t,n){n.length===0&&bt("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],s=a[2],o=t[i],u=t[s],l=n,c=l.length-1;c>=0;c--){var f=l[c],d=f[1],h=f[2];(t[d]===o&&t[h]===u||t[d]===u&&t[h]===o)&&l.splice(c,1)}for(var v=0;v<l.length;v++){var y=l[v];y[1]===u?(l[v]=y.slice(),l[v][1]=o):y[2]===u&&(l[v]=y.slice(),l[v][2]=o)}for(var p=0;p<t.length;p++)t[p]===u&&(t[p]=o);return l},al=function(e,t,n,a){for(;n>a;){var i=Math.floor(Math.random()*t.length);t=uS(i,e,t),n--}return t},lS={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,a=t.edges;a.unmergeBy(function(F){return F.isLoop()});var i=n.length,s=a.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),u=Math.floor(i/oS);if(i<2){bt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var l=[],c=0;c<s;c++){var f=a[c];l.push([c,n.indexOf(f.source()),n.indexOf(f.target())])}for(var d=1/0,h=[],v=new Array(i),y=new Array(i),p=new Array(i),g=function(W,H){for(var z=0;z<i;z++)H[z]=W[z]},m=0;m<=o;m++){for(var b=0;b<i;b++)y[b]=b;var w=al(y,l.slice(),i,u),S=w.slice();g(y,p);var E=al(y,w,u,2),x=al(p,S,u,2);E.length<=x.length&&E.length<d?(d=E.length,h=E,g(y,v)):x.length<=E.length&&x.length<d&&(d=x.length,h=x,g(p,v))}for(var T=this.spawn(h.map(function(F){return a[F[0]]})),B=this.spawn(),I=this.spawn(),_=v[0],D=0;D<v.length;D++){var A=v[D],O=n[D];A===_?B.merge(O):I.merge(O)}var k=function(W){var H=e.spawn();return W.forEach(function(z){H.merge(z),z.connectedEdges().forEach(function($){e.contains($)&&!T.contains($)&&H.merge($)})}),H},P=[k(B),k(I)],M={cut:T,components:P,partition1:B,partition2:I};return M}},il,cS=function(e){return{x:e.x,y:e.y}},vu=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},hy=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},Ja=function(e){return{x:e[0],y:e[1]}},fS=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=t;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.min(s,a))}return a},dS=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=t;i<n;i++){var s=e[i];isFinite(s)&&(a=Math.max(s,a))}return a},hS=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,s=t;s<n;s++){var o=e[s];isFinite(o)&&(a+=o,i++)}return a/i},vS=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var o=0,u=e.length-1;u>=0;u--){var l=e[u];s?isFinite(l)||(e[u]=-1/0,o++):e.splice(u,1)}i&&e.sort(function(d,h){return d-h});var c=e.length,f=Math.floor(c/2);return c%2!==0?e[f+1+o]:(e[f-1+o]+e[f+o])/2},pS=function(e){return Math.PI*e/180},Us=function(e,t){return Math.atan2(t,e)-Math.PI/2},Pf=Math.log2||function(r){return Math.log(r)/Math.log(2)},Lf=function(e){return e>0?1:e<0?-1:0},Da=function(e,t){return Math.sqrt(va(e,t))},va=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},gS=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},Ut=function(e,t,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n},oi=function(e,t,n,a){return{x:Ut(e.x,t.x,n.x,a),y:Ut(e.y,t.y,n.y,a)}},yS=function(e,t,n,a){var i={x:t.x-e.x,y:t.y-e.y},s=Da(e,t),o={x:i.x/s,y:i.y/s};return n=n??0,a=a??n*s,{x:e.x+o.x*a,y:e.y+o.y*a}},us=function(e,t,n){return Math.max(e,Math.min(n,t))},ar=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},mS=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},bS=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},wS=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},vy=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},so=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},oo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,s;if(t.length===1)n=a=i=s=t[0];else if(t.length===2)n=i=t[0],s=a=t[1];else if(t.length===4){var o=Dt(t,4);n=o[0],a=o[1],i=o[2],s=o[3]}return e.x1-=s,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Jd=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},Ff=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},zn=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},eh=function(e,t){return zn(e,t.x,t.y)},py=function(e,t){return zn(e,t.x1,t.y1)&&zn(e,t.x2,t.y2)},SS=(il=Math.hypot)!==null&&il!==void 0?il:function(r,e){return Math.sqrt(r*r+e*e)};function xS(r,e){if(r.length<3)throw new Error("Need at least 3 vertices");var t=function(T,B){return{x:T.x+B.x,y:T.y+B.y}},n=function(T,B){return{x:T.x-B.x,y:T.y-B.y}},a=function(T,B){return{x:T.x*B,y:T.y*B}},i=function(T,B){return T.x*B.y-T.y*B.x},s=function(T){var B=SS(T.x,T.y);return B===0?{x:0,y:0}:{x:T.x/B,y:T.y/B}},o=function(T){for(var B=0,I=0;I<T.length;I++){var _=T[I],D=T[(I+1)%T.length];B+=_.x*D.y-D.x*_.y}return B/2},u=function(T,B,I,_){var D=n(B,T),A=n(_,I),O=i(D,A);if(Math.abs(O)<1e-9)return t(T,a(D,.5));var k=i(n(I,T),A)/O;return t(T,a(D,k))},l=r.map(function(x){return{x:x.x,y:x.y}});o(l)<0&&l.reverse();for(var c=l.length,f=[],d=0;d<c;d++){var h=l[d],v=l[(d+1)%c],y=n(v,h),p=s({x:y.y,y:-y.x});f.push(p)}for(var g=f.map(function(x,T){var B=t(l[T],a(x,e)),I=t(l[(T+1)%c],a(x,e));return{p1:B,p2:I}}),m=[],b=0;b<c;b++){var w=g[(b-1+c)%c],S=g[b],E=u(w.p1,w.p2,S.p1,S.p2);m.push(E)}return m}function ES(r,e,t,n,a,i){var s=OS(r,e,t,n,a),o=xS(s,i),u=ar();return o.forEach(function(l){return vy(u,l.x,l.y)}),u}var gy=function(e,t,n,a,i,s,o){var u=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",l=u==="auto"?Qn(i,s):u,c=i/2,f=s/2;l=Math.min(l,c,f);var d=l!==c,h=l!==f,v;if(d){var y=n-c+l-o,p=a-f-o,g=n+c-l+o,m=p;if(v=Vn(e,t,n,a,y,p,g,m,!1),v.length>0)return v}if(h){var b=n+c+o,w=a-f+l-o,S=b,E=a+f-l+o;if(v=Vn(e,t,n,a,b,w,S,E,!1),v.length>0)return v}if(d){var x=n-c+l-o,T=a+f+o,B=n+c-l+o,I=T;if(v=Vn(e,t,n,a,x,T,B,I,!1),v.length>0)return v}if(h){var _=n-c-o,D=a-f+l-o,A=_,O=a+f-l+o;if(v=Vn(e,t,n,a,_,D,A,O,!1),v.length>0)return v}var k;{var P=n-c+l,M=a-f+l;if(k=$i(e,t,n,a,P,M,l+o),k.length>0&&k[0]<=P&&k[1]<=M)return[k[0],k[1]]}{var F=n+c-l,W=a-f+l;if(k=$i(e,t,n,a,F,W,l+o),k.length>0&&k[0]>=F&&k[1]<=W)return[k[0],k[1]]}{var H=n+c-l,z=a+f-l;if(k=$i(e,t,n,a,H,z,l+o),k.length>0&&k[0]>=H&&k[1]>=z)return[k[0],k[1]]}{var $=n-c+l,X=a+f-l;if(k=$i(e,t,n,a,$,X,l+o),k.length>0&&k[0]<=$&&k[1]>=X)return[k[0],k[1]]}return[]},TS=function(e,t,n,a,i,s,o){var u=o,l=Math.min(n,i),c=Math.max(n,i),f=Math.min(a,s),d=Math.max(a,s);return l-u<=e&&e<=c+u&&f-u<=t&&t<=d+u},CS=function(e,t,n,a,i,s,o,u,l){var c={x1:Math.min(n,o,i)-l,x2:Math.max(n,o,i)+l,y1:Math.min(a,u,s)-l,y2:Math.max(a,u,s)+l};return!(e<c.x1||e>c.x2||t<c.y1||t>c.y2)},BS=function(e,t,n,a){n-=a;var i=t*t-4*e*n;if(i<0)return[];var s=Math.sqrt(i),o=2*e,u=(-t+s)/o,l=(-t-s)/o;return[u,l]},IS=function(e,t,n,a,i){var s=1e-5;e===0&&(e=s),t/=e,n/=e,a/=e;var o,u,l,c,f,d,h,v;if(u=(3*n-t*t)/9,l=-(27*a)+t*(9*n-2*(t*t)),l/=54,o=u*u*u+l*l,i[1]=0,h=t/3,o>0){f=l+Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),d=l-Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),i[0]=-h+f+d,h+=(f+d)/2,i[4]=i[2]=-h,h=Math.sqrt(3)*(-d+f)/2,i[3]=h,i[5]=-h;return}if(i[5]=i[3]=0,o===0){v=l<0?-Math.pow(-l,1/3):Math.pow(l,1/3),i[0]=-h+2*v,i[4]=i[2]=-(v+h);return}u=-u,c=u*u*u,c=Math.acos(l/Math.sqrt(c)),v=2*Math.sqrt(u),i[0]=-h+v*Math.cos(c/3),i[2]=-h+v*Math.cos((c+2*Math.PI)/3),i[4]=-h+v*Math.cos((c+4*Math.PI)/3)},_S=function(e,t,n,a,i,s,o,u){var l=1*n*n-4*n*i+2*n*o+4*i*i-4*i*o+o*o+a*a-4*a*s+2*a*u+4*s*s-4*s*u+u*u,c=9*n*i-3*n*n-3*n*o-6*i*i+3*i*o+9*a*s-3*a*a-3*a*u-6*s*s+3*s*u,f=3*n*n-6*n*i+n*o-n*e+2*i*i+2*i*e-o*e+3*a*a-6*a*s+a*u-a*t+2*s*s+2*s*t-u*t,d=1*n*i-n*n+n*e-i*e+a*s-a*a+a*t-s*t,h=[];IS(l,c,f,d,h);for(var v=1e-7,y=[],p=0;p<6;p+=2)Math.abs(h[p+1])<v&&h[p]>=0&&h[p]<=1&&y.push(h[p]);y.push(1),y.push(0);for(var g=-1,m,b,w,S=0;S<y.length;S++)m=Math.pow(1-y[S],2)*n+2*(1-y[S])*y[S]*i+y[S]*y[S]*o,b=Math.pow(1-y[S],2)*a+2*(1-y[S])*y[S]*s+y[S]*y[S]*u,w=Math.pow(m-e,2)+Math.pow(b-t,2),g>=0?w<g&&(g=w):g=w;return g},DS=function(e,t,n,a,i,s){var o=[e-n,t-a],u=[i-n,s-a],l=u[0]*u[0]+u[1]*u[1],c=o[0]*o[0]+o[1]*o[1],f=o[0]*u[0]+o[1]*u[1],d=f*f/l;return f<0?c:d>l?(e-i)*(e-i)+(t-s)*(t-s):c-d},hr=function(e,t,n){for(var a,i,s,o,u,l=0,c=0;c<n.length/2;c++)if(a=n[c*2],i=n[c*2+1],c+1<n.length/2?(s=n[(c+1)*2],o=n[(c+1)*2+1]):(s=n[(c+1-n.length/2)*2],o=n[(c+1-n.length/2)*2+1]),!(a==e&&s==e))if(a>=e&&e>=s||a<=e&&e<=s)u=(e-a)/(s-a)*(o-i)+i,u>t&&l++;else continue;return l%2!==0},Bn=function(e,t,n,a,i,s,o,u,l){var c=new Array(n.length),f;u[0]!=null?(f=Math.atan(u[1]/u[0]),u[0]<0?f=f+Math.PI/2:f=-f-Math.PI/2):f=u;for(var d=Math.cos(-f),h=Math.sin(-f),v=0;v<c.length/2;v++)c[v*2]=s/2*(n[v*2]*d-n[v*2+1]*h),c[v*2+1]=o/2*(n[v*2+1]*d+n[v*2]*h),c[v*2]+=a,c[v*2+1]+=i;var y;if(l>0){var p=Qo(c,-l);y=Zo(p)}else y=c;return hr(e,t,y)},AS=function(e,t,n,a,i,s,o,u){for(var l=new Array(n.length*2),c=0;c<u.length;c++){var f=u[c];l[c*4+0]=f.startX,l[c*4+1]=f.startY,l[c*4+2]=f.stopX,l[c*4+3]=f.stopY;var d=Math.pow(f.cx-e,2)+Math.pow(f.cy-t,2);if(d<=Math.pow(f.radius,2))return!0}return hr(e,t,l)},Zo=function(e){for(var t=new Array(e.length/2),n,a,i,s,o,u,l,c,f=0;f<e.length/4;f++){n=e[f*4],a=e[f*4+1],i=e[f*4+2],s=e[f*4+3],f<e.length/4-1?(o=e[(f+1)*4],u=e[(f+1)*4+1],l=e[(f+1)*4+2],c=e[(f+1)*4+3]):(o=e[0],u=e[1],l=e[2],c=e[3]);var d=Vn(n,a,i,s,o,u,l,c,!0);t[f*2]=d[0],t[f*2+1]=d[1]}return t},Qo=function(e,t){for(var n=new Array(e.length*2),a,i,s,o,u=0;u<e.length/2;u++){a=e[u*2],i=e[u*2+1],u<e.length/2-1?(s=e[(u+1)*2],o=e[(u+1)*2+1]):(s=e[0],o=e[1]);var l=o-i,c=-(s-a),f=Math.sqrt(l*l+c*c),d=l/f,h=c/f;n[u*4]=a+d*t,n[u*4+1]=i+h*t,n[u*4+2]=s+d*t,n[u*4+3]=o+h*t}return n},RS=function(e,t,n,a,i,s){var o=n-e,u=a-t;o/=i,u/=s;var l=Math.sqrt(o*o+u*u),c=l-1;if(c<0)return[];var f=c/l;return[(n-e)*f+e,(a-t)*f+t]},Ta=function(e,t,n,a,i,s,o){return e-=i,t-=s,e/=n/2+o,t/=a/2+o,e*e+t*t<=1},$i=function(e,t,n,a,i,s,o){var u=[n-e,a-t],l=[e-i,t-s],c=u[0]*u[0]+u[1]*u[1],f=2*(l[0]*u[0]+l[1]*u[1]),d=l[0]*l[0]+l[1]*l[1]-o*o,h=f*f-4*c*d;if(h<0)return[];var v=(-f+Math.sqrt(h))/(2*c),y=(-f-Math.sqrt(h))/(2*c),p=Math.min(v,y),g=Math.max(v,y),m=[];if(p>=0&&p<=1&&m.push(p),g>=0&&g<=1&&m.push(g),m.length===0)return[];var b=m[0]*u[0]+e,w=m[0]*u[1]+t;if(m.length>1){if(m[0]==m[1])return[b,w];var S=m[1]*u[0]+e,E=m[1]*u[1]+t;return[b,w,S,E]}else return[b,w]},sl=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},Vn=function(e,t,n,a,i,s,o,u,l){var c=e-i,f=n-e,d=o-i,h=t-s,v=a-t,y=u-s,p=d*h-y*c,g=f*h-v*c,m=y*f-d*v;if(m!==0){var b=p/m,w=g/m,S=.001,E=0-S,x=1+S;return E<=b&&b<=x&&E<=w&&w<=x?[e+b*f,t+b*v]:l?[e+b*f,t+b*v]:[]}else return p===0||g===0?sl(e,n,o)===o?[o,u]:sl(e,n,i)===i?[i,s]:sl(i,o,n)===n?[n,a]:[]:[]},OS=function(e,t,n,a,i){var s=[],o=a/2,u=i/2,l=t,c=n;s.push({x:l+o*e[0],y:c+u*e[1]});for(var f=1;f<e.length/2;f++)s.push({x:l+o*e[f*2],y:c+u*e[f*2+1]});return s},ls=function(e,t,n,a,i,s,o,u){var l=[],c,f=new Array(n.length),d=!0;s==null&&(d=!1);var h;if(d){for(var v=0;v<f.length/2;v++)f[v*2]=n[v*2]*s+a,f[v*2+1]=n[v*2+1]*o+i;if(u>0){var y=Qo(f,-u);h=Zo(y)}else h=f}else h=n;for(var p,g,m,b,w=0;w<h.length/2;w++)p=h[w*2],g=h[w*2+1],w<h.length/2-1?(m=h[(w+1)*2],b=h[(w+1)*2+1]):(m=h[0],b=h[1]),c=Vn(e,t,a,i,p,g,m,b),c.length!==0&&l.push(c[0],c[1]);return l},MS=function(e,t,n,a,i,s,o,u,l){var c=[],f,d=new Array(n.length*2);l.forEach(function(m,b){b===0?(d[d.length-2]=m.startX,d[d.length-1]=m.startY):(d[b*4-2]=m.startX,d[b*4-1]=m.startY),d[b*4]=m.stopX,d[b*4+1]=m.stopY,f=$i(e,t,a,i,m.cx,m.cy,m.radius),f.length!==0&&c.push(f[0],f[1])});for(var h=0;h<d.length/4;h++)f=Vn(e,t,a,i,d[h*4],d[h*4+1],d[h*4+2],d[h*4+3],!1),f.length!==0&&c.push(f[0],f[1]);if(c.length>2){for(var v=[c[0],c[1]],y=Math.pow(v[0]-e,2)+Math.pow(v[1]-t,2),p=1;p<c.length/2;p++){var g=Math.pow(c[p*2]-e,2)+Math.pow(c[p*2+1]-t,2);g<=y&&(v[0]=c[p*2],v[1]=c[p*2+1],y=g)}return v}return c},qs=function(e,t,n){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=(i-n)/i;return s<0&&(s=1e-5),[t[0]+s*a[0],t[1]+s*a[1]]},er=function(e,t){var n=Mc(e,t);return n=yy(n),n},yy=function(e){for(var t,n,a=e.length/2,i=1/0,s=1/0,o=-1/0,u=-1/0,l=0;l<a;l++)t=e[2*l],n=e[2*l+1],i=Math.min(i,t),o=Math.max(o,t),s=Math.min(s,n),u=Math.max(u,n);for(var c=2/(o-i),f=2/(u-s),d=0;d<a;d++)t=e[2*d]=e[2*d]*c,n=e[2*d+1]=e[2*d+1]*f,i=Math.min(i,t),o=Math.max(o,t),s=Math.min(s,n),u=Math.max(u,n);if(s<-1)for(var h=0;h<a;h++)n=e[2*h+1]=e[2*h+1]+(-1-s);return e},Mc=function(e,t){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=t;for(var i=new Array(e*2),s,o=0;o<e;o++)s=o*n+a,i[2*o]=Math.cos(s),i[2*o+1]=Math.sin(-s);return i},Qn=function(e,t){return Math.min(e/4,t/4,8)},my=function(e,t){return Math.min(e/10,t/10,8)},Nf=function(){return 8},kS=function(e,t,n){return[e-2*t+n,2*(t-e),e]},kc=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function ol(r,e){function t(f){for(var d=[],h=0;h<f.length;h++){var v=f[h],y=f[(h+1)%f.length],p={x:y.x-v.x,y:y.y-v.y},g={x:-p.y,y:p.x},m=Math.sqrt(g.x*g.x+g.y*g.y);d.push({x:g.x/m,y:g.y/m})}return d}function n(f,d){var h=1/0,v=-1/0,y=vr(f),p;try{for(y.s();!(p=y.n()).done;){var g=p.value,m=g.x*d.x+g.y*d.y;h=Math.min(h,m),v=Math.max(v,m)}}catch(b){y.e(b)}finally{y.f()}return{min:h,max:v}}function a(f,d){return!(f.max<d.min||d.max<f.min)}var i=[].concat(Yo(t(r)),Yo(t(e))),s=vr(i),o;try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n(r,u),c=n(e,u);if(!a(l,c))return!1}}catch(f){s.e(f)}finally{s.f()}return!0}var PS=Yt({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),LS={pageRank:function(e){for(var t=PS(e),n=t.dampingFactor,a=t.precision,i=t.iterations,s=t.weight,o=this._private.cy,u=this.byGroup(),l=u.nodes,c=u.edges,f=l.length,d=f*f,h=c.length,v=new Array(d),y=new Array(f),p=(1-n)/f,g=0;g<f;g++){for(var m=0;m<f;m++){var b=g*f+m;v[b]=0}y[g]=0}for(var w=0;w<h;w++){var S=c[w],E=S.data("source"),x=S.data("target");if(E!==x){var T=l.indexOfId(E),B=l.indexOfId(x),I=s(S),_=B*f+T;v[_]+=I,y[T]+=I}}for(var D=1/f+p,A=0;A<f;A++)if(y[A]===0)for(var O=0;O<f;O++){var k=O*f+A;v[k]=D}else for(var P=0;P<f;P++){var M=P*f+A;v[M]=v[M]/y[A]+p}for(var F=new Array(f),W=new Array(f),H,z=0;z<f;z++)F[z]=1;for(var $=0;$<i;$++){for(var X=0;X<f;X++)W[X]=0;for(var te=0;te<f;te++)for(var R=0;R<f;R++){var L=te*f+R;W[te]+=v[L]*F[R]}gS(W),H=F,F=W,W=H;for(var K=0,ne=0;ne<f;ne++){var Y=H[ne]-F[ne];K+=Y*Y}if(K<a)break}var N={rank:function(U){return U=o.collection(U)[0],F[l.indexOf(U)]}};return N}},th=Yt({root:null,weight:function(e){return 1},directed:!1,alpha:0}),ui={degreeCentralityNormalized:function(e){e=th(e);var t=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var c={},f={},d=0,h=0,v=0;v<a;v++){var y=n[v],p=y.id();e.root=y;var g=this.degreeCentrality(e);d<g.indegree&&(d=g.indegree),h<g.outdegree&&(h=g.outdegree),c[p]=g.indegree,f[p]=g.outdegree}return{indegree:function(b){return d==0?0:(ge(b)&&(b=t.filter(b)),c[b.id()]/d)},outdegree:function(b){return h===0?0:(ge(b)&&(b=t.filter(b)),f[b.id()]/h)}}}else{for(var i={},s=0,o=0;o<a;o++){var u=n[o];e.root=u;var l=this.degreeCentrality(e);s<l.degree&&(s=l.degree),i[u.id()]=l.degree}return{degree:function(b){return s===0?0:(ge(b)&&(b=t.filter(b)),i[b.id()]/s)}}}},degreeCentrality:function(e){e=th(e);var t=this.cy(),n=this,a=e,i=a.root,s=a.weight,o=a.directed,u=a.alpha;if(i=t.collection(i)[0],o){for(var h=i.connectedEdges(),v=h.filter(function(E){return E.target().same(i)&&n.has(E)}),y=h.filter(function(E){return E.source().same(i)&&n.has(E)}),p=v.length,g=y.length,m=0,b=0,w=0;w<v.length;w++)m+=s(v[w]);for(var S=0;S<y.length;S++)b+=s(y[S]);return{indegree:Math.pow(p,1-u)*Math.pow(m,u),outdegree:Math.pow(g,1-u)*Math.pow(b,u)}}else{for(var l=i.connectedEdges().intersection(n),c=l.length,f=0,d=0;d<l.length;d++)f+=s(l[d]);return{degree:Math.pow(c,1-u)*Math.pow(f,u)}}}};ui.dc=ui.degreeCentrality;ui.dcn=ui.degreeCentralityNormalised=ui.degreeCentralityNormalized;var rh=Yt({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),li={closenessCentralityNormalized:function(e){for(var t=rh(e),n=t.harmonic,a=t.weight,i=t.directed,s=this.cy(),o={},u=0,l=this.nodes(),c=this.floydWarshall({weight:a,directed:i}),f=0;f<l.length;f++){for(var d=0,h=l[f],v=0;v<l.length;v++)if(f!==v){var y=c.distance(h,l[v]);n?d+=1/y:d+=y}n||(d=1/d),u<d&&(u=d),o[h.id()]=d}return{closeness:function(g){return u==0?0:(ge(g)?g=s.filter(g)[0].id():g=g.id(),o[g]/u)}}},closenessCentrality:function(e){var t=rh(e),n=t.root,a=t.weight,i=t.directed,s=t.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:a,directed:i}),u=0,l=this.nodes(),c=0;c<l.length;c++){var f=l[c];if(!f.same(n)){var d=o.distanceTo(f);s?u+=1/d:u+=d}}return s?u:1/u}};li.cc=li.closenessCentrality;li.ccn=li.closenessCentralityNormalised=li.closenessCentralityNormalized;var FS=Yt({weight:null,directed:!1}),Pc={betweennessCentrality:function(e){for(var t=FS(e),n=t.directed,a=t.weight,i=a!=null,s=this.cy(),o=this.nodes(),u={},l={},c=0,f={set:function(b,w){l[b]=w,w>c&&(c=w)},get:function(b){return l[b]}},d=0;d<o.length;d++){var h=o[d],v=h.id();n?u[v]=h.outgoers().nodes():u[v]=h.openNeighborhood().nodes(),f.set(v,0)}for(var y=function(){for(var b=o[p].id(),w=[],S={},E={},x={},T=new _s(function(te,R){return x[te]-x[R]}),B=0;B<o.length;B++){var I=o[B].id();S[I]=[],E[I]=0,x[I]=1/0}for(E[b]=1,x[b]=0,T.push(b);!T.empty();){var _=T.pop();if(w.push(_),i)for(var D=0;D<u[_].length;D++){var A=u[_][D],O=s.getElementById(_),k=void 0;O.edgesTo(A).length>0?k=O.edgesTo(A)[0]:k=A.edgesTo(O)[0];var P=a(k);A=A.id(),x[A]>x[_]+P&&(x[A]=x[_]+P,T.nodes.indexOf(A)<0?T.push(A):T.updateItem(A),E[A]=0,S[A]=[]),x[A]==x[_]+P&&(E[A]=E[A]+E[_],S[A].push(_))}else for(var M=0;M<u[_].length;M++){var F=u[_][M].id();x[F]==1/0&&(T.push(F),x[F]=x[_]+1),x[F]==x[_]+1&&(E[F]=E[F]+E[_],S[F].push(_))}}for(var W={},H=0;H<o.length;H++)W[o[H].id()]=0;for(;w.length>0;){for(var z=w.pop(),$=0;$<S[z].length;$++){var X=S[z][$];W[X]=W[X]+E[X]/E[z]*(1+W[z])}z!=o[p].id()&&f.set(z,f.get(z)+W[z])}},p=0;p<o.length;p++)y();var g={betweenness:function(b){var w=s.collection(b).id();return f.get(w)},betweennessNormalized:function(b){if(c==0)return 0;var w=s.collection(b).id();return f.get(w)/c}};return g.betweennessNormalised=g.betweennessNormalized,g}};Pc.bc=Pc.betweennessCentrality;var NS=Yt({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),zS=function(e){return NS(e)},VS=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a](e);return n},US=function(e,t,n){for(var a=0;a<t;a++)e[a*t+a]=n},by=function(e,t){for(var n,a=0;a<t;a++){n=0;for(var i=0;i<t;i++)n+=e[i*t+a];for(var s=0;s<t;s++)e[s*t+a]=e[s*t+a]/n}},qS=function(e,t,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var s=0;s<n;s++)a[i*n+s]=0;for(var o=0;o<n;o++)for(var u=0;u<n;u++)a[i*n+u]+=e[i*n+o]*t[o*n+u]}return a},$S=function(e,t,n){for(var a=e.slice(0),i=1;i<n;i++)e=qS(e,a,t);return e},WS=function(e,t,n){for(var a=new Array(t*t),i=0;i<t*t;i++)a[i]=Math.pow(e[i],n);return by(a,t),a},GS=function(e,t,n,a){for(var i=0;i<n;i++){var s=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),o=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);if(s!==o)return!1}return!0},HS=function(e,t,n,a){for(var i=[],s=0;s<t;s++){for(var o=[],u=0;u<t;u++)Math.round(e[s*t+u]*1e3)/1e3>0&&o.push(n[u]);o.length!==0&&i.push(a.collection(o))}return i},YS=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},KS=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&YS(e[t],e[n])&&e.splice(n,1);return e},nh=function(e){for(var t=this.nodes(),n=this.edges(),a=this.cy(),i=zS(e),s={},o=0;o<t.length;o++)s[t[o].id()]=o;for(var u=t.length,l=u*u,c=new Array(l),f,d=0;d<l;d++)c[d]=0;for(var h=0;h<n.length;h++){var v=n[h],y=s[v.source().id()],p=s[v.target().id()],g=VS(v,i.attributes);c[y*u+p]+=g,c[p*u+y]+=g}US(c,u,i.multFactor),by(c,u);for(var m=!0,b=0;m&&b<i.maxIterations;)m=!1,f=$S(c,u,i.expandFactor),c=WS(f,u,i.inflateFactor),GS(c,f,l,4)||(m=!0),b++;var w=HS(c,u,t,a);return w=KS(w),w},jS={markovClustering:nh,mcl:nh},XS=function(e){return e},wy=function(e,t){return Math.abs(t-e)},ah=function(e,t,n){return e+wy(t,n)},ih=function(e,t,n){return e+Math.pow(n-t,2)},ZS=function(e){return Math.sqrt(e)},QS=function(e,t,n){return Math.max(e,wy(t,n))},ki=function(e,t,n,a,i){for(var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:XS,o=a,u,l,c=0;c<e;c++)u=t(c),l=n(c),o=i(o,u,l);return s(o)},bi={euclidean:function(e,t,n){return e>=2?ki(e,t,n,0,ih,ZS):ki(e,t,n,0,ah)},squaredEuclidean:function(e,t,n){return ki(e,t,n,0,ih)},manhattan:function(e,t,n){return ki(e,t,n,0,ah)},max:function(e,t,n){return ki(e,t,n,-1/0,QS)}};bi["squared-euclidean"]=bi.squaredEuclidean;bi.squaredeuclidean=bi.squaredEuclidean;function pu(r,e,t,n,a,i){var s;return xt(r)?s=r:s=bi[r]||bi.euclidean,e===0&&xt(r)?s(a,i):s(e,t,n,a,i)}var JS=Yt({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),zf=function(e){return JS(e)},Jo=function(e,t,n,a,i){var s=i!=="kMedoids",o=s?function(f){return n[f]}:function(f){return a[f](n)},u=function(d){return a[d](t)},l=n,c=t;return pu(e,a.length,o,u,l,c)},ul=function(e,t,n){for(var a=n.length,i=new Array(a),s=new Array(a),o=new Array(t),u=null,l=0;l<a;l++)i[l]=e.min(n[l]).value,s[l]=e.max(n[l]).value;for(var c=0;c<t;c++){u=[];for(var f=0;f<a;f++)u[f]=Math.random()*(s[f]-i[f])+i[f];o[c]=u}return o},Sy=function(e,t,n,a,i){for(var s=1/0,o=0,u=0;u<t.length;u++){var l=Jo(n,e,t[u],a,i);l<s&&(s=l,o=u)}return o},xy=function(e,t,n){for(var a=[],i=null,s=0;s<t.length;s++)i=t[s],n[i.id()]===e&&a.push(i);return a},ex=function(e,t,n){return Math.abs(t-e)<=n},tx=function(e,t,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var s=Math.abs(e[a][i]-t[a][i]);if(s>n)return!1}return!0},rx=function(e,t,n){for(var a=0;a<n;a++)if(e===t[a])return!0;return!1},sh=function(e,t){var n=new Array(t);if(e.length<50)for(var a=0;a<t;a++){for(var i=e[Math.floor(Math.random()*e.length)];rx(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var s=0;s<t;s++)n[s]=e[Math.floor(Math.random()*e.length)];return n},oh=function(e,t,n){for(var a=0,i=0;i<t.length;i++)a+=Jo("manhattan",t[i],e,n,"kMedoids");return a},nx=function(e){var t=this.cy(),n=this.nodes(),a=null,i=zf(e),s=new Array(i.k),o={},u;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,u=ul(n,i.k,i.attributes)):Nt(i.testCentroids)==="object"?u=i.testCentroids:u=ul(n,i.k,i.attributes):u=ul(n,i.k,i.attributes);for(var l=!0,c=0;l&&c<i.maxIterations;){for(var f=0;f<n.length;f++)a=n[f],o[a.id()]=Sy(a,u,i.distance,i.attributes,"kMeans");l=!1;for(var d=0;d<i.k;d++){var h=xy(d,n,o);if(h.length!==0){for(var v=i.attributes.length,y=u[d],p=new Array(v),g=new Array(v),m=0;m<v;m++){g[m]=0;for(var b=0;b<h.length;b++)a=h[b],g[m]+=i.attributes[m](a);p[m]=g[m]/h.length,ex(p[m],y[m],i.sensitivityThreshold)||(l=!0)}u[d]=p,s[d]=t.collection(h)}}c++}return s},ax=function(e){var t=this.cy(),n=this.nodes(),a=null,i=zf(e),s=new Array(i.k),o,u={},l,c=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(Nt(i.testCentroids)==="object"?o=i.testCentroids:o=sh(n,i.k)):o=sh(n,i.k);for(var f=!0,d=0;f&&d<i.maxIterations;){for(var h=0;h<n.length;h++)a=n[h],u[a.id()]=Sy(a,o,i.distance,i.attributes,"kMedoids");f=!1;for(var v=0;v<o.length;v++){var y=xy(v,n,u);if(y.length!==0){c[v]=oh(o[v],y,i.attributes);for(var p=0;p<y.length;p++)l=oh(y[p],y,i.attributes),l<c[v]&&(c[v]=l,o[v]=y[p],f=!0);s[v]=t.collection(y)}}d++}return s},ix=function(e,t,n,a,i){for(var s,o,u=0;u<t.length;u++)for(var l=0;l<e.length;l++)a[u][l]=Math.pow(n[u][l],i.m);for(var c=0;c<e.length;c++)for(var f=0;f<i.attributes.length;f++){s=0,o=0;for(var d=0;d<t.length;d++)s+=a[d][c]*i.attributes[f](t[d]),o+=a[d][c];e[c][f]=s/o}},sx=function(e,t,n,a,i){for(var s=0;s<e.length;s++)t[s]=e[s].slice();for(var o,u,l,c=2/(i.m-1),f=0;f<n.length;f++)for(var d=0;d<a.length;d++){o=0;for(var h=0;h<n.length;h++)u=Jo(i.distance,a[d],n[f],i.attributes,"cmeans"),l=Jo(i.distance,a[d],n[h],i.attributes,"cmeans"),o+=Math.pow(u/l,c);e[d][f]=1/o}},ox=function(e,t,n,a){for(var i=new Array(n.k),s=0;s<i.length;s++)i[s]=[];for(var o,u,l=0;l<t.length;l++){o=-1/0,u=-1;for(var c=0;c<t[0].length;c++)t[l][c]>o&&(o=t[l][c],u=c);i[u].push(e[l])}for(var f=0;f<i.length;f++)i[f]=a.collection(i[f]);return i},uh=function(e){var t=this.cy(),n=this.nodes(),a=zf(e),i,s,o,u,l;u=new Array(n.length);for(var c=0;c<n.length;c++)u[c]=new Array(a.k);o=new Array(n.length);for(var f=0;f<n.length;f++)o[f]=new Array(a.k);for(var d=0;d<n.length;d++){for(var h=0,v=0;v<a.k;v++)o[d][v]=Math.random(),h+=o[d][v];for(var y=0;y<a.k;y++)o[d][y]=o[d][y]/h}s=new Array(a.k);for(var p=0;p<a.k;p++)s[p]=new Array(a.attributes.length);l=new Array(n.length);for(var g=0;g<n.length;g++)l[g]=new Array(a.k);for(var m=!0,b=0;m&&b<a.maxIterations;)m=!1,ix(s,n,o,l,a),sx(o,u,s,n,a),tx(o,u,a.sensitivityThreshold)||(m=!0),b++;return i=ox(n,o,a,t),{clusters:i,degreeOfMembership:o}},ux={kMeans:nx,kMedoids:ax,fuzzyCMeans:uh,fcm:uh},lx=Yt({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),cx={single:"min",complete:"max"},fx=function(e){var t=lx(e),n=cx[t.linkage];return n!=null&&(t.linkage=n),t},lh=function(e,t,n,a,i){for(var s=0,o=1/0,u,l=i.attributes,c=function(B,I){return pu(i.distance,l.length,function(_){return l[_](B)},function(_){return l[_](I)},B,I)},f=0;f<e.length;f++){var d=e[f].key,h=n[d][a[d]];h<o&&(s=d,o=h)}if(i.mode==="threshold"&&o>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var v=t[s],y=t[a[s]],p;i.mode==="dendrogram"?p={left:v,right:y,key:v.key}:p={value:v.value.concat(y.value),key:v.key},e[v.index]=p,e.splice(y.index,1),t[v.key]=p;for(var g=0;g<e.length;g++){var m=e[g];v.key===m.key?u=1/0:i.linkage==="min"?(u=n[v.key][m.key],n[v.key][m.key]>n[y.key][m.key]&&(u=n[y.key][m.key])):i.linkage==="max"?(u=n[v.key][m.key],n[v.key][m.key]<n[y.key][m.key]&&(u=n[y.key][m.key])):i.linkage==="mean"?u=(n[v.key][m.key]*v.size+n[y.key][m.key]*y.size)/(v.size+y.size):i.mode==="dendrogram"?u=c(m.value,v.value):u=c(m.value[0],v.value[0]),n[v.key][m.key]=n[m.key][v.key]=u}for(var b=0;b<e.length;b++){var w=e[b].key;if(a[w]===v.key||a[w]===y.key){for(var S=w,E=0;E<e.length;E++){var x=e[E].key;n[w][x]<n[w][S]&&(S=x)}a[w]=S}e[b].index=b}return v.key=y.key=v.index=y.index=null,!0},ei=function(e,t,n){e&&(e.value?t.push(e.value):(e.left&&ei(e.left,t),e.right&&ei(e.right,t)))},Lc=function(e,t){if(!e)return"";if(e.left&&e.right){var n=Lc(e.left,t),a=Lc(e.right,t),i=t.add({group:"nodes",data:{id:n+","+a}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Fc=function(e,t,n){if(!e)return[];var a=[],i=[],s=[];return t===0?(e.left&&ei(e.left,a),e.right&&ei(e.right,i),s=a.concat(i),[n.collection(s)]):t===1?e.value?[n.collection(e.value)]:(e.left&&ei(e.left,a),e.right&&ei(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=Fc(e.left,t-1,n)),e.right&&(i=Fc(e.right,t-1,n)),a.concat(i))},ch=function(e){for(var t=this.cy(),n=this.nodes(),a=fx(e),i=a.attributes,s=function(b,w){return pu(a.distance,i.length,function(S){return i[S](b)},function(S){return i[S](w)},b,w)},o=[],u=[],l=[],c=[],f=0;f<n.length;f++){var d={value:a.mode==="dendrogram"?n[f]:[n[f]],key:f,index:f};o[f]=d,c[f]=d,u[f]=[],l[f]=0}for(var h=0;h<o.length;h++)for(var v=0;v<=h;v++){var y=void 0;a.mode==="dendrogram"?y=h===v?1/0:s(o[h].value,o[v].value):y=h===v?1/0:s(o[h].value[0],o[v].value[0]),u[h][v]=y,u[v][h]=y,y<u[h][l[h]]&&(l[h]=v)}for(var p=lh(o,c,u,l,a);p;)p=lh(o,c,u,l,a);var g;return a.mode==="dendrogram"?(g=Fc(o[0],a.dendrogramDepth,t),a.addDendrogram&&Lc(o[0],t)):(g=new Array(o.length),o.forEach(function(m,b){m.key=m.index=null,g[b]=t.collection(m.value)})),g},dx={hierarchicalClustering:ch,hca:ch},hx=Yt({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),vx=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||bt("Damping must range on [0.5, 1).  Got: ".concat(t));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||ie(n)||bt("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),hx(e)},px=function(e,t,n,a){var i=function(o,u){return a[u](o)};return-pu(e,a.length,function(s){return i(t,s)},function(s){return i(n,s)},t,n)},gx=function(e,t){var n=null;return t==="median"?n=vS(e):t==="mean"?n=hS(e):t==="min"?n=fS(e):t==="max"?n=dS(e):n=t,n},yx=function(e,t,n){for(var a=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&a.push(i);return a},fh=function(e,t,n){for(var a=[],i=0;i<e;i++){for(var s=-1,o=-1/0,u=0;u<n.length;u++){var l=n[u];t[i*e+l]>o&&(s=l,o=t[i*e+l])}s>0&&a.push(s)}for(var c=0;c<n.length;c++)a[n[c]]=n[c];return a},mx=function(e,t,n){for(var a=fh(e,t,n),i=0;i<n.length;i++){for(var s=[],o=0;o<a.length;o++)a[o]===n[i]&&s.push(o);for(var u=-1,l=-1/0,c=0;c<s.length;c++){for(var f=0,d=0;d<s.length;d++)f+=t[s[d]*e+s[c]];f>l&&(u=c,l=f)}n[i]=s[u]}return a=fh(e,t,n),a},dh=function(e){for(var t=this.cy(),n=this.nodes(),a=vx(e),i={},s=0;s<n.length;s++)i[n[s].id()]=s;var o,u,l,c,f,d;o=n.length,u=o*o,l=new Array(u);for(var h=0;h<u;h++)l[h]=-1/0;for(var v=0;v<o;v++)for(var y=0;y<o;y++)v!==y&&(l[v*o+y]=px(a.distance,n[v],n[y],a.attributes));c=gx(l,a.preference);for(var p=0;p<o;p++)l[p*o+p]=c;f=new Array(u);for(var g=0;g<u;g++)f[g]=0;d=new Array(u);for(var m=0;m<u;m++)d[m]=0;for(var b=new Array(o),w=new Array(o),S=new Array(o),E=0;E<o;E++)b[E]=0,w[E]=0,S[E]=0;for(var x=new Array(o*a.minIterations),T=0;T<x.length;T++)x[T]=0;var B;for(B=0;B<a.maxIterations;B++){for(var I=0;I<o;I++){for(var _=-1/0,D=-1/0,A=-1,O=0,k=0;k<o;k++)b[k]=f[I*o+k],O=d[I*o+k]+l[I*o+k],O>=_?(D=_,_=O,A=k):O>D&&(D=O);for(var P=0;P<o;P++)f[I*o+P]=(1-a.damping)*(l[I*o+P]-_)+a.damping*b[P];f[I*o+A]=(1-a.damping)*(l[I*o+A]-D)+a.damping*b[A]}for(var M=0;M<o;M++){for(var F=0,W=0;W<o;W++)b[W]=d[W*o+M],w[W]=Math.max(0,f[W*o+M]),F+=w[W];F-=w[M],w[M]=f[M*o+M],F+=w[M];for(var H=0;H<o;H++)d[H*o+M]=(1-a.damping)*Math.min(0,F-w[H])+a.damping*b[H];d[M*o+M]=(1-a.damping)*(F-w[M])+a.damping*b[M]}for(var z=0,$=0;$<o;$++){var X=d[$*o+$]+f[$*o+$]>0?1:0;x[B%a.minIterations*o+$]=X,z+=X}if(z>0&&(B>=a.minIterations-1||B==a.maxIterations-1)){for(var te=0,R=0;R<o;R++){S[R]=0;for(var L=0;L<a.minIterations;L++)S[R]+=x[L*o+R];(S[R]===0||S[R]===a.minIterations)&&te++}if(te===o)break}}for(var K=yx(o,f,d),ne=mx(o,l,K),Y={},N=0;N<K.length;N++)Y[K[N]]=[];for(var V=0;V<n.length;V++){var U=i[n[V].id()],j=ne[U];j!=null&&Y[j].push(n[V])}for(var ae=new Array(K.length),he=0;he<K.length;he++)ae[he]=t.collection(Y[K[he]]);return ae},bx={affinityPropagation:dh,ap:dh},wx=Yt({root:void 0,directed:!1}),Sx={hierholzer:function(e){if(!Ke(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=wx(e),a=n.root,i=n.directed,s=this,o=!1,u,l,c;a&&(c=ge(a)?this.filter(a)[0].id():a[0].id());var f={},d={};i?s.forEach(function(m){var b=m.id();if(m.isNode()){var w=m.indegree(!0),S=m.outdegree(!0),E=w-S,x=S-w;E==1?u?o=!0:u=b:x==1?l?o=!0:l=b:(x>1||E>1)&&(o=!0),f[b]=[],m.outgoers().forEach(function(T){T.isEdge()&&f[b].push(T.id())})}else d[b]=[void 0,m.target().id()]}):s.forEach(function(m){var b=m.id();if(m.isNode()){var w=m.degree(!0);w%2&&(u?l?o=!0:l=b:u=b),f[b]=[],m.connectedEdges().forEach(function(S){return f[b].push(S.id())})}else d[b]=[m.source().id(),m.target().id()]});var h={found:!1,trail:void 0};if(o)return h;if(l&&u)if(i){if(c&&l!=c)return h;c=l}else{if(c&&l!=c&&u!=c)return h;c||(c=l)}else c||(c=s[0].id());var v=function(b){for(var w=b,S=[b],E,x,T;f[w].length;)E=f[w].shift(),x=d[E][0],T=d[E][1],w!=T?(f[T]=f[T].filter(function(B){return B!=E}),w=T):!i&&w!=x&&(f[x]=f[x].filter(function(B){return B!=E}),w=x),S.unshift(E),S.unshift(w);return S},y=[],p=[];for(p=v(c);p.length!=1;)f[p[0]].length==0?(y.unshift(s.getElementById(p.shift())),y.unshift(s.getElementById(p.shift()))):p=v(p.shift()).concat(p);y.unshift(s.getElementById(p.shift()));for(var g in f)if(f[g].length)return h;return h.found=!0,h.trail=this.spawn(y,!0),h}},$s=function(){var e=this,t={},n=0,a=0,i=[],s=[],o={},u=function(d,h){for(var v=s.length-1,y=[],p=e.spawn();s[v].x!=d||s[v].y!=h;)y.push(s.pop().edge),v--;y.push(s.pop().edge),y.forEach(function(g){var m=g.connectedNodes().intersection(e);p.merge(g),m.forEach(function(b){var w=b.id(),S=b.connectedEdges().intersection(e);p.merge(b),t[w].cutVertex?p.merge(S.filter(function(E){return E.isLoop()})):p.merge(S)})}),i.push(p)},l=function(d,h,v){d===v&&(a+=1),t[h]={id:n,low:n++,cutVertex:!1};var y=e.getElementById(h).connectedEdges().intersection(e);if(y.size()===0)i.push(e.spawn(e.getElementById(h)));else{var p,g,m,b;y.forEach(function(w){p=w.source().id(),g=w.target().id(),m=p===h?g:p,m!==v&&(b=w.id(),o[b]||(o[b]=!0,s.push({x:h,y:m,edge:w})),m in t?t[h].low=Math.min(t[h].low,t[m].id):(l(d,m,h),t[h].low=Math.min(t[h].low,t[m].low),t[h].id<=t[m].low&&(t[h].cutVertex=!0,u(h,m))))})}};e.forEach(function(f){if(f.isNode()){var d=f.id();d in t||(a=0,l(d,d),t[d].cutVertex=a>1)}});var c=Object.keys(t).filter(function(f){return t[f].cutVertex}).map(function(f){return e.getElementById(f)});return{cut:e.spawn(c),components:i}},xx={hopcroftTarjanBiconnected:$s,htbc:$s,htb:$s,hopcroftTarjanBiconnectedComponents:$s},Ws=function(){var e=this,t={},n=0,a=[],i=[],s=e.spawn(e),o=function(l){i.push(l),t[l]={index:n,low:n++,explored:!1};var c=e.getElementById(l).connectedEdges().intersection(e);if(c.forEach(function(y){var p=y.target().id();p!==l&&(p in t||o(p),t[p].explored||(t[l].low=Math.min(t[l].low,t[p].low)))}),t[l].index===t[l].low){for(var f=e.spawn();;){var d=i.pop();if(f.merge(e.getElementById(d)),t[d].low=t[l].index,t[d].explored=!0,d===l)break}var h=f.edgesWith(f),v=f.merge(h);a.push(v),s=s.difference(v)}};return e.forEach(function(u){if(u.isNode()){var l=u.id();l in t||o(l)}}),{cut:s,components:a}},Ex={tarjanStronglyConnected:Ws,tsc:Ws,tscc:Ws,tarjanStronglyConnectedComponents:Ws},Ey={};[os,J1,eS,rS,aS,sS,lS,LS,ui,li,Pc,jS,ux,dx,bx,Sx,xx,Ex].forEach(function(r){we(Ey,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var Ty=0,Cy=1,By=2,Vr=function(e){if(!(this instanceof Vr))return new Vr(e);this.id="Thenable/1.0.7",this.state=Ty,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Vr.prototype={fulfill:function(e){return hh(this,Cy,"fulfillValue",e)},reject:function(e){return hh(this,By,"rejectReason",e)},then:function(e,t){var n=this,a=new Vr;return n.onFulfilled.push(ph(e,a,"fulfill")),n.onRejected.push(ph(t,a,"reject")),Iy(n),a.proxy}};var hh=function(e,t,n,a){return e.state===Ty&&(e.state=t,e[n]=a,Iy(e)),e},Iy=function(e){e.state===Cy?vh(e,"onFulfilled",e.fulfillValue):e.state===By&&vh(e,"onRejected",e.rejectReason)},vh=function(e,t,n){if(e[t].length!==0){var a=e[t];e[t]=[];var i=function(){for(var o=0;o<a.length;o++)a[o](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},ph=function(e,t,n){return function(a){if(typeof e!="function")t[n].call(t,a);else{var i;try{i=e(a)}catch(s){t.reject(s);return}_y(t,i)}}},_y=function(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(Nt(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(t,function(i){a||(a=!0,i===t?e.reject(new TypeError("circular thenable chain")):_y(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(t)};Vr.all=function(r){return new Vr(function(e,t){for(var n=new Array(r.length),a=0,i=function(u,l){n[u]=l,a++,a===r.length&&e(n)},s=0;s<r.length;s++)(function(o){var u=r[o],l=u!=null&&u.then!=null;if(l)u.then(function(f){i(o,f)},function(f){t(f)});else{var c=u;i(o,c)}})(s)})};Vr.resolve=function(r){return new Vr(function(e,t){e(r)})};Vr.reject=function(r){return new Vr(function(e,t){t(r)})};var Ti=typeof Promise<"u"?Promise:Vr,Nc=function(e,t,n){var a=Df(e),i=!a,s=this._private=we({duration:1e3},t,n);if(s.target=e,s.style=s.style||s.css,s.started=!1,s.playing=!1,s.hooked=!1,s.applying=!1,s.progress=0,s.completes=[],s.frames=[],s.complete&&xt(s.complete)&&s.completes.push(s.complete),i){var o=e.position();s.startPosition=s.startPosition||{x:o.x,y:o.y},s.startStyle=s.startStyle||e.cy().style().getAnimationStartStyle(e,s.style)}if(a){var u=e.pan();s.startPan={x:u.x,y:u.y},s.startZoom=e.zoom()}this.length=1,this[0]=this},Aa=Nc.prototype;we(Aa,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),xr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(l,c){var f=e[l];f!=null&&(e[l]=e[c],e[c]=f)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],s=i.name,o=e.startStyle[s];e.startStyle[s]=i,e.style[a]=o}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Ti(function(a,i){n.push(function(){a()})})}});Aa.complete=Aa.completed;Aa.run=Aa.play;Aa.running=Aa.playing;var Tx={animated:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var s=a[0];if(s)return s._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var s=0;s<a.length;s++){var o=a[s];o._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this,u=!i,l=!u;if(!o.styleEnabled())return this;var c=o.style();t=we({},t,n);var f=Object.keys(t).length===0;if(f)return new Nc(s[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(l&&(t.style=c.getPropsList(t.style||t.css),t.css=void 0),l&&t.renderedPosition!=null){var d=t.renderedPosition,h=o.pan(),v=o.zoom();t.position=hy(d,v,h)}if(u&&t.panBy!=null){var y=t.panBy,p=o.pan();t.pan={x:p.x+y.x,y:p.y+y.y}}var g=t.center||t.centre;if(u&&g!=null){var m=o.getCenterPan(g.eles,t.zoom);m!=null&&(t.pan=m)}if(u&&t.fit!=null){var b=t.fit,w=o.getFitViewport(b.eles||b.boundingBox,b.padding);w!=null&&(t.pan=w.pan,t.zoom=w.zoom)}if(u&&Ke(t.zoom)){var S=o.getZoomedViewport(t.zoom);S!=null?(S.zoomed&&(t.zoom=S.zoom),S.panned&&(t.pan=S.pan)):t.zoom=null}return new Nc(s[0],t)}},animate:function(){return function(t,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(t=we({},t,n));for(var u=0;u<s.length;u++){var l=s[u],c=l.animated()&&(t.queue===void 0||t.queue),f=l.animation(t,c?{queue:!0}:void 0);f.play()}return this}},stop:function(){return function(t,n){var a=this,i=a.length!==void 0,s=i?a:[a],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var u=0;u<s.length;u++){for(var l=s[u],c=l._private,f=c.animation.current,d=0;d<f.length;d++){var h=f[d],v=h._private;n&&(v.duration=0)}t&&(c.animation.queue=[]),n||(c.animation.current=[])}return o.notify("draw"),this}}},ll,gh;function gu(){if(gh)return ll;gh=1;var r=Array.isArray;return ll=r,ll}var cl,yh;function Cx(){if(yh)return cl;yh=1;var r=gu(),e=Bs(),t=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,s){if(r(i))return!1;var o=typeof i;return o=="number"||o=="symbol"||o=="boolean"||i==null||e(i)?!0:n.test(i)||!t.test(i)||s!=null&&i in Object(s)}return cl=a,cl}var fl,mh;function Bx(){if(mh)return fl;mh=1;var r=ay(),e=Cs(),t="[object AsyncFunction]",n="[object Function]",a="[object GeneratorFunction]",i="[object Proxy]";function s(o){if(!e(o))return!1;var u=r(o);return u==n||u==a||u==t||u==i}return fl=s,fl}var dl,bh;function Ix(){if(bh)return dl;bh=1;var r=du(),e=r["__core-js_shared__"];return dl=e,dl}var hl,wh;function _x(){if(wh)return hl;wh=1;var r=Ix(),e=function(){var n=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function t(n){return!!e&&e in n}return hl=t,hl}var vl,Sh;function Dx(){if(Sh)return vl;Sh=1;var r=Function.prototype,e=r.toString;function t(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return vl=t,vl}var pl,xh;function Ax(){if(xh)return pl;xh=1;var r=Bx(),e=_x(),t=Cs(),n=Dx(),a=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,s=Function.prototype,o=Object.prototype,u=s.toString,l=o.hasOwnProperty,c=RegExp("^"+u.call(l).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(d){if(!t(d)||e(d))return!1;var h=r(d)?c:i;return h.test(n(d))}return pl=f,pl}var gl,Eh;function Rx(){if(Eh)return gl;Eh=1;function r(e,t){return e==null?void 0:e[t]}return gl=r,gl}var yl,Th;function Vf(){if(Th)return yl;Th=1;var r=Ax(),e=Rx();function t(n,a){var i=e(n,a);return r(i)?i:void 0}return yl=t,yl}var ml,Ch;function yu(){if(Ch)return ml;Ch=1;var r=Vf(),e=r(Object,"create");return ml=e,ml}var bl,Bh;function Ox(){if(Bh)return bl;Bh=1;var r=yu();function e(){this.__data__=r?r(null):{},this.size=0}return bl=e,bl}var wl,Ih;function Mx(){if(Ih)return wl;Ih=1;function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}return wl=r,wl}var Sl,_h;function kx(){if(_h)return Sl;_h=1;var r=yu(),e="__lodash_hash_undefined__",t=Object.prototype,n=t.hasOwnProperty;function a(i){var s=this.__data__;if(r){var o=s[i];return o===e?void 0:o}return n.call(s,i)?s[i]:void 0}return Sl=a,Sl}var xl,Dh;function Px(){if(Dh)return xl;Dh=1;var r=yu(),e=Object.prototype,t=e.hasOwnProperty;function n(a){var i=this.__data__;return r?i[a]!==void 0:t.call(i,a)}return xl=n,xl}var El,Ah;function Lx(){if(Ah)return El;Ah=1;var r=yu(),e="__lodash_hash_undefined__";function t(n,a){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=r&&a===void 0?e:a,this}return El=t,El}var Tl,Rh;function Fx(){if(Rh)return Tl;Rh=1;var r=Ox(),e=Mx(),t=kx(),n=Px(),a=Lx();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Tl=i,Tl}var Cl,Oh;function Nx(){if(Oh)return Cl;Oh=1;function r(){this.__data__=[],this.size=0}return Cl=r,Cl}var Bl,Mh;function Dy(){if(Mh)return Bl;Mh=1;function r(e,t){return e===t||e!==e&&t!==t}return Bl=r,Bl}var Il,kh;function mu(){if(kh)return Il;kh=1;var r=Dy();function e(t,n){for(var a=t.length;a--;)if(r(t[a][0],n))return a;return-1}return Il=e,Il}var _l,Ph;function zx(){if(Ph)return _l;Ph=1;var r=mu(),e=Array.prototype,t=e.splice;function n(a){var i=this.__data__,s=r(i,a);if(s<0)return!1;var o=i.length-1;return s==o?i.pop():t.call(i,s,1),--this.size,!0}return _l=n,_l}var Dl,Lh;function Vx(){if(Lh)return Dl;Lh=1;var r=mu();function e(t){var n=this.__data__,a=r(n,t);return a<0?void 0:n[a][1]}return Dl=e,Dl}var Al,Fh;function Ux(){if(Fh)return Al;Fh=1;var r=mu();function e(t){return r(this.__data__,t)>-1}return Al=e,Al}var Rl,Nh;function qx(){if(Nh)return Rl;Nh=1;var r=mu();function e(t,n){var a=this.__data__,i=r(a,t);return i<0?(++this.size,a.push([t,n])):a[i][1]=n,this}return Rl=e,Rl}var Ol,zh;function $x(){if(zh)return Ol;zh=1;var r=Nx(),e=zx(),t=Vx(),n=Ux(),a=qx();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Ol=i,Ol}var Ml,Vh;function Wx(){if(Vh)return Ml;Vh=1;var r=Vf(),e=du(),t=r(e,"Map");return Ml=t,Ml}var kl,Uh;function Gx(){if(Uh)return kl;Uh=1;var r=Fx(),e=$x(),t=Wx();function n(){this.size=0,this.__data__={hash:new r,map:new(t||e),string:new r}}return kl=n,kl}var Pl,qh;function Hx(){if(qh)return Pl;qh=1;function r(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}return Pl=r,Pl}var Ll,$h;function bu(){if($h)return Ll;$h=1;var r=Hx();function e(t,n){var a=t.__data__;return r(n)?a[typeof n=="string"?"string":"hash"]:a.map}return Ll=e,Ll}var Fl,Wh;function Yx(){if(Wh)return Fl;Wh=1;var r=bu();function e(t){var n=r(this,t).delete(t);return this.size-=n?1:0,n}return Fl=e,Fl}var Nl,Gh;function Kx(){if(Gh)return Nl;Gh=1;var r=bu();function e(t){return r(this,t).get(t)}return Nl=e,Nl}var zl,Hh;function jx(){if(Hh)return zl;Hh=1;var r=bu();function e(t){return r(this,t).has(t)}return zl=e,zl}var Vl,Yh;function Xx(){if(Yh)return Vl;Yh=1;var r=bu();function e(t,n){var a=r(this,t),i=a.size;return a.set(t,n),this.size+=a.size==i?0:1,this}return Vl=e,Vl}var Ul,Kh;function Zx(){if(Kh)return Ul;Kh=1;var r=Gx(),e=Yx(),t=Kx(),n=jx(),a=Xx();function i(s){var o=-1,u=s==null?0:s.length;for(this.clear();++o<u;){var l=s[o];this.set(l[0],l[1])}}return i.prototype.clear=r,i.prototype.delete=e,i.prototype.get=t,i.prototype.has=n,i.prototype.set=a,Ul=i,Ul}var ql,jh;function Qx(){if(jh)return ql;jh=1;var r=Zx(),e="Expected a function";function t(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new TypeError(e);var i=function(){var s=arguments,o=a?a.apply(this,s):s[0],u=i.cache;if(u.has(o))return u.get(o);var l=n.apply(this,s);return i.cache=u.set(o,l)||u,l};return i.cache=new(t.Cache||r),i}return t.Cache=r,ql=t,ql}var $l,Xh;function Jx(){if(Xh)return $l;Xh=1;var r=Qx(),e=500;function t(n){var a=r(n,function(s){return i.size===e&&i.clear(),s}),i=a.cache;return a}return $l=t,$l}var Wl,Zh;function Ay(){if(Zh)return Wl;Zh=1;var r=Jx(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t=/\\(\\)?/g,n=r(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(e,function(s,o,u,l){i.push(u?l.replace(t,"$1"):o||s)}),i});return Wl=n,Wl}var Gl,Qh;function Ry(){if(Qh)return Gl;Qh=1;function r(e,t){for(var n=-1,a=e==null?0:e.length,i=Array(a);++n<a;)i[n]=t(e[n],n,e);return i}return Gl=r,Gl}var Hl,Jh;function eE(){if(Jh)return Hl;Jh=1;var r=Rf(),e=Ry(),t=gu(),n=Bs(),a=r?r.prototype:void 0,i=a?a.toString:void 0;function s(o){if(typeof o=="string")return o;if(t(o))return e(o,s)+"";if(n(o))return i?i.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return Hl=s,Hl}var Yl,ev;function Oy(){if(ev)return Yl;ev=1;var r=eE();function e(t){return t==null?"":r(t)}return Yl=e,Yl}var Kl,tv;function My(){if(tv)return Kl;tv=1;var r=gu(),e=Cx(),t=Ay(),n=Oy();function a(i,s){return r(i)?i:e(i,s)?[i]:t(n(i))}return Kl=a,Kl}var jl,rv;function Uf(){if(rv)return jl;rv=1;var r=Bs();function e(t){if(typeof t=="string"||r(t))return t;var n=t+"";return n=="0"&&1/t==-1/0?"-0":n}return jl=e,jl}var Xl,nv;function tE(){if(nv)return Xl;nv=1;var r=My(),e=Uf();function t(n,a){a=r(a,n);for(var i=0,s=a.length;n!=null&&i<s;)n=n[e(a[i++])];return i&&i==s?n:void 0}return Xl=t,Xl}var Zl,av;function rE(){if(av)return Zl;av=1;var r=tE();function e(t,n,a){var i=t==null?void 0:r(t,n);return i===void 0?a:i}return Zl=e,Zl}var nE=rE(),aE=Ts(nE),Ql,iv;function iE(){if(iv)return Ql;iv=1;var r=Vf(),e=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch{}}();return Ql=e,Ql}var Jl,sv;function sE(){if(sv)return Jl;sv=1;var r=iE();function e(t,n,a){n=="__proto__"&&r?r(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}return Jl=e,Jl}var ec,ov;function oE(){if(ov)return ec;ov=1;var r=sE(),e=Dy(),t=Object.prototype,n=t.hasOwnProperty;function a(i,s,o){var u=i[s];(!(n.call(i,s)&&e(u,o))||o===void 0&&!(s in i))&&r(i,s,o)}return ec=a,ec}var tc,uv;function uE(){if(uv)return tc;uv=1;var r=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function t(n,a){var i=typeof n;return a=a??r,!!a&&(i=="number"||i!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<a}return tc=t,tc}var rc,lv;function lE(){if(lv)return rc;lv=1;var r=oE(),e=My(),t=uE(),n=Cs(),a=Uf();function i(s,o,u,l){if(!n(s))return s;o=e(o,s);for(var c=-1,f=o.length,d=f-1,h=s;h!=null&&++c<f;){var v=a(o[c]),y=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return s;if(c!=d){var p=h[v];y=l?l(p,v,h):void 0,y===void 0&&(y=n(p)?p:t(o[c+1])?[]:{})}r(h,v,y),h=h[v]}return s}return rc=i,rc}var nc,cv;function cE(){if(cv)return nc;cv=1;var r=lE();function e(t,n,a){return t==null?t:r(t,n,a)}return nc=e,nc}var fE=cE(),dE=Ts(fE),ac,fv;function hE(){if(fv)return ac;fv=1;function r(e,t){var n=-1,a=e.length;for(t||(t=Array(a));++n<a;)t[n]=e[n];return t}return ac=r,ac}var ic,dv;function vE(){if(dv)return ic;dv=1;var r=Ry(),e=hE(),t=gu(),n=Bs(),a=Ay(),i=Uf(),s=Oy();function o(u){return t(u)?r(u,i):n(u)?[u]:e(a(s(u)))}return ic=o,ic}var pE=vE(),gE=Ts(pE),yE={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=we({},t,e),function(a,i){var s=e,o=this,u=o.length!==void 0,l=u?o:[o],c=u?o[0]:o;if(ge(a)){var f=a.indexOf(".")!==-1,d=f&&gE(a);if(s.allowGetting&&i===void 0){var h;return c&&(s.beforeGet(c),d&&c._private[s.field][a]===void 0?h=aE(c._private[s.field],d):h=c._private[s.field][a]),h}else if(s.allowSetting&&i!==void 0){var v=!s.immutableKeys[a];if(v){var y=Kg({},a,i);s.beforeSet(o,y);for(var p=0,g=l.length;p<g;p++){var m=l[p];s.canSet(m)&&(d&&c._private[s.field][a]===void 0?dE(m._private[s.field],d,i):m._private[s.field][a]=i)}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}}}else if(s.allowSetting&&Ke(a)){var b=a,w,S,E=Object.keys(b);s.beforeSet(o,b);for(var x=0;x<E.length;x++){w=E[x],S=b[w];var T=!s.immutableKeys[w];if(T)for(var B=0;B<l.length;B++){var I=l[B];s.canSet(I)&&(I._private[s.field][w]=S)}}s.updateStyle&&o.updateStyle(),s.onSet(o),s.settingTriggersEvent&&o[s.triggerFnName](s.settingEvent)}else if(s.allowBinding&&xt(a)){var _=a;o.on(s.bindingEvent,_)}else if(s.allowGetting&&a===void 0){var D;return c&&(s.beforeGet(c),D=c._private[s.field]),D}return o}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=we({},t,e),function(a){var i=e,s=this,o=s.length!==void 0,u=o?s:[s];if(ge(a)){for(var l=a.split(/\s+/),c=l.length,f=0;f<c;f++){var d=l[f];if(!Xn(d)){var h=!i.immutableKeys[d];if(h)for(var v=0,y=u.length;v<y;v++)u[v]._private[i.field][d]=void 0}}i.triggerEvent&&s[i.triggerFnName](i.event)}else if(a===void 0){for(var p=0,g=u.length;p<g;p++)for(var m=u[p]._private[i.field],b=Object.keys(m),w=0;w<b.length;w++){var S=b[w],E=!i.immutableKeys[S];E&&(m[S]=void 0)}i.triggerEvent&&s[i.triggerFnName](i.event)}return s}}},mE={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,a){var i=this,s=Array.prototype.slice.call(arguments,0);return new Ti(function(o,u){var l=function(h){i.off.apply(i,f),o(h)},c=s.concat([l]),f=c.concat([]);i.on.apply(i,c)})}}},nt={};[Tx,yE,mE].forEach(function(r){we(nt,r)});var bE={animate:nt.animate(),animation:nt.animation(),animated:nt.animated(),clearQueue:nt.clearQueue(),delay:nt.delay(),delayAnimation:nt.delayAnimation(),stop:nt.stop()},uo={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(v){return n.push(v)}),n}else dt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Ei(e),s=0;s<t.length;s++){for(var o=t[s],u=o._private,l=u.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=l.has(d);if(!h){c=!0;break}}c||(c=l.size!==e.length),c&&(u.classes=i,a.push(o))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){dt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=t===void 0,i=[],s=0,o=n.length;s<o;s++)for(var u=n[s],l=u._private.classes,c=!1,f=0;f<e.length;f++){var d=e[f],h=l.has(d),v=!1;t||a&&!h?(l.add(d),v=!0):(!t||a&&h)&&(l.delete(d),v=!0),!c&&v&&(i.push(u),c=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};uo.className=uo.classNames=uo.classes;var Ye={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Ft,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ye.variable="(?:[\\w-.]|(?:\\\\"+Ye.metaChar+"))+";Ye.className="(?:[\\w-]|(?:\\\\"+Ye.metaChar+"))+";Ye.value=Ye.string+"|"+Ye.number;Ye.id=Ye.variable;(function(){var r,e,t;for(r=Ye.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],Ye.comparatorOp+="|@"+e;for(r=Ye.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(Ye.comparatorOp+="|\\!"+e)})();var ct=function(){return{checks:[]}},oe={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},zc=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return y1(r.selector,e.selector)}),wE=function(){for(var r={},e,t=0;t<zc.length;t++)e=zc[t],r[e.selector]=e.matches;return r}(),SE=function(e,t){return wE[e](t)},xE="("+zc.map(function(r){return r.selector}).join("|")+")",za=function(e){return e.replace(new RegExp("\\\\("+Ye.metaChar+")","g"),function(t,n){return n})},kn=function(e,t,n){e[e.length-1]=n},Vc=[{name:"group",query:!0,regex:"("+Ye.group+")",populate:function(e,t,n){var a=Dt(n,1),i=a[0];t.checks.push({type:oe.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:xE,populate:function(e,t,n){var a=Dt(n,1),i=a[0];t.checks.push({type:oe.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Ye.id+")",populate:function(e,t,n){var a=Dt(n,1),i=a[0];t.checks.push({type:oe.ID,value:za(i)})}},{name:"className",query:!0,regex:"\\.("+Ye.className+")",populate:function(e,t,n){var a=Dt(n,1),i=a[0];t.checks.push({type:oe.CLASS,value:za(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ye.variable+")\\s*\\]",populate:function(e,t,n){var a=Dt(n,1),i=a[0];t.checks.push({type:oe.DATA_EXIST,field:za(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ye.variable+")\\s*("+Ye.comparatorOp+")\\s*("+Ye.value+")\\s*\\]",populate:function(e,t,n){var a=Dt(n,3),i=a[0],s=a[1],o=a[2],u=new RegExp("^"+Ye.string+"$").exec(o)!=null;u?o=o.substring(1,o.length-1):o=parseFloat(o),t.checks.push({type:oe.DATA_COMPARE,field:za(i),operator:s,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ye.boolOp+")\\s*("+Ye.variable+")\\s*\\]",populate:function(e,t,n){var a=Dt(n,2),i=a[0],s=a[1];t.checks.push({type:oe.DATA_BOOL,field:za(s),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ye.meta+")\\s*("+Ye.comparatorOp+")\\s*("+Ye.number+")\\s*\\]\\]",populate:function(e,t,n){var a=Dt(n,3),i=a[0],s=a[1],o=a[2];t.checks.push({type:oe.META_COMPARE,field:za(i),operator:s,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:Ye.separator,populate:function(e,t){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,s=e[e.length-1];n!=null&&(s.subject=n,e.currentSubject=null),s.edgeCount=a,s.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=ct();return o}},{name:"directedEdge",separator:!0,regex:Ye.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=ct(),a=t,i=ct();return n.checks.push({type:oe.DIRECTED_EDGE,source:a,target:i}),kn(e,t,n),e.edgeCount++,i}else{var s=ct(),o=t,u=ct();return s.checks.push({type:oe.NODE_SOURCE,source:o,target:u}),kn(e,t,s),e.edgeCount++,u}}},{name:"undirectedEdge",separator:!0,regex:Ye.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=ct(),a=t,i=ct();return n.checks.push({type:oe.UNDIRECTED_EDGE,nodes:[a,i]}),kn(e,t,n),e.edgeCount++,i}else{var s=ct(),o=t,u=ct();return s.checks.push({type:oe.NODE_NEIGHBOR,node:o,neighbor:u}),kn(e,t,s),u}}},{name:"child",separator:!0,regex:Ye.child,populate:function(e,t){if(e.currentSubject==null){var n=ct(),a=ct(),i=e[e.length-1];return n.checks.push({type:oe.CHILD,parent:i,child:a}),kn(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var s=ct(),o=e[e.length-1],u=ct(),l=ct(),c=ct(),f=ct();return s.checks.push({type:oe.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:oe.TRUE}],f.checks.push({type:oe.TRUE}),u.checks.push({type:oe.PARENT,parent:f,child:c}),kn(e,o,s),e.currentSubject=l,e.compoundCount++,c}else{var d=ct(),h=ct(),v=[{type:oe.PARENT,parent:d,child:h}];return d.checks=t.checks,t.checks=v,e.compoundCount++,h}}},{name:"descendant",separator:!0,regex:Ye.descendant,populate:function(e,t){if(e.currentSubject==null){var n=ct(),a=ct(),i=e[e.length-1];return n.checks.push({type:oe.DESCENDANT,ancestor:i,descendant:a}),kn(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var s=ct(),o=e[e.length-1],u=ct(),l=ct(),c=ct(),f=ct();return s.checks.push({type:oe.COMPOUND_SPLIT,left:o,right:u,subject:l}),l.checks=t.checks,t.checks=[{type:oe.TRUE}],f.checks.push({type:oe.TRUE}),u.checks.push({type:oe.ANCESTOR,ancestor:f,descendant:c}),kn(e,o,s),e.currentSubject=l,e.compoundCount++,c}else{var d=ct(),h=ct(),v=[{type:oe.ANCESTOR,ancestor:d,descendant:h}];return d.checks=t.checks,t.checks=v,e.compoundCount++,h}}},{name:"subject",modifier:!0,regex:Ye.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return ot("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===oe.DIRECTED_EDGE?a.type=oe.NODE_TARGET:i===oe.UNDIRECTED_EDGE&&(a.type=oe.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Vc.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var EE=function(e){for(var t,n,a,i=0;i<Vc.length;i++){var s=Vc[i],o=s.name,u=e.match(s.regexObj);if(u!=null){n=u,t=s,a=o;var l=u[0];e=e.substring(l.length);break}}return{expr:t,match:n,name:a,remaining:e}},TE=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},CE=function(e){var t=this,n=t.inputText=e,a=t[0]=ct();for(t.length=1,n=TE(n);;){var i=EE(n);if(i.expr==null)return ot("The selector `"+e+"`is invalid"),!1;var s=i.match.slice(1),o=i.expr.populate(t,a,s);if(o===!1)return!1;if(o!=null&&(a=o),n=i.remaining,n.match(/^\s*$/))break}var u=t[t.length-1];t.currentSubject!=null&&(u.subject=t.currentSubject),u.edgeCount=t.edgeCount,u.compoundCount=t.compoundCount;for(var l=0;l<t.length;l++){var c=t[l];if(c.compoundCount>0&&c.edgeCount>0)return ot("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return ot("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&ot("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},BE=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},t=function(c){return ge(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},a=function(c,f){var d=c.type,h=c.value;switch(d){case oe.GROUP:{var v=e(h);return v.substring(0,v.length-1)}case oe.DATA_COMPARE:{var y=c.field,p=c.operator;return"["+y+n(e(p))+t(h)+"]"}case oe.DATA_BOOL:{var g=c.operator,m=c.field;return"["+e(g)+m+"]"}case oe.DATA_EXIST:{var b=c.field;return"["+b+"]"}case oe.META_COMPARE:{var w=c.operator,S=c.field;return"[["+S+n(e(w))+t(h)+"]]"}case oe.STATE:return h;case oe.ID:return"#"+h;case oe.CLASS:return"."+h;case oe.PARENT:case oe.CHILD:return i(c.parent,f)+n(">")+i(c.child,f);case oe.ANCESTOR:case oe.DESCENDANT:return i(c.ancestor,f)+" "+i(c.descendant,f);case oe.COMPOUND_SPLIT:{var E=i(c.left,f),x=i(c.subject,f),T=i(c.right,f);return E+(E.length>0?" ":"")+x+T}case oe.TRUE:return""}},i=function(c,f){return c.checks.reduce(function(d,h,v){return d+(f===c&&v===0?"$":"")+a(h,f)},"")},s="",o=0;o<this.length;o++){var u=this[o];s+=i(u,u.subject),this.length>1&&o<this.length-1&&(s+=", ")}return this.toStringCache=s,s},IE={parse:CE,toString:BE},ky=function(e,t,n){var a,i=ge(e),s=ie(e),o=ge(n),u,l,c=!1,f=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),f=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),c=!0),(i||o||c)&&(u=!i&&!s?"":""+e,l=""+n),c&&(e=u=u.toLowerCase(),n=l=l.toLowerCase()),t){case"*=":a=u.indexOf(l)>=0;break;case"$=":a=u.indexOf(l,u.length-l.length)>=0;break;case"^=":a=u.indexOf(l)===0;break;case"=":a=e===n;break;case">":d=!0,a=e>n;break;case">=":d=!0,a=e>=n;break;case"<":d=!0,a=e<n;break;case"<=":d=!0,a=e<=n;break;default:a=!1;break}return f&&(e!=null||!d)&&(a=!a),a},_E=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},DE=function(e){return e!==void 0},qf=function(e,t){return e.data(t)},AE=function(e,t){return e[t]()},Ct=[],yt=function(e,t){return e.checks.every(function(n){return Ct[n.type](n,t)})};Ct[oe.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};Ct[oe.STATE]=function(r,e){var t=r.value;return SE(t,e)};Ct[oe.ID]=function(r,e){var t=r.value;return e.id()===t};Ct[oe.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};Ct[oe.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return ky(AE(e,t),n,a)};Ct[oe.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return ky(qf(e,t),n,a)};Ct[oe.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return _E(qf(e,t),n)};Ct[oe.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,DE(qf(e,t))};Ct[oe.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],a=e.source(),i=e.target();return yt(t,a)&&yt(n,i)||yt(n,a)&&yt(t,i)};Ct[oe.NODE_NEIGHBOR]=function(r,e){return yt(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&yt(r.neighbor,t)})};Ct[oe.DIRECTED_EDGE]=function(r,e){return yt(r.source,e.source())&&yt(r.target,e.target())};Ct[oe.NODE_SOURCE]=function(r,e){return yt(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&yt(r.target,t)})};Ct[oe.NODE_TARGET]=function(r,e){return yt(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&yt(r.source,t)})};Ct[oe.CHILD]=function(r,e){return yt(r.child,e)&&yt(r.parent,e.parent())};Ct[oe.PARENT]=function(r,e){return yt(r.parent,e)&&e.children().some(function(t){return yt(r.child,t)})};Ct[oe.DESCENDANT]=function(r,e){return yt(r.descendant,e)&&e.ancestors().some(function(t){return yt(r.ancestor,t)})};Ct[oe.ANCESTOR]=function(r,e){return yt(r.ancestor,e)&&e.descendants().some(function(t){return yt(r.descendant,t)})};Ct[oe.COMPOUND_SPLIT]=function(r,e){return yt(r.subject,e)&&yt(r.left,e)&&yt(r.right,e)};Ct[oe.TRUE]=function(){return!0};Ct[oe.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};Ct[oe.FILTER]=function(r,e){var t=r.value;return t(e)};var RE=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===oe.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(i){for(var s=0;s<t.length;s++){var o=t[s];if(yt(o,i))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},OE=function(e){for(var t=this,n=0;n<t.length;n++){var a=t[n];if(yt(a,e))return!0}return!1},ME={matches:OE,filter:RE},Jn=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||ge(e)&&e.match(/^\s*$/)||(xr(e)?this.addQuery({checks:[{type:oe.COLLECTION,value:e.collection()}]}):xt(e)?this.addQuery({checks:[{type:oe.FILTER,value:e}]}):ge(e)?this.parse(e)||(this.invalid=!0):bt("A selector must be created from a string; found "))},ea=Jn.prototype;[IE,ME].forEach(function(r){return we(ea,r)});ea.text=function(){return this.inputText};ea.size=function(){return this.length};ea.eq=function(r){return this[r]};ea.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};ea.addQuery=function(r){this[this.length++]=r};ea.selector=ea.toString;var Un={allAre:function(e){var t=new Jn(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new Jn(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};Un.allAreNeighbours=Un.allAreNeighbors;Un.has=Un.contains;Un.equal=Un.equals=Un.same;var Or=function(e,t){return function(a,i,s,o){var u=a,l=this,c;if(u==null?c="":xr(u)&&u.length===1&&(c=u.id()),l.length===1&&c){var f=l[0]._private,d=f.traversalCache=f.traversalCache||{},h=d[t]=d[t]||[],v=_a(c),y=h[v];return y||(h[v]=e.call(l,a,i,s,o))}else return e.call(l,a,i,s,o)}},wi={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],s=i._private.parent;s&&t.push(s)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var a=this[n],i=a.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:Or(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(a){for(var i=0;i<a.length;i++){var s=a[i];t.push(s),s.children().nonempty()&&n(s.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function $f(r,e,t,n){for(var a=[],i=new Ei,s=r.cy(),o=s.hasCompoundNodes(),u=0;u<r.length;u++){var l=r[u];t?a.push(l):o&&n(a,i,l)}for(;a.length>0;){var c=a.shift();e(c),i.add(c.id()),o&&n(a,i,c)}return r}function Py(r,e,t){if(t.isParent())for(var n=t._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||r.push(i)}}wi.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return $f(this,r,e,Py)};function Ly(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}wi.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return $f(this,r,e,Ly)};function kE(r,e,t){Ly(r,e,t),Py(r,e,t)}wi.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return $f(this,r,e,kE)};wi.ancestors=wi.parents;var cs,Fy;cs=Fy={data:nt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:nt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:nt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:nt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:nt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:nt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};cs.attr=cs.data;cs.removeAttr=cs.removeData;var PE=Fy,wu={};function sc(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,a=t[0],i=a._private.edges,s=0;s<i.length;s++){var o=i[s];!e&&o.isLoop()||(n+=r(a,o))}return n}else return}}we(wu,{degree:sc(function(r,e){return e.source().same(e.target())?2:1}),indegree:sc(function(r,e){return e.target().same(r)?1:0}),outdegree:sc(function(r,e){return e.source().same(r)?1:0})});function Va(r,e){return function(t){for(var n,a=this.nodes(),i=0;i<a.length;i++){var s=a[i],o=s[r](t);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}we(wu,{minDegree:Va("degree",function(r,e){return r<e}),maxDegree:Va("degree",function(r,e){return r>e}),minIndegree:Va("indegree",function(r,e){return r<e}),maxIndegree:Va("indegree",function(r,e){return r>e}),minOutdegree:Va("outdegree",function(r,e){return r<e}),maxOutdegree:Va("outdegree",function(r,e){return r>e})});we(wu,{totalDegree:function(e){for(var t=0,n=this.nodes(),a=0;a<n.length;a++)t+=n[a].degree(e);return t}});var zr,Ny,zy=function(e,t,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var s=i._private.position,o={x:t.x!=null?t.x-s.x:0,y:t.y!=null?t.y-s.y:0};i.isParent()&&!(o.x===0&&o.y===0)&&i.children().shift(o,n),i.dirtyBoundingBoxCache()}}},hv={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){zy(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};zr=Ny={position:nt.data(hv),silentPosition:nt.data(we({},hv,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){zy(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Ke(e))t?this.silentPosition(e):this.position(e);else if(xt(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var s=this[i],o=void 0;(o=n(s,i))&&(t?s.silentPosition(o):s.position(o))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var a;if(Ke(e)?(a={x:ie(e.x)?e.x:0,y:ie(e.y)?e.y:0},n=t):ge(e)&&ie(t)&&(a={x:0,y:0},a[e]=t),a!=null){var i=this.cy();i.startBatch();for(var s=0;s<this.length;s++){var o=this[s];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var u=o.position(),l={x:u.x+a.x,y:u.y+a.y};n?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,t){return Ke(e)?this.shift(e,!0):ge(e)&&ie(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],a=this.cy(),i=a.zoom(),s=a.pan(),o=Ke(e)?e:void 0,u=o!==void 0||t!==void 0&&ge(e);if(n&&n.isNode())if(u)for(var l=0;l<this.length;l++){var c=this[l];t!==void 0?c.position(e,(t-s[e])/i):o!==void 0&&c.position(hy(o,i,s))}else{var f=n.position();return o=vu(f,i,s),e===void 0?o:o[e]}else if(!u)return;return this},relativePosition:function(e,t){var n=this[0],a=this.cy(),i=Ke(e)?e:void 0,s=i!==void 0||t!==void 0&&ge(e),o=a.hasCompoundNodes();if(n&&n.isNode())if(s)for(var u=0;u<this.length;u++){var l=this[u],c=o?l.parent():null,f=c&&c.length>0,d=f;f&&(c=c[0]);var h=d?c.position():{x:0,y:0};t!==void 0?l.position(e,t+h[e]):i!==void 0&&l.position({x:i.x+h.x,y:i.y+h.y})}else{var v=n.position(),y=o?n.parent():null,p=y&&y.length>0,g=p;p&&(y=y[0]);var m=g?y.position():{x:0,y:0};return i={x:v.x-m.x,y:v.y-m.y},e===void 0?i:i[e]}else if(!s)return;return this}};zr.modelPosition=zr.point=zr.position;zr.modelPositions=zr.points=zr.positions;zr.renderedPoint=zr.renderedPosition;zr.relativePoint=zr.relativePosition;var LE=Ny,ci,oa;ci=oa={};oa.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),a=t.pan(),i=e.x1*n+a.x,s=e.x2*n+a.x,o=e.y1*n+a.y,u=e.y2*n+a.y;return{x1:i,x2:s,y1:o,y2:u,w:s-i,h:u-o}};oa.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};oa.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(s){if(!s.isParent())return;var o=s._private,u=s.children(),l=s.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:s.pstyle("min-width").pfValue,left:s.pstyle("min-width-bias-left"),right:s.pstyle("min-width-bias-right")},height:{val:s.pstyle("min-height").pfValue,top:s.pstyle("min-height-bias-top"),bottom:s.pstyle("min-height-bias-bottom")}},f=u.boundingBox({includeLabels:l,includeOverlays:!1,useCache:!1}),d=o.position;(f.w===0||f.h===0)&&(f={w:s.pstyle("width").pfValue,h:s.pstyle("height").pfValue},f.x1=d.x-f.w/2,f.x2=d.x+f.w/2,f.y1=d.y-f.h/2,f.y2=d.y+f.h/2);function h(B,I,_){var D=0,A=0,O=I+_;return B>0&&O>0&&(D=I/O*B,A=_/O*B),{biasDiff:D,biasComplementDiff:A}}function v(B,I,_,D){if(_.units==="%")switch(D){case"width":return B>0?_.pfValue*B:0;case"height":return I>0?_.pfValue*I:0;case"average":return B>0&&I>0?_.pfValue*(B+I)/2:0;case"min":return B>0&&I>0?B>I?_.pfValue*I:_.pfValue*B:0;case"max":return B>0&&I>0?B>I?_.pfValue*B:_.pfValue*I:0;default:return 0}else return _.units==="px"?_.pfValue:0}var y=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(y=y*100/c.width.val);var p=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(p=p*100/c.width.val);var g=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(g=g*100/c.height.val);var m=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var b=h(c.width.val-f.w,y,p),w=b.biasDiff,S=b.biasComplementDiff,E=h(c.height.val-f.h,g,m),x=E.biasDiff,T=E.biasComplementDiff;o.autoPadding=v(f.w,f.h,s.pstyle("padding"),s.pstyle("padding-relative-to").value),o.autoWidth=Math.max(f.w,c.width.val),d.x=(-w+f.x1+f.x2+S)/2,o.autoHeight=Math.max(f.h,c.height.val),d.y=(-x+f.y1+f.y2+T)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||r)&&(t(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Rr=function(e){return e===1/0||e===-1/0?0:e},Fr=function(e,t,n,a,i){a-t===0||i-n===0||t==null||n==null||a==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Fn=function(e,t){return t==null?e:Fr(e,t.x1,t.y1,t.x2,t.y2)},Pi=function(e,t,n){return dr(e,t,n)},Gs=function(e,t,n){if(!t.cy().headless()){var a=t._private,i=a.rstyle,s=i.arrowWidth/2,o=t.pstyle(n+"-arrow-shape").value,u,l;if(o!=="none"){n==="source"?(u=i.srcX,l=i.srcY):n==="target"?(u=i.tgtX,l=i.tgtY):(u=i.midX,l=i.midY);var c=a.arrowBounds=a.arrowBounds||{},f=c[n]=c[n]||{};f.x1=u-s,f.y1=l-s,f.x2=u+s,f.y2=l+s,f.w=f.x2-f.x1,f.h=f.y2-f.y1,so(f,1),Fr(e,f.x1,f.y1,f.x2,f.y2)}}},oc=function(e,t,n){if(!t.cy().headless()){var a;n?a=n+"-":a="";var i=t._private,s=i.rstyle,o=t.pstyle(a+"label").strValue;if(o){var u=t.pstyle("text-halign"),l=t.pstyle("text-valign"),c=Pi(s,"labelWidth",n),f=Pi(s,"labelHeight",n),d=Pi(s,"labelX",n),h=Pi(s,"labelY",n),v=t.pstyle(a+"text-margin-x").pfValue,y=t.pstyle(a+"text-margin-y").pfValue,p=t.isEdge(),g=t.pstyle(a+"text-rotation"),m=t.pstyle("text-outline-width").pfValue,b=t.pstyle("text-border-width").pfValue,w=b/2,S=t.pstyle("text-background-padding").pfValue,E=2,x=f,T=c,B=T/2,I=x/2,_,D,A,O;if(p)_=d-B,D=d+B,A=h-I,O=h+I;else{switch(u.value){case"left":_=d-T,D=d;break;case"center":_=d-B,D=d+B;break;case"right":_=d,D=d+T;break}switch(l.value){case"top":A=h-x,O=h;break;case"center":A=h-I,O=h+I;break;case"bottom":A=h,O=h+x;break}}var k=v-Math.max(m,w)-S-E,P=v+Math.max(m,w)+S+E,M=y-Math.max(m,w)-S-E,F=y+Math.max(m,w)+S+E;_+=k,D+=P,A+=M,O+=F;var W=n||"main",H=i.labelBounds,z=H[W]=H[W]||{};z.x1=_,z.y1=A,z.x2=D,z.y2=O,z.w=D-_,z.h=O-A,z.leftPad=k,z.rightPad=P,z.topPad=M,z.botPad=F;var $=p&&g.strValue==="autorotate",X=g.pfValue!=null&&g.pfValue!==0;if($||X){var te=$?Pi(i.rstyle,"labelAngle",n):g.pfValue,R=Math.cos(te),L=Math.sin(te),K=(_+D)/2,ne=(A+O)/2;if(!p){switch(u.value){case"left":K=D;break;case"right":K=_;break}switch(l.value){case"top":ne=O;break;case"bottom":ne=A;break}}var Y=function(Ce,Se){return Ce=Ce-K,Se=Se-ne,{x:Ce*R-Se*L+K,y:Ce*L+Se*R+ne}},N=Y(_,A),V=Y(_,O),U=Y(D,A),j=Y(D,O);_=Math.min(N.x,V.x,U.x,j.x),D=Math.max(N.x,V.x,U.x,j.x),A=Math.min(N.y,V.y,U.y,j.y),O=Math.max(N.y,V.y,U.y,j.y)}var ae=W+"Rot",he=H[ae]=H[ae]||{};he.x1=_,he.y1=A,he.x2=D,he.y2=O,he.w=D-_,he.h=O-A,Fr(e,_,A,D,O),Fr(i.labelBounds.all,_,A,D,O)}return e}},vv=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,a=t.pstyle("outline-width").value,i=t.pstyle("outline-offset").value,s=a+i;Vy(e,t,n,s,"outside",s/2)}},Vy=function(e,t,n,a,i,s){if(!(n===0||a<=0||i==="inside")){var o=t.cy(),u=t.pstyle("shape").value,l=o.renderer().nodeShapes[u],c=t.position(),f=c.x,d=c.y,h=t.width(),v=t.height();if(l.hasMiterBounds){i==="center"&&(a/=2);var y=l.miterBounds(f,d,h,v,a);Fn(e,y)}else s!=null&&s>0&&oo(e,[s,s,s,s])}},FE=function(e,t){if(!t.cy().headless()){var n=t.pstyle("border-opacity").value,a=t.pstyle("border-width").pfValue,i=t.pstyle("border-position").value;Vy(e,t,n,a,i)}},NE=function(e,t){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),s=ar(),o=e._private,u=e.isNode(),l=e.isEdge(),c,f,d,h,v,y,p=o.rstyle,g=u&&a?e.pstyle("bounds-expansion").pfValue:[0],m=function(Ge){return Ge.pstyle("display").value!=="none"},b=!a||m(e)&&(!l||m(e.source())&&m(e.target()));if(b){var w=0,S=0;a&&t.includeOverlays&&(w=e.pstyle("overlay-opacity").value,w!==0&&(S=e.pstyle("overlay-padding").value));var E=0,x=0;a&&t.includeUnderlays&&(E=e.pstyle("underlay-opacity").value,E!==0&&(x=e.pstyle("underlay-padding").value));var T=Math.max(S,x),B=0,I=0;if(a&&(B=e.pstyle("width").pfValue,I=B/2),u&&t.includeNodes){var _=e.position();v=_.x,y=_.y;var D=e.outerWidth(),A=D/2,O=e.outerHeight(),k=O/2;c=v-A,f=v+A,d=y-k,h=y+k,Fr(s,c,d,f,h),a&&vv(s,e),a&&t.includeOutlines&&!i&&vv(s,e),a&&FE(s,e)}else if(l&&t.includeEdges)if(a&&!i){var P=e.pstyle("curve-style").strValue;if(c=Math.min(p.srcX,p.midX,p.tgtX),f=Math.max(p.srcX,p.midX,p.tgtX),d=Math.min(p.srcY,p.midY,p.tgtY),h=Math.max(p.srcY,p.midY,p.tgtY),c-=I,f+=I,d-=I,h+=I,Fr(s,c,d,f,h),P==="haystack"){var M=p.haystackPts;if(M&&M.length===2){if(c=M[0].x,d=M[0].y,f=M[1].x,h=M[1].y,c>f){var F=c;c=f,f=F}if(d>h){var W=d;d=h,h=W}Fr(s,c-I,d-I,f+I,h+I)}}else if(P==="bezier"||P==="unbundled-bezier"||Nn(P,"segments")||Nn(P,"taxi")){var H;switch(P){case"bezier":case"unbundled-bezier":H=p.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":H=p.linePts;break}if(H!=null)for(var z=0;z<H.length;z++){var $=H[z];c=$.x-I,f=$.x+I,d=$.y-I,h=$.y+I,Fr(s,c,d,f,h)}}}else{var X=e.source(),te=X.position(),R=e.target(),L=R.position();if(c=te.x,f=L.x,d=te.y,h=L.y,c>f){var K=c;c=f,f=K}if(d>h){var ne=d;d=h,h=ne}c-=I,f+=I,d-=I,h+=I,Fr(s,c,d,f,h)}if(a&&t.includeEdges&&l&&(Gs(s,e,"mid-source"),Gs(s,e,"mid-target"),Gs(s,e,"source"),Gs(s,e,"target")),a){var Y=e.pstyle("ghost").value==="yes";if(Y){var N=e.pstyle("ghost-offset-x").pfValue,V=e.pstyle("ghost-offset-y").pfValue;Fr(s,s.x1+N,s.y1+V,s.x2+N,s.y2+V)}}var U=o.bodyBounds=o.bodyBounds||{};Jd(U,s),oo(U,g),so(U,1),a&&(c=s.x1,f=s.x2,d=s.y1,h=s.y2,Fr(s,c-T,d-T,f+T,h+T));var j=o.overlayBounds=o.overlayBounds||{};Jd(j,s),oo(j,g),so(j,1);var ae=o.labelBounds=o.labelBounds||{};ae.all!=null?bS(ae.all):ae.all=ar(),a&&t.includeLabels&&(t.includeMainLabels&&oc(s,e,null),l&&(t.includeSourceLabels&&oc(s,e,"source"),t.includeTargetLabels&&oc(s,e,"target")))}return s.x1=Rr(s.x1),s.y1=Rr(s.y1),s.x2=Rr(s.x2),s.y2=Rr(s.y2),s.w=Rr(s.x2-s.x1),s.h=Rr(s.y2-s.y1),s.w>0&&s.h>0&&b&&(oo(s,g),so(s,1)),s},Uy=function(e){var t=0,n=function(s){return(s?1:0)<<t++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},qy=function(e){var t=function(o){return Math.round(o)};if(e.isEdge()){var n=e.source().position(),a=e.target().position();return Yd([t(n.x),t(n.y),t(a.x),t(a.y)])}else{var i=e.position();return Yd([t(i.x),t(i.y)])}},pv=function(e,t){var n=e._private,a,i=e.isEdge(),s=t==null?gv:Uy(t),o=s===gv;if(n.bbCache==null?(a=NE(e,fs),n.bbCache=a,n.bbCachePosKey=qy(e)):a=n.bbCache,!o){var u=e.isNode();a=ar(),(t.includeNodes&&u||t.includeEdges&&!u)&&(t.includeOverlays?Fn(a,n.overlayBounds):Fn(a,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?Fn(a,n.labelBounds.all):(t.includeMainLabels&&Fn(a,n.labelBounds.mainRot),t.includeSourceLabels&&Fn(a,n.labelBounds.sourceRot),t.includeTargetLabels&&Fn(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},fs={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},gv=Uy(fs),yv=Yt(fs);oa.boundingBox=function(r){var e,t=r===void 0||r.useCache===void 0||r.useCache===!0,n=mi(function(c){var f=c._private;return f.bbCache==null||f.styleDirty||f.bbCachePosKey!==qy(c)},function(c){return c.id()});if(t&&this.length===1&&!n(this[0]))r===void 0?r=fs:r=yv(r),e=pv(this[0],r);else{e=ar(),r=r||fs;var a=yv(r),i=this,s=i.cy(),o=s.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(t),this.updateCompoundBounds(!t);for(var u=0;u<i.length;u++){var l=i[u];n(l)&&l.dirtyBoundingBoxCache(),Fn(e,pv(l,a))}}return e.x1=Rr(e.x1),e.y1=Rr(e.y1),e.x2=Rr(e.x2),e.y2=Rr(e.y2),e.w=Rr(e.x2-e.x1),e.h=Rr(e.y2-e.y1),e};oa.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};oa.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),a=t.collection();if(n&&(a=e.filter(function(l){return l.isParent()}),e=e.not(a)),Ke(r)){var i=r;r=function(){return i}}var s=function(c,f){return c._private.bbAtOldPos=r(c,f)},o=function(c){return c._private.bbAtOldPos};t.startBatch(),e.forEach(s).silentPositions(r),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var u=mS(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),t.endBatch(),u};ci.boundingbox=ci.bb=ci.boundingBox;ci.renderedBoundingbox=ci.renderedBoundingBox;var zE=oa,Wi,Ds;Wi=Ds={};var $y=function(e){e.uppercaseName=Od(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Od(e.outerName),Wi[e.name]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var o=n.pstyle(e.name);switch(o.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return o.pfValue}}else return 1},Wi["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,s=i._private.styleEnabled;if(n)if(s){var o=n[e.name](),u=n.pstyle("border-position").value,l;u==="center"?l=n.pstyle("border-width").pfValue:u==="outside"?l=2*n.pstyle("border-width").pfValue:l=0;var c=2*n.padding();return o+l+c}else return 1},Wi["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Wi["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};$y({name:"width"});$y({name:"height"});Ds.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Ds.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Ds.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var VE=Ds,UE=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},qE=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return vu(t(e),n.zoom(),n.pan())}},$E=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),a=n.pan(),i=n.zoom();return t(e).map(function(s){return vu(s,i,a)})}},WE=function(e){return e.renderer().getControlPoints(e)},GE=function(e){return e.renderer().getSegmentPoints(e)},HE=function(e){return e.renderer().getSourceEndpoint(e)},YE=function(e){return e.renderer().getTargetEndpoint(e)},KE=function(e){return e.renderer().getEdgeMidpoint(e)},mv={controlPoints:{get:WE,mult:!0},segmentPoints:{get:GE,mult:!0},sourceEndpoint:{get:HE},targetEndpoint:{get:YE},midpoint:{get:KE}},jE=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},XE=Object.keys(mv).reduce(function(r,e){var t=mv[e],n=jE(e);return r[e]=function(){return UE(this,t.get)},t.mult?r[n]=function(){return $E(this,t.get)}:r[n]=function(){return qE(this,t.get)},r},{}),ZE=we({},LE,zE,VE,XE);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Wy=function(e,t){this.recycle(e,t)};function Li(){return!1}function Hs(){return!0}Wy.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Li,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Hs:Li):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Hs;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Hs;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Hs,this.stopPropagation()},isDefaultPrevented:Li,isPropagationStopped:Li,isImmediatePropagationStopped:Li};var Gy=/^([^.]+)(\.(?:[^.]+))?$/,QE=".*",Hy={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},bv=Object.keys(Hy),JE={};function Su(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:JE,e=arguments.length>1?arguments[1]:void 0,t=0;t<bv.length;t++){var n=bv[t];this[n]=r[n]||Hy[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ta=Su.prototype,Yy=function(e,t,n,a,i,s,o){xt(a)&&(i=a,a=null),o&&(s==null?s=o:s=we({},s,o));for(var u=dt(n)?n:n.split(/\s+/),l=0;l<u.length;l++){var c=u[l];if(!Xn(c)){var f=c.match(Gy);if(f){var d=f[1],h=f[2]?f[2]:null,v=t(e,c,d,h,a,i,s);if(v===!1)break}}}},wv=function(e,t){return e.addEventFields(e.context,t),new Wy(t.type,t)},eT=function(e,t,n){if(s1(n)){t(e,n);return}else if(Ke(n)){t(e,wv(e,n));return}for(var a=dt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var s=a[i];if(!Xn(s)){var o=s.match(Gy);if(o){var u=o[1],l=o[2]?o[2]:null,c=wv(e,{type:u,namespace:l,target:e.context});t(e,c)}}}};ta.on=ta.addListener=function(r,e,t,n,a){return Yy(this,function(i,s,o,u,l,c,f){xt(c)&&i.listeners.push({event:s,callback:c,type:o,namespace:u,qualifier:l,conf:f})},r,e,t,n,a),this};ta.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};ta.removeListener=ta.off=function(r,e,t,n){var a=this;this.emitting!==0&&(this.listeners=q1(this.listeners));for(var i=this.listeners,s=function(l){var c=i[l];Yy(a,function(f,d,h,v,y,p){if((c.type===h||r==="*")&&(!v&&c.namespace!==".*"||c.namespace===v)&&(!y||f.qualifierCompare(c.qualifier,y))&&(!p||c.callback===p))return i.splice(l,1),!1},r,e,t,n)},o=i.length-1;o>=0;o--)s(o);return this};ta.removeAllListeners=function(){return this.removeListener("*")};ta.emit=ta.trigger=function(r,e,t){var n=this.listeners,a=n.length;return this.emitting++,dt(e)||(e=[e]),eT(this,function(i,s){t!=null&&(n=[{event:s.event,type:s.type,namespace:s.namespace,callback:t}],a=n.length);for(var o=function(){var c=n[u];if(c.type===s.type&&(!c.namespace||c.namespace===s.namespace||c.namespace===QE)&&i.eventMatches(i.context,c,s)){var f=[s];e!=null&&W1(f,e),i.beforeEmit(i.context,c,s),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(v){return v!==c}));var d=i.callbackContext(i.context,c,s),h=c.callback.apply(d,f);i.afterEmit(i.context,c,s),h===!1&&(s.stopPropagation(),s.preventDefault())}},u=0;u<a;u++)o();i.bubble(i.context)&&!s.isPropagationStopped()&&i.parent(i.context).emit(s,e)},r),this.emitting--,this};var tT={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&Es(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ys=function(e){return ge(e)?new Jn(e):e},Ky={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new Su(tT,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var a=Ys(t),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n)}return this},removeListener:function(e,t,n){for(var a=Ys(t),i=0;i<this.length;i++){var s=this[i];s.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var a=Ys(t),i=0;i<this.length;i++){var s=this[i];s.emitter().one(e,a,n)}return this},once:function(e,t,n){for(var a=Ys(t),i=0;i<this.length;i++){var s=this[i];s.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};nt.eventAliasesOn(Ky);var jy={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):t.push(a)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(ge(e)||xr(e))return new Jn(e).filter(this);if(xt(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var s=a[i],o=t?e.apply(t,[s,i,a]):e(s,i,a);o&&n.push(s)}return n}return this.spawn()},not:function(e){if(e){ge(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||t.push(a)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(ge(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),a=this,i=e,s=this.length<e.length,o=s?a:i,u=s?i:a,l=0;l<o.length;l++){var c=o[l];u.has(c)&&n.push(c)}return n},xor:function(e){var t=this._private.cy;ge(e)&&(e=t.$(e));var n=this.spawn(),a=this,i=e,s=function(u,l){for(var c=0;c<u.length;c++){var f=u[c],d=f._private.data.id,h=l.hasElementWithId(d);h||n.push(f)}};return s(a,i),s(i,a),n},diff:function(e){var t=this._private.cy;ge(e)&&(e=t.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),s=this,o=e,u=function(c,f,d){for(var h=0;h<c.length;h++){var v=c[h],y=v._private.data.id,p=f.hasElementWithId(y);p?i.merge(v):d.push(v)}};return u(s,o,n),u(o,s,a),{left:n,right:a,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(ge(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var s=e[i],o=!this.has(s);o&&a.push(s)}return a},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&ge(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=t.map,s=0;s<e.length;s++){var o=e[s],u=o._private.data.id,l=!i.has(u);if(l){var c=this.length++;this[c]=o,i.set(u,{ele:o,index:c})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var s=e===this.length-1;if(this.length>1&&!s){var o=this.length-1,u=this[o],l=u._private.data.id;this[o]=void 0,this[e]=u,i.set(l,{ele:u,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,a=t.map,i=a.get(n);if(!i)return this;var s=i.index;return this.unmergeAt(s),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&ge(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],a=this,i=0;i<a.length;i++){var s=a[i],o=t?e.apply(t,[s,i,a]):e(s,i,a);n.push(o)}return n},reduce:function(e,t){for(var n=t,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,t){for(var n=-1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=t?e.apply(t,[o,s,i]):e(o,s,i);u>n&&(n=u,a=o)}return{value:n,ele:a}},min:function(e,t){for(var n=1/0,a,i=this,s=0;s<i.length;s++){var o=i[s],u=t?e.apply(t,[o,s,i]):e(o,s,i);u<n&&(n=u,a=o)}return{value:n,ele:a}}},je=jy;je.u=je["|"]=je["+"]=je.union=je.or=je.add;je["\\"]=je["!"]=je["-"]=je.difference=je.relativeComplement=je.subtract=je.not;je.n=je["&"]=je["."]=je.and=je.intersection=je.intersect;je["^"]=je["(+)"]=je["(-)"]=je.symmetricDifference=je.symdiff=je.xor;je.fnFilter=je.filterFn=je.stdFilter=je.filter;je.complement=je.abscomp=je.absoluteComplement;var rT={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Xy=function(e,t){var n=e.cy(),a=n.hasCompoundNodes();function i(c){var f=c.pstyle("z-compound-depth");return f.value==="auto"?a?c.zDepth():0:f.value==="bottom"?-1:f.value==="top"?Of:0}var s=i(e)-i(t);if(s!==0)return s;function o(c){var f=c.pstyle("z-index-compare");return f.value==="auto"&&c.isNode()?1:0}var u=o(e)-o(t);if(u!==0)return u;var l=e.pstyle("z-index").value-t.pstyle("z-index").value;return l!==0?l:e.poolIndex()-t.poolIndex()},eu={forEach:function(e,t){if(xt(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],s=t?e.apply(t,[i,a,this]):e(i,a,this);if(s===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],a=this.length;t==null&&(t=a),e==null&&(e=0),e<0&&(e=a+e),t<0&&(t=a+t);for(var i=e;i>=0&&i<t&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!xt(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(Xy)},zDepth:function(){var e=this[0];if(e){var t=e._private,n=t.group;if(n==="nodes"){var a=t.data.parent?e.parents().size():0;return e.isParent()?a:Of-1}else{var i=t.source,s=t.target,o=i.zDepth(),u=s.zDepth();return Math.max(o,u,0)}}}};eu.each=eu.forEach;var nT=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":Nt(Symbol))!=e&&Nt(Symbol.iterator)!=e;t&&(eu[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,s=this.length;return Kg({next:function(){return i<s?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};nT();var aT=Yt({nodeDimensionsIncludeLabels:!1}),lo={layoutDimensions:function(e){e=aT(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var a=this.nodes().filter(function(S){return!S.isParent()}),i=this.cy(),s=t.eles,o=function(E){return E.id()},u=mi(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(E,x,T){var B={x:x.x1+x.w/2,y:x.y1+x.h/2},I={x:(T.x-B.x)*E,y:(T.y-B.y)*E};return{x:B.x+I.x,y:B.y+I.y}},c=t.spacingFactor&&t.spacingFactor!==1,f=function(){if(!c)return null;for(var E=ar(),x=0;x<a.length;x++){var T=a[x],B=u(T,x);vy(E,B.x,B.y)}return E},d=f(),h=mi(function(S,E){var x=u(S,E);if(c){var T=Math.abs(t.spacingFactor);x=l(T,d,x)}return t.transform!=null&&(x=t.transform(S,x)),x},o);if(t.animate){for(var v=0;v<a.length;v++){var y=a[v],p=h(y,v),g=t.animateFilter==null||t.animateFilter(y,v);if(g){var m=y.animation({position:p,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else y.position(p)}if(t.fit){var b=i.animation({fit:{boundingBox:s.boundingBoxAt(h),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(b)}else if(t.zoom!==void 0&&t.pan!==void 0){var w=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(w)}e.animations.forEach(function(S){return S.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Ti.all(e.animations.map(function(S){return S.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(h),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(we({},e,{eles:this}))}};lo.createLayout=lo.makeLayout=lo.layout;function Zy(r,e,t){var n=t._private,a=n.styleCache=n.styleCache||[],i;return(i=a[r])!=null||(i=a[r]=e(t)),i}function xu(r,e){return r=_a(r),function(n){return Zy(r,e,n)}}function Eu(r,e){r=_a(r);var t=function(a){return e.call(a)};return function(){var a=this[0];if(a)return Zy(r,t,a)}}var Gt={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),a=t.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(a){t(a),a.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var a=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var s=i;return e?s.emitAndNotify("style"):s.emit("style"),i.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(a.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,a.style().apply(n));var i=n._private.style[e];return i??(t?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Ke(e)){var s=e;i.applyBypass(this,s,a),this.emitAndNotify("style")}else if(ge(e))if(t===void 0){var o=this[0];return o?i.getStylePropertyValue(o,e):void 0}else i.applyBypass(this,e,t,a),this.emitAndNotify("style");else if(e===void 0){var u=this[0];return u?i.getRawStyle(u):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,a=t.style(),i=this;if(e===void 0)for(var s=0;s<i.length;s++){var o=i[s];a.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var u=0;u<i.length;u++){var l=i[u];a.removeBypasses(l,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!t)return i;var s=a.data.parent?n.parents():null;if(s)for(var o=0;o<s.length;o++){var u=s[o],l=u.pstyle("opacity").value;i=l*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function uc(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Wf(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],s=a.hasCompoundNodes();if(i){var o=i._private;if(!e(i))return!1;if(i.isNode())return!s||uc(i,n);var u=o.source,l=o.target;return t(u)&&(!s||uc(u,t))&&(u===l||t(l)&&(!s||uc(l,t)))}}}var Ci=xu("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Gt.takesUpSpace=Eu("takesUpSpace",Wf({ok:Ci}));var iT=xu("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&Ci(r)}),sT=xu("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&Ci(r)});Gt.interactive=Eu("interactive",Wf({ok:iT,parentOk:sT,edgeOkViaNode:Ci}));Gt.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var oT=xu("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&Ci(r)}),uT=Ci;Gt.visible=Eu("visible",Wf({ok:oT,edgeOkViaNode:uT}));Gt.hidden=function(){var r=this[0];if(r)return!r.visible()};Gt.isBundledBezier=Eu("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Gt.bypass=Gt.css=Gt.style;Gt.renderedCss=Gt.renderedStyle;Gt.removeBypass=Gt.removeCss=Gt.removeStyle;Gt.pstyle=Gt.parsedStyle;var qn={};function Sv(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],a=e[1];this.on(r.event,n,a)}else if(e.length===1&&xt(e[0])){var i=e[0];this.on(r.event,i)}else if(e.length===0||e.length===1&&dt(e[0])){for(var s=e.length===1?e[0]:null,o=0;o<this.length;o++){var u=this[o],l=!r.ableField||u._private[r.ableField],c=u._private[r.field]!=r.value;if(r.overrideAble){var f=r.overrideAble(u);if(f!==void 0&&(l=f,!f))return this}l&&(u._private[r.field]=r.value,c&&t.push(u))}var d=this.spawn(t);d.updateStyle(),d.emit(r.event),s&&d.emit(s)}return this}}function Bi(r){qn[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},qn[r.on]=Sv({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),qn[r.off]=Sv({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}Bi({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Bi({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Bi({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Bi({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});qn.deselect=qn.unselect;qn.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};Bi({field:"active",on:"activate",off:"unactivate"});Bi({field:"pannable",on:"panify",off:"unpanify"});qn.inactive=function(){var r=this[0];if(r)return!r._private.active};var Xt={},xv=function(e){return function(n){for(var a=this,i=[],s=0;s<a.length;s++){var o=a[s];if(o.isNode()){for(var u=!1,l=o.connectedEdges(),c=0;c<l.length;c++){var f=l[c],d=f.source(),h=f.target();if(e.noIncomingEdges&&h===o&&d!==o||e.noOutgoingEdges&&d===o&&h!==o){u=!0;break}}u||i.push(o)}}return this.spawn(i,!0).filter(n)}},Ev=function(e){return function(t){for(var n=this,a=[],i=0;i<n.length;i++){var s=n[i];if(s.isNode())for(var o=s.connectedEdges(),u=0;u<o.length;u++){var l=o[u],c=l.source(),f=l.target();e.outgoing&&c===s?(a.push(l),a.push(f)):e.incoming&&f===s&&(a.push(l),a.push(c))}}return this.spawn(a,!0).filter(t)}},Tv=function(e){return function(t){for(var n=this,a=[],i={};;){var s=e.outgoing?n.outgoers():n.incomers();if(s.length===0)break;for(var o=!1,u=0;u<s.length;u++){var l=s[u],c=l.id();i[c]||(i[c]=!0,a.push(l),o=!0)}if(!o)break;n=s}return this.spawn(a,!0).filter(t)}};Xt.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};we(Xt,{roots:xv({noIncomingEdges:!0}),leaves:xv({noOutgoingEdges:!0}),outgoers:Or(Ev({outgoing:!0}),"outgoers"),successors:Tv({outgoing:!0}),incomers:Or(Ev({incoming:!0}),"incomers"),predecessors:Tv({})});we(Xt,{neighborhood:Or(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var a=t[n],i=a.connectedEdges(),s=0;s<i.length;s++){var o=i[s],u=o.source(),l=o.target(),c=a===u?l:u;c.length>0&&e.push(c[0]),e.push(o[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Xt.neighbourhood=Xt.neighborhood;Xt.closedNeighbourhood=Xt.closedNeighborhood;Xt.openNeighbourhood=Xt.openNeighborhood;we(Xt,{source:Or(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:Or(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:Cv({attr:"source"}),targets:Cv({attr:"target"})});function Cv(r){return function(t){for(var n=[],a=0;a<this.length;a++){var i=this[a],s=i._private[r.attr];s&&n.push(s)}return this.spawn(n,!0).filter(t)}}we(Xt,{edgesWith:Or(Bv(),"edgesWith"),edgesTo:Or(Bv({thisIsSrc:!0}),"edgesTo")});function Bv(r){return function(t){var n=[],a=this._private.cy,i=r||{};ge(t)&&(t=a.$(t));for(var s=0;s<t.length;s++)for(var o=t[s]._private.edges,u=0;u<o.length;u++){var l=o[u],c=l._private.data,f=this.hasElementWithId(c.source)&&t.hasElementWithId(c.target),d=t.hasElementWithId(c.source)&&this.hasElementWithId(c.target),h=f||d;h&&((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!f||i.thisIsTgt&&!d)||n.push(l))}return this.spawn(n,!0)}}we(Xt,{connectedEdges:Or(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];if(a.isNode())for(var i=a._private.edges,s=0;s<i.length;s++){var o=i[s];e.push(o)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:Or(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];a.isEdge()&&(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:Or(Iv(),"parallelEdges"),codirectedEdges:Or(Iv({codirected:!0}),"codirectedEdges")});function Iv(r){var e={codirected:!1};return r=we({},e,r),function(n){for(var a=[],i=this.edges(),s=r,o=0;o<i.length;o++)for(var u=i[o],l=u._private,c=l.source,f=c._private.data.id,d=l.data.target,h=c._private.edges,v=0;v<h.length;v++){var y=h[v],p=y._private.data,g=p.target,m=p.source,b=g===d&&m===f,w=f===g&&d===m;(s.codirected&&b||!s.codirected&&(b||w))&&a.push(y)}return this.spawn(a,!0).filter(n)}}we(Xt,{components:function(e){var t=this,n=t.cy(),a=n.collection(),i=e==null?t.nodes():e.nodes(),s=[];e!=null&&i.empty()&&(i=e.sources());var o=function(c,f){a.merge(c),i.unmerge(c),f.merge(c)};if(i.empty())return t.spawn();var u=function(){var c=n.collection();s.push(c);var f=i[0];o(f,c),t.bfs({directed:!1,roots:f,visit:function(h){return o(h,c)}}),c.forEach(function(d){d.connectedEdges().forEach(function(h){t.has(h)&&c.has(h.source())&&c.has(h.target())&&c.merge(h)})})};do u();while(i.length>0);return s},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Xt.componentsOf=Xt.components;var Ht=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){bt("A collection must have a reference to the core");return}var i=new Sn,s=!1;if(!t)t=[];else if(t.length>0&&Ke(t[0])&&!Es(t[0])){s=!0;for(var o=[],u=new Ei,l=0,c=t.length;l<c;l++){var f=t[l];f.data==null&&(f.data={});var d=f.data;if(d.id==null)d.id=fy();else if(e.hasElementWithId(d.id)||u.has(d.id))continue;var h=new hu(e,f,!1);o.push(h),u.add(d.id)}t=o}this.length=0;for(var v=0,y=t.length;v<y;v++){var p=t[v][0];if(p!=null){var g=p._private.data.id;(!n||!i.has(g))&&(n&&i.set(g,{index:this.length,ele:p}),this[this.length]=p,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var b=this.lazyMap=new Sn,w=this.eles,S=0;S<w.length;S++){var E=w[S];b.set(E.id(),{index:S,ele:E})}}},n&&(this._private.map=i),s&&!a&&this.restore()},gt=hu.prototype=Ht.prototype=Object.create(Array.prototype);gt.instanceString=function(){return"collection"};gt.spawn=function(r,e){return new Ht(this.cy(),r,e)};gt.spawnSelf=function(){return this.spawn(this)};gt.cy=function(){return this._private.cy};gt.renderer=function(){return this._private.cy.renderer()};gt.element=function(){return this[0]};gt.collection=function(){return Zg(this)?this:new Ht(this._private.cy,[this])};gt.unique=function(){return new Ht(this._private.cy,this,!0)};gt.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};gt.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Ht(e)};gt.$id=gt.getElementById;gt.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};gt.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};gt.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};gt.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(Ke(r)){if(t.startBatch(),r.data){e.data(r.data);var a=n.data;if(e.isEdge()){var i=!1,s={},o=r.data.source,u=r.data.target;o!=null&&o!=a.source&&(s.source=""+o,i=!0),u!=null&&u!=a.target&&(s.target=""+u,i=!0),i&&(e=e.move(s))}else{var l="parent"in r.data,c=r.data.parent;l&&(c!=null||a.parent!=null)&&c!=a.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}r.position&&e.position(r.position);var f=function(y,p,g){var m=r[y];m!=null&&m!==n[y]&&(m?e[p]():e[g]())};return f("removed","remove","restore"),f("selected","select","unselect"),f("selectable","selectify","unselectify"),f("locked","lock","unlock"),f("grabbable","grabify","ungrabify"),f("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var d={data:nn(n.data),position:nn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};d.classes="";var h=0;return n.classes.forEach(function(v){return d.classes+=h++===0?v:" "+v}),d}}};gt.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};gt.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],a=n.json(),i=new hu(r,a,!1);e.push(i)}return new Ht(r,e)};gt.copy=gt.clone;gt.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),a=n._private,i=[],s=[],o,u=0,l=t.length;u<l;u++){var c=t[u];e&&!c.removed()||(c.isNode()?i.push(c):s.push(c))}o=i.concat(s);var f,d=function(){o.splice(f,1),f--};for(f=0;f<o.length;f++){var h=o[f],v=h._private,y=v.data;if(h.clearTraversalCache(),!(!e&&!v.removed)){if(y.id===void 0)y.id=fy();else if(ie(y.id))y.id=""+y.id;else if(Xn(y.id)||!ge(y.id)){bt("Can not create element with invalid string ID `"+y.id+"`"),d();continue}else if(n.hasElementWithId(y.id)){bt("Can not create second element with ID `"+y.id+"`"),d();continue}}var p=y.id;if(h.isNode()){var g=v.position;g.x==null&&(g.x=0),g.y==null&&(g.y=0)}if(h.isEdge()){for(var m=h,b=["source","target"],w=b.length,S=!1,E=0;E<w;E++){var x=b[E],T=y[x];ie(T)&&(T=y[x]=""+y[x]),T==null||T===""?(bt("Can not create edge `"+p+"` with unspecified "+x),S=!0):n.hasElementWithId(T)||(bt("Can not create edge `"+p+"` with nonexistant "+x+" `"+T+"`"),S=!0)}if(S){d();continue}var B=n.getElementById(y.source),I=n.getElementById(y.target);B.same(I)?B._private.edges.push(m):(B._private.edges.push(m),I._private.edges.push(m)),m._private.source=B,m._private.target=I}v.map=new Sn,v.map.set(p,{ele:h,index:0}),v.removed=!1,e&&n.addToPool(h)}for(var _=0;_<i.length;_++){var D=i[_],A=D._private.data;ie(A.parent)&&(A.parent=""+A.parent);var O=A.parent,k=O!=null;if(k||D._private.parent){var P=D._private.parent?n.collection().merge(D._private.parent):n.getElementById(O);if(P.empty())A.parent=void 0;else if(P[0].removed())ot("Node added with missing parent, reference to parent removed"),A.parent=void 0,D._private.parent=null;else{for(var M=!1,F=P;!F.empty();){if(D.same(F)){M=!0,A.parent=void 0;break}F=F.parent()}M||(P[0]._private.children.push(D),D._private.parent=P[0],a.hasCompoundNodes=!0)}}}if(o.length>0){for(var W=o.length===t.length?t:new Ht(n,o),H=0;H<W.length;H++){var z=W[H];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}var $;a.hasCompoundNodes?$=n.collection().merge(W).merge(W.connectedNodes()).merge(W.parent()):$=W,$.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?W.emitAndNotify("add"):e&&W.emit("add")}return t};gt.removed=function(){var r=this[0];return r&&r._private.removed};gt.inside=function(){var r=this[0];return r&&!r._private.removed};gt.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],a={},i=t._private.cy;function s(O){for(var k=O._private.edges,P=0;P<k.length;P++)u(k[P])}function o(O){for(var k=O._private.children,P=0;P<k.length;P++)u(k[P])}function u(O){var k=a[O.id()];e&&O.removed()||k||(a[O.id()]=!0,O.isNode()?(n.push(O),s(O),o(O)):n.unshift(O))}for(var l=0,c=t.length;l<c;l++){var f=t[l];u(f)}function d(O,k){var P=O._private.edges;Zn(P,k),O.clearTraversalCache()}function h(O){O.clearTraversalCache()}var v=[];v.ids={};function y(O,k){k=k[0],O=O[0];var P=O._private.children,M=O.id();Zn(P,k),k._private.parent=null,v.ids[M]||(v.ids[M]=!0,v.push(O))}t.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var p=0;p<n.length;p++){var g=n[p];if(g.isEdge()){var m=g.source()[0],b=g.target()[0];d(m,g),d(b,g);for(var w=g.parallelEdges(),S=0;S<w.length;S++){var E=w[S];h(E),E.isBundledBezier()&&E.dirtyBoundingBoxCache()}}else{var x=g.parent();x.length!==0&&y(x,g)}e&&(g._private.removed=!0)}var T=i._private.elements;i._private.hasCompoundNodes=!1;for(var B=0;B<T.length;B++){var I=T[B];if(I.isParent()){i._private.hasCompoundNodes=!0;break}}var _=new Ht(this.cy(),n);_.size()>0&&(r?_.emitAndNotify("remove"):e&&_.emit("remove"));for(var D=0;D<v.length;D++){var A=v[D];(!e||!A.removed())&&A.updateStyle()}return _};gt.move=function(r){var e=this._private.cy,t=this,n=!1,a=!1,i=function(v){return v==null?v:""+v};if(r.source!==void 0||r.target!==void 0){var s=i(r.source),o=i(r.target),u=s!=null&&e.hasElementWithId(s),l=o!=null&&e.hasElementWithId(o);(u||l)&&(e.batch(function(){t.remove(n,a),t.emitAndNotify("moveout");for(var h=0;h<t.length;h++){var v=t[h],y=v._private.data;v.isEdge()&&(u&&(y.source=s),l&&(y.target=o))}t.restore(n,a)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var c=i(r.parent),f=c===null||e.hasElementWithId(c);if(f){var d=c===null?void 0:c;e.batch(function(){var h=t.remove(n,a);h.emitAndNotify("moveout");for(var v=0;v<t.length;v++){var y=t[v],p=y._private.data;y.isNode()&&(p.parent=d)}h.restore(n,a)}),t.emitAndNotify("move")}}return this};[Ey,bE,uo,Un,wi,PE,wu,ZE,Ky,jy,rT,eu,lo,Gt,qn,Xt].forEach(function(r){we(gt,r)});var lT={add:function(e){var t,n=this;if(xr(e)){var a=e;if(a._private.cy===n)t=a.restore();else{for(var i=[],s=0;s<a.length;s++){var o=a[s];i.push(o.json())}t=new Ht(n,i)}}else if(dt(e)){var u=e;t=new Ht(n,u)}else if(Ke(e)&&(dt(e.nodes)||dt(e.edges))){for(var l=e,c=[],f=["nodes","edges"],d=0,h=f.length;d<h;d++){var v=f[d],y=l[v];if(dt(y))for(var p=0,g=y.length;p<g;p++){var m=we({group:v},y[p]);c.push(m)}}t=new Ht(n,c)}else{var b=e;t=new hu(n,b).collection()}return t},remove:function(e){if(!xr(e)){if(ge(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function cT(r,e,t,n){var a=4,i=.001,s=1e-7,o=10,u=11,l=1/(u-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var f=0;f<4;++f)if(typeof arguments[f]!="number"||isNaN(arguments[f])||!isFinite(arguments[f]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var d=c?new Float32Array(u):new Array(u);function h(I,_){return 1-3*_+3*I}function v(I,_){return 3*_-6*I}function y(I){return 3*I}function p(I,_,D){return((h(_,D)*I+v(_,D))*I+y(_))*I}function g(I,_,D){return 3*h(_,D)*I*I+2*v(_,D)*I+y(_)}function m(I,_){for(var D=0;D<a;++D){var A=g(_,r,t);if(A===0)return _;var O=p(_,r,t)-I;_-=O/A}return _}function b(){for(var I=0;I<u;++I)d[I]=p(I*l,r,t)}function w(I,_,D){var A,O,k=0;do O=_+(D-_)/2,A=p(O,r,t)-I,A>0?D=O:_=O;while(Math.abs(A)>s&&++k<o);return O}function S(I){for(var _=0,D=1,A=u-1;D!==A&&d[D]<=I;++D)_+=l;--D;var O=(I-d[D])/(d[D+1]-d[D]),k=_+O*l,P=g(k,r,t);return P>=i?m(I,k):P===0?k:w(I,_,_+l)}var E=!1;function x(){E=!0,(r!==e||t!==n)&&b()}var T=function(_){return E||x(),r===e&&t===n?_:_===0?0:_===1?1:p(S(_),e,n)};T.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var B="generateBezier("+[r,e,t,n]+")";return T.toString=function(){return B},T}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var fT=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var s={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:s.v,dv:r(s)}}function t(n,a){var i={dx:n.v,dv:r(n)},s=e(n,a*.5,i),o=e(n,a*.5,s),u=e(n,a,o),l=1/6*(i.dx+2*(s.dx+o.dx)+u.dx),c=1/6*(i.dv+2*(s.dv+o.dv)+u.dv);return n.x=n.x+l*a,n.v=n.v+c*a,n}return function n(a,i,s){var o={x:-1,v:0,tension:null,friction:null},u=[0],l=0,c=1/1e4,f=16/1e3,d,h,v;for(a=parseFloat(a)||500,i=parseFloat(i)||20,s=s||null,o.tension=a,o.friction=i,d=s!==null,d?(l=n(a,i),h=l/s*f):h=f;v=t(v||o,h),u.push(1+v.x),l+=16,Math.abs(v.x)>c&&Math.abs(v.v)>c;);return d?function(y){return u[y*(u.length-1)|0]}:l}}(),vt=function(e,t,n,a){var i=cT(e,t,n,a);return function(s,o,u){return s+(o-s)*i(u)}},co={linear:function(e,t,n){return e+(t-e)*n},ease:vt(.25,.1,.25,1),"ease-in":vt(.42,0,1,1),"ease-out":vt(0,0,.58,1),"ease-in-out":vt(.42,0,.58,1),"ease-in-sine":vt(.47,0,.745,.715),"ease-out-sine":vt(.39,.575,.565,1),"ease-in-out-sine":vt(.445,.05,.55,.95),"ease-in-quad":vt(.55,.085,.68,.53),"ease-out-quad":vt(.25,.46,.45,.94),"ease-in-out-quad":vt(.455,.03,.515,.955),"ease-in-cubic":vt(.55,.055,.675,.19),"ease-out-cubic":vt(.215,.61,.355,1),"ease-in-out-cubic":vt(.645,.045,.355,1),"ease-in-quart":vt(.895,.03,.685,.22),"ease-out-quart":vt(.165,.84,.44,1),"ease-in-out-quart":vt(.77,0,.175,1),"ease-in-quint":vt(.755,.05,.855,.06),"ease-out-quint":vt(.23,1,.32,1),"ease-in-out-quint":vt(.86,0,.07,1),"ease-in-expo":vt(.95,.05,.795,.035),"ease-out-expo":vt(.19,1,.22,1),"ease-in-out-expo":vt(1,0,0,1),"ease-in-circ":vt(.6,.04,.98,.335),"ease-out-circ":vt(.075,.82,.165,1),"ease-in-out-circ":vt(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return co.linear;var a=fT(e,t,n);return function(i,s,o){return i+(s-i)*a(o)}},"cubic-bezier":vt};function _v(r,e,t,n,a){if(n===1||e===t)return t;var i=a(e,t,n);return r==null||((r.roundValue||r.color)&&(i=Math.round(i)),r.min!==void 0&&(i=Math.max(i,r.min)),r.max!==void 0&&(i=Math.min(i,r.max))),i}function Dv(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function Ua(r,e,t,n,a){var i=a!=null?a.type:null;t<0?t=0:t>1&&(t=1);var s=Dv(r,a),o=Dv(e,a);if(ie(s)&&ie(o))return _v(i,s,o,t,n);if(dt(s)&&dt(o)){for(var u=[],l=0;l<o.length;l++){var c=s[l],f=o[l];if(c!=null&&f!=null){var d=_v(i,c,f,t,n);u.push(d)}else u.push(f)}return u}}function dT(r,e,t,n){var a=!n,i=r._private,s=e._private,o=s.easing,u=s.startTime,l=n?r:r.cy(),c=l.style();if(!s.easingImpl)if(o==null)s.easingImpl=co.linear;else{var f;if(ge(o)){var d=c.parse("transition-timing-function",o);f=d.value}else f=o;var h,v;ge(f)?(h=f,v=[]):(h=f[1],v=f.slice(2).map(function(W){return+W})),v.length>0?(h==="spring"&&v.push(s.duration),s.easingImpl=co[h].apply(null,v)):s.easingImpl=co[h]}var y=s.easingImpl,p;if(s.duration===0?p=1:p=(t-u)/s.duration,s.applying&&(p=s.progress),p<0?p=0:p>1&&(p=1),s.delay==null){var g=s.startPosition,m=s.position;if(m&&a&&!r.locked()){var b={};Fi(g.x,m.x)&&(b.x=Ua(g.x,m.x,p,y)),Fi(g.y,m.y)&&(b.y=Ua(g.y,m.y,p,y)),r.position(b)}var w=s.startPan,S=s.pan,E=i.pan,x=S!=null&&n;x&&(Fi(w.x,S.x)&&(E.x=Ua(w.x,S.x,p,y)),Fi(w.y,S.y)&&(E.y=Ua(w.y,S.y,p,y)),r.emit("pan"));var T=s.startZoom,B=s.zoom,I=B!=null&&n;I&&(Fi(T,B)&&(i.zoom=us(i.minZoom,Ua(T,B,p,y),i.maxZoom)),r.emit("zoom")),(x||I)&&r.emit("viewport");var _=s.style;if(_&&_.length>0&&a){for(var D=0;D<_.length;D++){var A=_[D],O=A.name,k=A,P=s.startStyle[O],M=c.properties[P.name],F=Ua(P,k,p,y,M);c.overrideBypass(r,O,F)}r.emit("style")}}return s.progress=p,p}function Fi(r,e){return r==null||e==null?!1:ie(r)&&ie(e)?!0:!!(r&&e)}function hT(r,e,t,n){var a=e._private;a.started=!0,a.startTime=t-a.progress*a.duration}function Av(r,e){var t=e._private.aniEles,n=[];function a(c,f){var d=c._private,h=d.animation.current,v=d.animation.queue,y=!1;if(h.length===0){var p=v.shift();p&&h.push(p)}for(var g=function(E){for(var x=E.length-1;x>=0;x--){var T=E[x];T()}E.splice(0,E.length)},m=h.length-1;m>=0;m--){var b=h[m],w=b._private;if(w.stopped){h.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,g(w.frames);continue}!w.playing&&!w.applying||(w.playing&&w.applying&&(w.applying=!1),w.started||hT(c,b,r),dT(c,b,r,f),w.applying&&(w.applying=!1),g(w.frames),w.step!=null&&w.step(r),b.completed()&&(h.splice(m,1),w.hooked=!1,w.playing=!1,w.started=!1,g(w.completes)),y=!0)}return!f&&h.length===0&&v.length===0&&n.push(c),y}for(var i=!1,s=0;s<t.length;s++){var o=t[s],u=a(o);i=i||u}var l=a(e,!0);(i||l)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var vT={animate:nt.animate(),animation:nt.animation(),animated:nt.animated(),clearQueue:nt.clearQueue(),delay:nt.delay(),delayAnimation:nt.delayAnimation(),stop:nt.stop(),addToAnimationPool:function(e){var t=this;t.styleEnabled()&&t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){e._private.animationsRunning&&jo(function(i){Av(i,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,s){Av(s,e)},n.beforeRenderPriorities.animations):t()}},pT={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&Es(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},Ks=function(e){return ge(e)?new Jn(e):e},Qy={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new Su(pT,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,Ks(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,Ks(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,Ks(t),n),this},once:function(e,t,n){return this.emitter().one(e,Ks(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};nt.eventAliasesOn(Qy);var Uc={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Uc.jpeg=Uc.jpg;var fo={layout:function(e){var t=this;if(e==null){bt("Layout options must be specified to make a layout");return}if(e.name==null){bt("A `name` must be specified to make a layout");return}var n=e.name,a=t.extension("layout",n);if(a==null){bt("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;ge(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var s=new a(we({},e,{cy:t,eles:i}));return s}};fo.createLayout=fo.makeLayout=fo.layout;var gT={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&a.merge(t);return}if(n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?t.notify(n):t.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],s=e[i],o=t.getElementById(i);o.data(s)}})}},yT=Yt({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),qc={renderTo:function(e,t,n,a){var i=this._private.renderer;return i.renderTo(e,t,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){bt("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&ot("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=yT(e);a.cy=t,t._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};qc.invalidateDimensions=qc.resize;var ho={collection:function(e,t){return ge(e)?this.$(e):xr(e)?e.collection():dt(e)?(t||(t={}),new Ht(this,e,t.unique,t.removed)):new Ht(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};ho.elements=ho.filter=ho.$;var $t={},ji="t",mT="f";$t.apply=function(r){for(var e=this,t=e._private,n=t.cy,a=n.collection(),i=0;i<r.length;i++){var s=r[i],o=e.getContextMeta(s);if(!o.empty){var u=e.getContextStyle(o),l=e.applyContextStyle(o,u,s);s._private.appliedInitStyle?e.updateTransitions(s,l.diffProps):s._private.appliedInitStyle=!0;var c=e.updateStyleHints(s);c&&a.push(s)}}return a};$t.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},a=r+"-"+e,i=n[a];if(i)return i;for(var s=[],o={},u=0;u<t.length;u++){var l=t[u],c=r[u]===ji,f=e[u]===ji,d=c!==f,h=l.mappedProperties.length>0;if(d||f&&h){var v=void 0;d&&h||d?v=l.properties:h&&(v=l.mappedProperties);for(var y=0;y<v.length;y++){for(var p=v[y],g=p.name,m=!1,b=u+1;b<t.length;b++){var w=t[b],S=e[b]===ji;if(S&&(m=w.properties[p.name]!=null,m))break}!o[g]&&!m&&(o[g]=!0,s.push(g))}}}return n[a]=s,s};$t.getContextMeta=function(r){for(var e=this,t="",n,a=r._private.styleCxtKey||"",i=0;i<e.length;i++){var s=e[i],o=s.selector&&s.selector.matches(r);o?t+=ji:t+=mT}return n=e.getPropertiesDiff(a,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};$t.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<t.length;i++){var s=t[i],o=e[i]===ji;if(o)for(var u=0;u<s.properties.length;u++){var l=s.properties[u];a[l.name]=l}}return n[e]=a,a};$t.applyContextStyle=function(r,e,t){for(var n=this,a=r.diffPropNames,i={},s=n.types,o=0;o<a.length;o++){var u=a[o],l=e[u],c=t.pstyle(u);if(!l)if(c)c.bypass?l={name:u,deleteBypassed:!0}:l={name:u,delete:!0};else continue;if(c!==l){if(l.mapped===s.fn&&c!=null&&c.mapping!=null&&c.mapping.value===l.value){var f=c.mapping,d=f.fnValue=l.value(t);if(d===f.prevFnValue)continue}var h=i[u]={prev:c};n.applyParsedProperty(t,l),h.next=t.pstyle(u),h.next&&h.next.bypass&&(h.next=h.next.bypassed)}}return{diffProps:i}};$t.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,a=t.propertyGroupKeys,i=function(U,j,ae){return t.getPropertiesHash(U,j,ae)},s=e.styleKey;if(r.removed())return!1;var o=e.group==="nodes",u=r._private.style;n=Object.keys(u);for(var l=0;l<a.length;l++){var c=a[l];e.styleKeys[c]=[ga,Za]}for(var f=function(U,j){return e.styleKeys[j][0]=is(U,e.styleKeys[j][0])},d=function(U,j){return e.styleKeys[j][1]=ss(U,e.styleKeys[j][1])},h=function(U,j){f(U,j),d(U,j)},v=function(U,j){for(var ae=0;ae<U.length;ae++){var he=U.charCodeAt(ae);f(he,j),d(he,j)}},y=2e9,p=function(U){return-128<U&&U<128&&Math.floor(U)!==U?y-(U*1024|0):U},g=0;g<n.length;g++){var m=n[g],b=u[m];if(b!=null){var w=this.properties[m],S=w.type,E=w.groupKey,x=void 0;w.hashOverride!=null?x=w.hashOverride(r,b):b.pfValue!=null&&(x=b.pfValue);var T=w.enums==null?b.value:null,B=x!=null,I=T!=null,_=B||I,D=b.units;if(S.number&&_&&!S.multiple){var A=B?x:T;h(p(A),E),!B&&D!=null&&v(D,E)}else v(b.strValue,E)}}for(var O=[ga,Za],k=0;k<a.length;k++){var P=a[k],M=e.styleKeys[P];O[0]=is(M[0],O[0]),O[1]=ss(M[1],O[1])}e.styleKey=k1(O[0],O[1]);var F=e.styleKeys;e.labelDimsKey=Mn(F.labelDimensions);var W=i(r,["label"],F.labelDimensions);if(e.labelKey=Mn(W),e.labelStyleKey=Mn(Vs(F.commonLabel,W)),!o){var H=i(r,["source-label"],F.labelDimensions);e.sourceLabelKey=Mn(H),e.sourceLabelStyleKey=Mn(Vs(F.commonLabel,H));var z=i(r,["target-label"],F.labelDimensions);e.targetLabelKey=Mn(z),e.targetLabelStyleKey=Mn(Vs(F.commonLabel,z))}if(o){var $=e.styleKeys,X=$.nodeBody,te=$.nodeBorder,R=$.nodeOutline,L=$.backgroundImage,K=$.compound,ne=$.pie,Y=$.stripe,N=[X,te,R,L,K,ne,Y].filter(function(V){return V!=null}).reduce(Vs,[ga,Za]);e.nodeKey=Mn(N),e.hasPie=ne!=null&&ne[0]!==ga&&ne[1]!==Za,e.hasStripe=Y!=null&&Y[0]!==ga&&Y[1]!==Za}return s!==e.styleKey};$t.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};$t.applyParsedProperty=function(r,e){var t=this,n=e,a=r._private.style,i,s=t.types,o=t.properties[n.name].type,u=n.bypass,l=a[n.name],c=l&&l.bypass,f=r._private,d="mapping",h=function(X){return X==null?null:X.pfValue!=null?X.pfValue:X.value},v=function(){var X=h(l),te=h(n);t.checkTriggers(r,n.name,X,te)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",u)),n.delete)return a[n.name]=void 0,v(),!0;if(n.deleteBypassed)return l?l.bypass?(l.bypassed=void 0,v(),!0):!1:(v(),!0);if(n.deleteBypass)return l?l.bypass?(a[n.name]=l.bypassed,v(),!0):!1:(v(),!0);var y=function(){ot("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case s.mapData:{for(var p=n.field.split("."),g=f.data,m=0;m<p.length&&g;m++){var b=p[m];g=g[b]}if(g==null)return y(),!1;var w;if(ie(g)){var S=n.fieldMax-n.fieldMin;S===0?w=0:w=(g-n.fieldMin)/S}else return ot("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+g+"` for `"+r.id()+"` is non-numeric)"),!1;if(w<0?w=0:w>1&&(w=1),o.color){var E=n.valueMin[0],x=n.valueMax[0],T=n.valueMin[1],B=n.valueMax[1],I=n.valueMin[2],_=n.valueMax[2],D=n.valueMin[3]==null?1:n.valueMin[3],A=n.valueMax[3]==null?1:n.valueMax[3],O=[Math.round(E+(x-E)*w),Math.round(T+(B-T)*w),Math.round(I+(_-I)*w),Math.round(D+(A-D)*w)];i={bypass:n.bypass,name:n.name,value:O,strValue:"rgb("+O[0]+", "+O[1]+", "+O[2]+")"}}else if(o.number){var k=n.valueMin+(n.valueMax-n.valueMin)*w;i=this.parse(n.name,k,n.bypass,d)}else return!1;if(!i)return y(),!1;i.mapping=n,n=i;break}case s.data:{for(var P=n.field.split("."),M=f.data,F=0;F<P.length&&M;F++){var W=P[F];M=M[W]}if(M!=null&&(i=this.parse(n.name,M,n.bypass,d)),!i)return y(),!1;i.mapping=n,n=i;break}case s.fn:{var H=n.value,z=n.fnValue!=null?n.fnValue:H(r);if(n.prevFnValue=z,z==null)return ot("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(i=this.parse(n.name,z,n.bypass,d),!i)return ot("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;i.mapping=nn(n),n=i;break}case void 0:break;default:return!1}return u?(c?n.bypassed=l.bypassed:n.bypassed=l,a[n.name]=n):c?l.bypassed=n:a[n.name]=n,v(),!0};$t.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),s=0;s<i.length;s++){var o=i[s],u=a[o];u!=null&&(u.bypass?u.bypassed=null:a[o]=null)}}};$t.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};$t.updateTransitions=function(r,e){var t=this,n=r._private,a=r.pstyle("transition-property").value,i=r.pstyle("transition-duration").pfValue,s=r.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var o={},u=!1,l=0;l<a.length;l++){var c=a[l],f=r.pstyle(c),d=e[c];if(d){var h=d.prev,v=h,y=d.next!=null?d.next:f,p=!1,g=void 0,m=1e-6;v&&(ie(v.pfValue)&&ie(y.pfValue)?(p=y.pfValue-v.pfValue,g=v.pfValue+m*p):ie(v.value)&&ie(y.value)?(p=y.value-v.value,g=v.value+m*p):dt(v.value)&&dt(y.value)&&(p=v.value[0]!==y.value[0]||v.value[1]!==y.value[1]||v.value[2]!==y.value[2],g=v.strValue),p&&(o[c]=y.strValue,this.applyBypass(r,c,g),u=!0))}}if(!u)return;n.transitioning=!0,new Ti(function(b){s>0?r.delayAnimation(s).play().promise().then(b):b()}).then(function(){return r.animation({style:o,duration:i,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1)};$t.checkTrigger=function(r,e,t,n,a,i){var s=this.properties[e],o=a(s);r.removed()||o!=null&&o(t,n,r)&&i(s)};$t.checkZOrderTrigger=function(r,e,t,n){var a=this;this.checkTrigger(r,e,t,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",r)})};$t.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBounds},function(a){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache()})};$t.checkConnectedEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBoundsOfConnectedEdges},function(a){r.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};$t.checkParallelEdgesBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBoundsOfParallelEdges},function(a){r.parallelEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};$t.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n),this.checkConnectedEdgesBoundsTrigger(r,e,t,n),this.checkParallelEdgesBoundsTrigger(r,e,t,n)};var As={};As.applyBypass=function(r,e,t,n){var a=this,i=[],s=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var o=0;o<a.properties.length;o++){var u=a.properties[o],l=u.name,c=this.parse(l,t,!0);c&&i.push(c)}}else if(ge(e)){var f=this.parse(e,t,!0);f&&i.push(f)}else if(Ke(e)){var d=e;n=t;for(var h=Object.keys(d),v=0;v<h.length;v++){var y=h[v],p=d[y];if(p===void 0&&(p=d[fu(y)]),p!==void 0){var g=this.parse(y,p,!0);g&&i.push(g)}}}else return!1;if(i.length===0)return!1;for(var m=!1,b=0;b<r.length;b++){for(var w=r[b],S={},E=void 0,x=0;x<i.length;x++){var T=i[x];if(n){var B=w.pstyle(T.name);E=S[T.name]={prev:B}}m=this.applyParsedProperty(w,nn(T))||m,n&&(E.next=w.pstyle(T.name))}m&&this.updateStyleHints(w),n&&this.updateTransitions(w,S,s)}return m};As.overrideBypass=function(r,e,t){e=Af(e);for(var n=0;n<r.length;n++){var a=r[n],i=a._private.style[e],s=this.properties[e].type,o=s.color,u=s.mutiple,l=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,t):(i.value=t,i.pfValue!=null&&(i.pfValue=t),o?i.strValue="rgb("+t.join(",")+")":u?i.strValue=t.join(" "):i.strValue=""+t,this.updateStyleHints(a)),this.checkTriggers(a,e,l,t)}};As.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};As.removeBypasses=function(r,e,t){for(var n=!0,a=0;a<r.length;a++){for(var i=r[a],s={},o=0;o<e.length;o++){var u=e[o],l=this.properties[u],c=i.pstyle(l.name);if(!(!c||!c.bypass)){var f="",d=this.parse(u,f,!0),h=s[l.name]={prev:c};this.applyParsedProperty(i,d),h.next=i.pstyle(l.name)}}this.updateStyleHints(i),t&&this.updateTransitions(i,s,n)}};var Gf={};Gf.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};Gf.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var un={};un.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};un.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},a=0;a<t.properties.length;a++){var i=t.properties[a],s=t.getStylePropertyValue(r,i.name,e);s!=null&&(n[i.name]=s,n[fu(i.name)]=s)}return n}};un.getIndexedStyle=function(r,e,t,n){var a=r.pstyle(e)[t][n];return a??r.cy().style().getDefaultProperty(e)[t][0]};un.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,s=r.pstyle(a.name);if(s){var o=s.value,u=s.units,l=s.strValue;if(t&&i.number&&o!=null&&ie(o)){var c=r.cy().zoom(),f=function(p){return p*c},d=function(p,g){return f(p)+g},h=dt(o),v=h?u.every(function(y){return y!=null}):u!=null;return v?h?o.map(function(y,p){return d(y,u[p])}).join(" "):d(o,u):h?o.map(function(y){return ge(y)?y:""+f(y)}).join(" "):""+f(o)}else if(l!=null)return l}return null}};un.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],i=a.name,s=r.pstyle(i);s!==void 0&&(Ke(s)?s=this.parse(i,s.strValue):s=this.parse(i,s)),s&&(t[i]=s)}return t};un.getPropsList=function(r){var e=this,t=[],n=r,a=e.properties;if(n)for(var i=Object.keys(n),s=0;s<i.length;s++){var o=i[s],u=n[o],l=a[o]||a[Af(o)],c=this.parse(l.name,u);c&&t.push(c)}return t};un.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),a,i,s,o,u,l;for(u=0;u<e.length;u++)if(a=e[u],i=r.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=is(o,n[0]),n[1]=ss(o,n[1]);else for(s=i.strValue,l=0;l<s.length;l++)o=s.charCodeAt(l),n[0]=is(o,n[0]),n[1]=ss(o,n[1]);return n};un.getPropertiesHash=un.getNonDefaultPropertiesHash;var Tu={};Tu.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],a=n.selector,i=n.style||n.css,s=Object.keys(i);e.selector(a);for(var o=0;o<s.length;o++){var u=s[o],l=i[u];e.css(u,l)}}return e};Tu.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};Tu.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,a=t.properties,i={},s=0;s<a.length;s++){var o=a[s];i[o.name]=o.strValue}r.push({selector:n?n.toString():"core",style:i})}return r};var Hf={};Hf.appendFromString=function(r){var e=this,t=this,n=""+r,a,i,s;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>a.length?n=n.substr(a.length):n=""}function u(){i.length>s.length?i=i.substr(s.length):i=""}for(;;){var l=n.match(/^\s*$/);if(l)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){ot("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=c[0];var f=c[1];if(f!=="core"){var d=new Jn(f);if(d.invalid){ot("Skipping parsing of block: Invalid selector found in string stylesheet: "+f),o();continue}}var h=c[2],v=!1;i=h;for(var y=[];;){var p=i.match(/^\s*$/);if(p)break;var g=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!g){ot("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+h),v=!0;break}s=g[0];var m=g[1],b=g[2],w=e.properties[m];if(!w){ot("Skipping property: Invalid property name in: "+s),u();continue}var S=t.parse(m,b);if(!S){ot("Skipping property: Invalid property definition in: "+s),u();continue}y.push({name:m,val:b}),u()}if(v){o();break}t.selector(f);for(var E=0;E<y.length;E++){var x=y[E];t.css(x.name,x.val)}o()}return t};Hf.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var _t={};(function(){var r=Ft,e=d1,t=v1,n=p1,a=g1,i=function(V){return"^"+V+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},s=function(V){var U=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+a;return"^"+V+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+U+")\\s*\\,\\s*("+U+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];_t.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:s("mapData")},mapLayoutData:{mapping:!0,regex:s("mapLayoutData")},mapScratch:{mapping:!0,regex:s("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(V,U){switch(V.length){case 2:return U[0]!=="deg"&&U[0]!=="rad"&&U[1]!=="deg"&&U[1]!=="rad";case 1:return ge(V[0])||U[0]==="deg"||U[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(V){var U=V.length;return U===1||U===2||U===4}}};var u={zeroNonZero:function(V,U){return(V==null||U==null)&&V!==U||V==0&&U!=0?!0:V!=0&&U==0},any:function(V,U){return V!=U},emptyNonEmpty:function(V,U){var j=Xn(V),ae=Xn(U);return j&&!ae||!j&&ae}},l=_t.types,c=[{name:"label",type:l.text,triggersBounds:u.any,triggersZOrder:u.emptyNonEmpty},{name:"text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any}],f=[{name:"source-label",type:l.text,triggersBounds:u.any},{name:"source-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"source-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"source-text-offset",type:l.size,triggersBounds:u.any}],d=[{name:"target-label",type:l.text,triggersBounds:u.any},{name:"target-text-rotation",type:l.textRotation,triggersBounds:u.any},{name:"target-text-margin-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-margin-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"target-text-offset",type:l.size,triggersBounds:u.any}],h=[{name:"font-family",type:l.fontFamily,triggersBounds:u.any},{name:"font-style",type:l.fontStyle,triggersBounds:u.any},{name:"font-weight",type:l.fontWeight,triggersBounds:u.any},{name:"font-size",type:l.size,triggersBounds:u.any},{name:"text-transform",type:l.textTransform,triggersBounds:u.any},{name:"text-wrap",type:l.textWrap,triggersBounds:u.any},{name:"text-overflow-wrap",type:l.textOverflowWrap,triggersBounds:u.any},{name:"text-max-width",type:l.size,triggersBounds:u.any},{name:"text-outline-width",type:l.size,triggersBounds:u.any},{name:"line-height",type:l.positiveNumber,triggersBounds:u.any}],v=[{name:"text-valign",type:l.valign,triggersBounds:u.any},{name:"text-halign",type:l.halign,triggersBounds:u.any},{name:"color",type:l.color},{name:"text-outline-color",type:l.color},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-background-color",type:l.color},{name:"text-background-opacity",type:l.zeroOneNumber},{name:"text-background-padding",type:l.size,triggersBounds:u.any},{name:"text-border-opacity",type:l.zeroOneNumber},{name:"text-border-color",type:l.color},{name:"text-border-width",type:l.size,triggersBounds:u.any},{name:"text-border-style",type:l.borderStyle,triggersBounds:u.any},{name:"text-background-shape",type:l.textBackgroundShape,triggersBounds:u.any},{name:"text-justification",type:l.justification},{name:"box-select-labels",type:l.bool,triggersBounds:u.any}],y=[{name:"events",type:l.bool,triggersZOrder:u.any},{name:"text-events",type:l.bool,triggersZOrder:u.any},{name:"box-selection",type:l.boxSelection,triggersZOrder:u.any}],p=[{name:"display",type:l.display,triggersZOrder:u.any,triggersBounds:u.any,triggersBoundsOfConnectedEdges:u.any,triggersBoundsOfParallelEdges:function(V,U,j){return V===U?!1:j.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:l.visibility,triggersZOrder:u.any},{name:"opacity",type:l.zeroOneNumber,triggersZOrder:u.zeroNonZero},{name:"text-opacity",type:l.zeroOneNumber},{name:"min-zoomed-font-size",type:l.size},{name:"z-compound-depth",type:l.zCompoundDepth,triggersZOrder:u.any},{name:"z-index-compare",type:l.zIndexCompare,triggersZOrder:u.any},{name:"z-index",type:l.number,triggersZOrder:u.any}],g=[{name:"overlay-padding",type:l.size,triggersBounds:u.any},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"overlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"overlay-corner-radius",type:l.cornerRadius}],m=[{name:"underlay-padding",type:l.size,triggersBounds:u.any},{name:"underlay-color",type:l.color},{name:"underlay-opacity",type:l.zeroOneNumber,triggersBounds:u.zeroNonZero},{name:"underlay-shape",type:l.overlayShape,triggersBounds:u.any},{name:"underlay-corner-radius",type:l.cornerRadius}],b=[{name:"transition-property",type:l.propList},{name:"transition-duration",type:l.time},{name:"transition-delay",type:l.time},{name:"transition-timing-function",type:l.easing}],w=function(V,U){return U.value==="label"?-V.poolIndex():U.pfValue},S=[{name:"height",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"width",type:l.nodeSize,triggersBounds:u.any,hashOverride:w},{name:"shape",type:l.nodeShape,triggersBounds:u.any},{name:"shape-polygon-points",type:l.polygonPointList,triggersBounds:u.any},{name:"corner-radius",type:l.cornerRadius},{name:"background-color",type:l.color},{name:"background-fill",type:l.fill},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-blacken",type:l.nOneOneNumber},{name:"background-gradient-stop-colors",type:l.colors},{name:"background-gradient-stop-positions",type:l.percentages},{name:"background-gradient-direction",type:l.gradientDirection},{name:"padding",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"padding-relative-to",type:l.paddingRelativeTo,triggersBounds:u.any},{name:"bounds-expansion",type:l.boundsExpansion,triggersBounds:u.any}],E=[{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size,triggersBounds:u.any},{name:"border-style",type:l.borderStyle},{name:"border-cap",type:l.lineCap},{name:"border-join",type:l.lineJoin},{name:"border-dash-pattern",type:l.numbers},{name:"border-dash-offset",type:l.number},{name:"border-position",type:l.linePosition}],x=[{name:"outline-color",type:l.color},{name:"outline-opacity",type:l.zeroOneNumber},{name:"outline-width",type:l.size,triggersBounds:u.any},{name:"outline-style",type:l.borderStyle},{name:"outline-offset",type:l.size,triggersBounds:u.any}],T=[{name:"background-image",type:l.urls},{name:"background-image-crossorigin",type:l.bgCrossOrigin},{name:"background-image-opacity",type:l.zeroOneNumbers},{name:"background-image-containment",type:l.bgContainment},{name:"background-image-smoothing",type:l.bools},{name:"background-position-x",type:l.bgPos},{name:"background-position-y",type:l.bgPos},{name:"background-width-relative-to",type:l.bgRelativeTo},{name:"background-height-relative-to",type:l.bgRelativeTo},{name:"background-repeat",type:l.bgRepeat},{name:"background-fit",type:l.bgFit},{name:"background-clip",type:l.bgClip},{name:"background-width",type:l.bgWH},{name:"background-height",type:l.bgWH},{name:"background-offset-x",type:l.bgPos},{name:"background-offset-y",type:l.bgPos}],B=[{name:"position",type:l.position,triggersBounds:u.any},{name:"compound-sizing-wrt-labels",type:l.compoundIncludeLabels,triggersBounds:u.any},{name:"min-width",type:l.size,triggersBounds:u.any},{name:"min-width-bias-left",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-width-bias-right",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height",type:l.size,triggersBounds:u.any},{name:"min-height-bias-top",type:l.sizeMaybePercent,triggersBounds:u.any},{name:"min-height-bias-bottom",type:l.sizeMaybePercent,triggersBounds:u.any}],I=[{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"line-fill",type:l.fill},{name:"line-cap",type:l.lineCap},{name:"line-opacity",type:l.zeroOneNumber},{name:"line-dash-pattern",type:l.numbers},{name:"line-dash-offset",type:l.number},{name:"line-outline-width",type:l.size},{name:"line-outline-color",type:l.color},{name:"line-gradient-stop-colors",type:l.colors},{name:"line-gradient-stop-positions",type:l.percentages},{name:"curve-style",type:l.curveStyle,triggersBounds:u.any,triggersBoundsOfParallelEdges:function(V,U){return V===U?!1:V==="bezier"||U==="bezier"}},{name:"haystack-radius",type:l.zeroOneNumber,triggersBounds:u.any},{name:"source-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"target-endpoint",type:l.edgeEndpoint,triggersBounds:u.any},{name:"control-point-step-size",type:l.size,triggersBounds:u.any},{name:"control-point-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"control-point-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-distances",type:l.bidirectionalSizes,triggersBounds:u.any},{name:"segment-weights",type:l.numbers,triggersBounds:u.any},{name:"segment-radii",type:l.numbers,triggersBounds:u.any},{name:"radius-type",type:l.radiusType,triggersBounds:u.any},{name:"taxi-turn",type:l.bidirectionalSizeMaybePercent,triggersBounds:u.any},{name:"taxi-turn-min-distance",type:l.size,triggersBounds:u.any},{name:"taxi-direction",type:l.axisDirection,triggersBounds:u.any},{name:"taxi-radius",type:l.number,triggersBounds:u.any},{name:"edge-distances",type:l.edgeDistances,triggersBounds:u.any},{name:"arrow-scale",type:l.positiveNumber,triggersBounds:u.any},{name:"loop-direction",type:l.angle,triggersBounds:u.any},{name:"loop-sweep",type:l.angle,triggersBounds:u.any},{name:"source-distance-from-node",type:l.size,triggersBounds:u.any},{name:"target-distance-from-node",type:l.size,triggersBounds:u.any}],_=[{name:"ghost",type:l.bool,triggersBounds:u.any},{name:"ghost-offset-x",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-offset-y",type:l.bidirectionalSize,triggersBounds:u.any},{name:"ghost-opacity",type:l.zeroOneNumber}],D=[{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"active-bg-color",type:l.color},{name:"active-bg-opacity",type:l.zeroOneNumber},{name:"active-bg-size",type:l.size},{name:"outside-texture-bg-color",type:l.color},{name:"outside-texture-bg-opacity",type:l.zeroOneNumber}],A=[];_t.pieBackgroundN=16,A.push({name:"pie-size",type:l.sizeMaybePercent}),A.push({name:"pie-hole",type:l.sizeMaybePercent}),A.push({name:"pie-start-angle",type:l.angle});for(var O=1;O<=_t.pieBackgroundN;O++)A.push({name:"pie-"+O+"-background-color",type:l.color}),A.push({name:"pie-"+O+"-background-size",type:l.percent}),A.push({name:"pie-"+O+"-background-opacity",type:l.zeroOneNumber});var k=[];_t.stripeBackgroundN=16,k.push({name:"stripe-size",type:l.sizeMaybePercent}),k.push({name:"stripe-direction",type:l.axisDirectionPrimary});for(var P=1;P<=_t.stripeBackgroundN;P++)k.push({name:"stripe-"+P+"-background-color",type:l.color}),k.push({name:"stripe-"+P+"-background-size",type:l.percent}),k.push({name:"stripe-"+P+"-background-opacity",type:l.zeroOneNumber});var M=[],F=_t.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:l.arrowShape,triggersBounds:u.any},{name:"arrow-color",type:l.color},{name:"arrow-fill",type:l.arrowFill},{name:"arrow-width",type:l.arrowWidth}].forEach(function(N){F.forEach(function(V){var U=V+"-"+N.name,j=N.type,ae=N.triggersBounds;M.push({name:U,type:j,triggersBounds:ae})})},{});var W=_t.properties=[].concat(y,b,p,g,m,_,v,h,c,f,d,S,E,x,T,A,k,B,I,M,D),H=_t.propertyGroups={behavior:y,transition:b,visibility:p,overlay:g,underlay:m,ghost:_,commonLabel:v,labelDimensions:h,mainLabel:c,sourceLabel:f,targetLabel:d,nodeBody:S,nodeBorder:E,nodeOutline:x,backgroundImage:T,pie:A,stripe:k,compound:B,edgeLine:I,edgeArrow:M,core:D},z=_t.propertyGroupNames={},$=_t.propertyGroupKeys=Object.keys(H);$.forEach(function(N){z[N]=H[N].map(function(V){return V.name}),H[N].forEach(function(V){return V.groupKey=N})});var X=_t.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];_t.propertyNames=W.map(function(N){return N.name});for(var te=0;te<W.length;te++){var R=W[te];W[R.name]=R}for(var L=0;L<X.length;L++){var K=X[L],ne=W[K.pointsTo],Y={name:K.name,alias:!0,pointsTo:ne};W.push(Y),W[K.name]=Y}})();_t.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};_t.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=we({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=_t.pieBackgroundN;c++){var f=l.name.replace("{{i}}",c),d=l.value;u[f]=d}return u},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(u,l){for(var c=1;c<=_t.stripeBackgroundN;c++){var f=l.name.replace("{{i}}",c),d=l.value;u[f]=d}return u},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(u,l){return _t.arrowPrefixes.forEach(function(c){var f=c+"-"+l.name,d=l.value;u[f]=d}),u},{})),t={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,s=e[i],o=this.parse(i,s);t[i]=o}}return r.defaultProperties=t,r.defaultProperties};_t.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var Cu={};Cu.parse=function(r,e,t,n){var a=this;if(xt(e))return a.parseImplWarn(r,e,t,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,s=t?"t":"f",o=""+e,u=uy(r,o,s,i),l=a.propCache=a.propCache||[],c;return(c=l[u])||(c=l[u]=a.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(c=nn(c),c&&(c.value=nn(c.value))),c};Cu.parseImplWarn=function(r,e,t,n){var a=this.parseImpl(r,e,t,n);return!a&&e!=null&&ot("The style property `".concat(r,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&ot("The style value of `label` is deprecated for `"+a.name+"`"),a};Cu.parseImpl=function(r,e,t,n){var a=this;r=Af(r);var i=a.properties[r],s=e,o=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,r=i.name);var u=ge(e);u&&(e=e.trim());var l=i.type;if(!l)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(xt(e))return{name:r,value:e,strValue:"fn",mapped:o.fn,bypass:t};var c,f;if(!(!u||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(o.data.regex).exec(e))){if(t)return!1;var d=o.data;return{name:r,value:c,strValue:""+e,mapped:d,field:c[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(f=new RegExp(o.mapData.regex).exec(e))){if(t||l.multiple)return!1;var h=o.mapData;if(!(l.color||l.number))return!1;var v=this.parse(r,f[4]);if(!v||v.mapped)return!1;var y=this.parse(r,f[5]);if(!y||y.mapped)return!1;if(v.pfValue===y.pfValue||v.strValue===y.strValue)return ot("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+v.strValue+"`"),this.parse(r,v.strValue);if(l.color){var p=v.value,g=y.value,m=p[0]===g[0]&&p[1]===g[1]&&p[2]===g[2]&&(p[3]===g[3]||(p[3]==null||p[3]===1)&&(g[3]==null||g[3]===1));if(m)return!1}return{name:r,value:f,strValue:""+e,mapped:h,field:f[1],fieldMin:parseFloat(f[2]),fieldMax:parseFloat(f[3]),valueMin:v.value,valueMax:y.value,bypass:t}}}if(l.multiple&&n!=="multiple"){var b;if(u?b=e.split(/\s+/):dt(e)?b=e:b=[e],l.evenMultiple&&b.length%2!==0)return null;for(var w=[],S=[],E=[],x="",T=!1,B=0;B<b.length;B++){var I=a.parse(r,b[B],t,"multiple");T=T||ge(I.value),w.push(I.value),E.push(I.pfValue!=null?I.pfValue:I.value),S.push(I.units),x+=(B>0?" ":"")+I.strValue}return l.validate&&!l.validate(w,S)?null:l.singleEnum&&T?w.length===1&&ge(w[0])?{name:r,value:w[0],strValue:w[0],bypass:t}:null:{name:r,value:w,pfValue:E,strValue:x,bypass:t,units:S}}var _=function(){for(var Y=0;Y<l.enums.length;Y++){var N=l.enums[Y];if(N===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(l.number){var D,A="px";if(l.units&&(D=l.units),l.implicitUnits&&(A=l.implicitUnits),!l.unitless)if(u){var O="px|em"+(l.allowPercent?"|\\%":"");D&&(O=D);var k=e.match("^("+Ft+")("+O+")?$");k&&(e=k[1],D=k[2]||A)}else(!D||l.implicitUnits)&&(D=A);if(e=parseFloat(e),isNaN(e)&&l.enums===void 0)return null;if(isNaN(e)&&l.enums!==void 0)return e=s,_();if(l.integer&&!i1(e)||l.min!==void 0&&(e<l.min||l.strictMin&&e===l.min)||l.max!==void 0&&(e>l.max||l.strictMax&&e===l.max))return null;var P={name:r,value:e,strValue:""+e+(D||""),units:D,bypass:t};return l.unitless||D!=="px"&&D!=="em"?P.pfValue=e:P.pfValue=D==="px"||!D?e:this.getEmSizeInPixels()*e,(D==="ms"||D==="s")&&(P.pfValue=D==="ms"?e:1e3*e),(D==="deg"||D==="rad")&&(P.pfValue=D==="rad"?e:pS(e)),D==="%"&&(P.pfValue=e/100),P}else if(l.propList){var M=[],F=""+e;if(F!=="none"){for(var W=F.split(/\s*,\s*|\s+/),H=0;H<W.length;H++){var z=W[H].trim();a.properties[z]?M.push(z):ot("`"+z+"` is not a valid property name")}if(M.length===0)return null}return{name:r,value:M,strValue:M.length===0?"none":M.join(" "),bypass:t}}else if(l.color){var $=ty(e);return $?{name:r,value:$,pfValue:$,strValue:"rgb("+$[0]+","+$[1]+","+$[2]+")",bypass:t}:null}else if(l.regex||l.regexes){if(l.enums){var X=_();if(X)return X}for(var te=l.regexes?l.regexes:[l.regex],R=0;R<te.length;R++){var L=new RegExp(te[R]),K=L.exec(e);if(K)return{name:r,value:l.singleRegexMatchValue?K[1]:K,strValue:""+e,bypass:t}}return null}else return l.string?{name:r,value:""+e,strValue:""+e,bypass:t}:l.enums?_():null};var qt=function(e){if(!(this instanceof qt))return new qt(e);if(!Df(e)){bt("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Zt=qt.prototype;Zt.instanceString=function(){return"style"};Zt.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Zt.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Zt.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Zt.selector=function(r){var e=r==="core"?null:new Jn(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Zt.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var a=r.properties[n],i=t[a.name];i===void 0&&(i=t[fu(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Zt.style=Zt.css;Zt.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.name.match(/stripe-(\d+)-background-size/)&&t.value&&(this._private.hasStripe=!0),t.mapped&&this[n].mappedProperties.push(t);var a=!this[n].selector;a&&(this._private.coreStyle[t.name]=t)}return this};Zt.append=function(r){return Qg(r)?r.appendToStyle(this):dt(r)?this.appendFromJson(r):ge(r)&&this.appendFromString(r),this};qt.fromJson=function(r,e){var t=new qt(r);return t.fromJson(e),t};qt.fromString=function(r,e){return new qt(r).fromString(e)};[$t,As,Gf,un,Tu,Hf,_t,Cu].forEach(function(r){we(Zt,r)});qt.types=Zt.types;qt.properties=Zt.properties;qt.propertyGroups=Zt.propertyGroups;qt.propertyGroupNames=Zt.propertyGroupNames;qt.propertyGroupKeys=Zt.propertyGroupKeys;var bT={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return Qg(e)?t.style=e.generateStyle(this):dt(e)?t.style=qt.fromJson(this,e):ge(e)?t.style=qt.fromString(this,e):t.style=qt(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},wT="single",Ra={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=wT),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,a,i,s,o;switch(e.length){case 0:return t;case 1:if(ge(e[0]))return n=e[0],t[n];if(Ke(e[0])){if(!this._private.panningEnabled)return this;i=e[0],s=i.x,o=i.y,ie(s)&&(t.x=s),ie(o)&&(t.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&ie(a)&&(t[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,a=this._private.pan,i,s,o,u,l;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Ke(e)&&(o=n[0],u=o.x,l=o.y,ie(u)&&(a.x+=u),ie(l)&&(a.y+=l),this.emit("pan viewport"));break;case 2:i=e,s=t,(i==="x"||i==="y")&&ie(s)&&(a[i]+=s),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(ie(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(ge(e)){var a=e;e=this.$(a)}else if(u1(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else xr(e)||(e=this.mutableElements());if(!(xr(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),o=this.height(),u;if(t=ie(t)?t:0,!isNaN(s)&&!isNaN(o)&&s>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){u=Math.min((s-2*t)/n.w,(o-2*t)/n.h),u=u>this._private.maxZoom?this._private.maxZoom:u,u=u<this._private.minZoom?this._private.minZoom:u;var l={x:(s-u*(n.x1+n.x2))/2,y:(o-u*(n.y1+n.y2))/2};return{zoom:u,pan:l}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var a=e;e=a.min,t=a.max}return ie(e)&&ie(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):ie(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:ie(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,a=t.zoom,i,s,o=!1;if(t.zoomingEnabled||(o=!0),ie(e)?s=e:Ke(e)&&(s=e.level,e.position!=null?i=vu(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(o=!0)),s=s>t.maxZoom?t.maxZoom:s,s=s<t.minZoom?t.minZoom:s,o||!ie(s)||s===a||i!=null&&(!ie(i.x)||!ie(i.y)))return null;if(i!=null){var u=n,l=a,c=s,f={x:-c/l*(i.x-u.x)+i.x,y:-c/l*(i.y-u.y)+i.y};return{zoomed:!0,panned:!0,zoom:c,pan:f}}else return{zoomed:!0,panned:!1,zoom:s,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,a=!0,i=[],s=!1,o=!1;if(!e)return this;if(ie(e.zoom)||(n=!1),Ke(e.pan)||(a=!1),!n&&!a)return this;if(n){var u=e.zoom;u<t.minZoom||u>t.maxZoom||!t.zoomingEnabled?s=!0:(t.zoom=u,i.push("zoom"))}if(a&&(!s||!e.cancelOnFailedZoom)&&t.panningEnabled){var l=e.pan;ie(l.x)&&(t.pan.x=l.x,o=!1),ie(l.y)&&(t.pan.y=l.y,o=!1),o||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(ge(e)){var n=e;e=this.mutableElements().filter(n)}else xr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),s=this.height();t=t===void 0?this._private.zoom:t;var o={x:(i-t*(a.x1+a.x2))/2,y:(s-t*(a.y1+a.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var a=n.window().getComputedStyle(t),i=function(o){return parseFloat(a.getPropertyValue(o))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Ra.centre=Ra.center;Ra.autolockNodes=Ra.autolock;Ra.autoungrabifyNodes=Ra.autoungrabify;var ds={data:nt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:nt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:nt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:nt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};ds.attr=ds.data;ds.removeAttr=ds.removeData;var hs=function(e){var t=this;e=we({},e);var n=e.container;n&&!Ko(n)&&Ko(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=t;var s=kt!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=we({name:s?"grid":"null"},o.layout),o.renderer=we({name:s?"canvas":"null"},o.renderer);var u=function(v,y,p){return y!==void 0?y:p!==void 0?p:v},l=this._private={container:n,ready:!1,options:o,elements:new Ht(this),listeners:[],aniEles:new Ht(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:u(!0,o.zoomingEnabled),userZoomingEnabled:u(!0,o.userZoomingEnabled),panningEnabled:u(!0,o.panningEnabled),userPanningEnabled:u(!0,o.userPanningEnabled),boxSelectionEnabled:u(!0,o.boxSelectionEnabled),autolock:u(!1,o.autolock,o.autolockNodes),autoungrabify:u(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:u(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?s:o.styleEnabled,zoom:ie(o.zoom)?o.zoom:1,pan:{x:Ke(o.pan)&&ie(o.pan.x)?o.pan.x:0,y:Ke(o.pan)&&ie(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:u(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=function(v,y){var p=v.some(l1);if(p)return Ti.all(v).then(y);y(v)};l.styleEnabled&&t.setStyle([]);var f=we({},o,o.renderer);t.initRenderer(f);var d=function(v,y,p){t.notifications(!1);var g=t.mutableElements();g.length>0&&g.remove(),v!=null&&(Ke(v)||dt(v))&&t.add(v),t.one("layoutready",function(b){t.notifications(!0),t.emit(b),t.one("load",y),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",p),t.emit("done")});var m=we({},t._private.options.layout);m.eles=t.elements(),t.layout(m).run()};c([o.style,o.elements],function(h){var v=h[0],y=h[1];l.styleEnabled&&t.style().append(v),d(y,function(){t.startAnimationLoop(),l.ready=!0,xt(o.ready)&&t.on("ready",o.ready);for(var p=0;p<i.length;p++){var g=i[p];t.on("ready",g)}a&&(a.readies=[]),t.emit("ready")},o.done)})},tu=hs.prototype;we(tu,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return kt;var t=this._private.container.ownerDocument;return t===void 0||t==null?kt:t.defaultView||kt},mount:function(e){if(e!=null){var t=this,n=t._private,a=n.options;return!Ko(e)&&Ko(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(we({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),t.startAnimationLoop(),t.style(a.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return nn(this._private.options)},json:function(e){var t=this,n=t._private,a=t.mutableElements(),i=function(w){return t.getElementById(w.id())};if(Ke(e)){if(t.startBatch(),e.elements){var s={},o=function(w,S){for(var E=[],x=[],T=0;T<w.length;T++){var B=w[T];if(!B.data.id){ot("cy.json() cannot handle elements without an ID attribute");continue}var I=""+B.data.id,_=t.getElementById(I);s[I]=!0,_.length!==0?x.push({ele:_,json:B}):(S&&(B.group=S),E.push(B))}t.add(E);for(var D=0;D<x.length;D++){var A=x[D],O=A.ele,k=A.json;O.json(k)}};if(dt(e.elements))o(e.elements);else for(var u=["nodes","edges"],l=0;l<u.length;l++){var c=u[l],f=e.elements[c];dt(f)&&o(f,c)}var d=t.collection();a.filter(function(b){return!s[b.id()]}).forEach(function(b){b.isParent()?d.merge(b):b.remove()}),d.forEach(function(b){return b.children().move({parent:null})}),d.forEach(function(b){return i(b).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var h=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],v=0;v<h.length;v++){var y=h[v];e[y]!=null&&t[y](e[y])}return t.endBatch(),this}else{var p=!!e,g={};p?g.elements=this.elements().map(function(b){return b.json()}):(g.elements={},a.forEach(function(b){var w=b.group();g.elements[w]||(g.elements[w]=[]),g.elements[w].push(b.json())})),this._private.styleEnabled&&(g.style=t.style().json()),g.data=nn(t.data());var m=n.options;return g.zoomingEnabled=n.zoomingEnabled,g.userZoomingEnabled=n.userZoomingEnabled,g.zoom=n.zoom,g.minZoom=n.minZoom,g.maxZoom=n.maxZoom,g.panningEnabled=n.panningEnabled,g.userPanningEnabled=n.userPanningEnabled,g.pan=nn(n.pan),g.boxSelectionEnabled=n.boxSelectionEnabled,g.renderer=nn(m.renderer),g.hideEdgesOnViewport=m.hideEdgesOnViewport,g.textureOnViewport=m.textureOnViewport,g.wheelSensitivity=m.wheelSensitivity,g.motionBlur=m.motionBlur,g.multiClickDebounceTime=m.multiClickDebounceTime,g}}});tu.$id=tu.getElementById;[lT,vT,Qy,Uc,fo,gT,qc,ho,bT,Ra,ds].forEach(function(r){we(tu,r)});var ST={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},xT={maximal:!1,acyclic:!1},qa=function(e){return e.scratch("breadthfirst")},Rv=function(e,t){return e.scratch("breadthfirst",t)};function Jy(r){this.options=we({},ST,xT,r)}Jy.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=t.nodes().filter(function(me){return me.isChildless()}),a=t,i=r.directed,s=r.acyclic||r.maximal||r.maximalAdjustments>0,o=!!r.boundingBox,u=ar(o?r.boundingBox:structuredClone(e.extent())),l;if(xr(r.roots))l=r.roots;else if(dt(r.roots)){for(var c=[],f=0;f<r.roots.length;f++){var d=r.roots[f],h=e.getElementById(d);c.push(h)}l=e.collection(c)}else if(ge(r.roots))l=e.$(r.roots);else if(i)l=n.roots();else{var v=t.components();l=e.collection();for(var y=function(){var se=v[p],ve=se.maxDegree(!1),pe=se.filter(function(Ee){return Ee.degree(!1)===ve});l=l.add(pe)},p=0;p<v.length;p++)y()}var g=[],m={},b=function(se,ve){g[ve]==null&&(g[ve]=[]);var pe=g[ve].length;g[ve].push(se),Rv(se,{index:pe,depth:ve})},w=function(se,ve){var pe=qa(se),Ee=pe.depth,ye=pe.index;g[Ee][ye]=null,se.isChildless()&&b(se,ve)};a.bfs({roots:l,directed:r.directed,visit:function(se,ve,pe,Ee,ye){var Ne=se[0],He=Ne.id();Ne.isChildless()&&b(Ne,ye),m[He]=!0}});for(var S=[],E=0;E<n.length;E++){var x=n[E];m[x.id()]||S.push(x)}var T=function(se){for(var ve=g[se],pe=0;pe<ve.length;pe++){var Ee=ve[pe];if(Ee==null){ve.splice(pe,1),pe--;continue}Rv(Ee,{depth:se,index:pe})}},B=function(se,ve){for(var pe=qa(se),Ee=se.incomers().filter(function(xe){return xe.isNode()&&t.has(xe)}),ye=-1,Ne=se.id(),He=0;He<Ee.length;He++){var Qe=Ee[He],Je=qa(Qe);ye=Math.max(ye,Je.depth)}if(pe.depth<=ye){if(!r.acyclic&&ve[Ne])return null;var et=ye+1;return w(se,et),ve[Ne]=et,!0}return!1};if(i&&s){var I=[],_={},D=function(se){return I.push(se)},A=function(){return I.shift()};for(n.forEach(function(me){return I.push(me)});I.length>0;){var O=A(),k=B(O,_);if(k)O.outgoers().filter(function(me){return me.isNode()&&t.has(me)}).forEach(D);else if(k===null){ot("Detected double maximal shift for node `"+O.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var P=0;if(r.avoidOverlap)for(var M=0;M<n.length;M++){var F=n[M],W=F.layoutDimensions(r),H=W.w,z=W.h;P=Math.max(P,H,z)}var $={},X=function(se){if($[se.id()])return $[se.id()];for(var ve=qa(se).depth,pe=se.neighborhood(),Ee=0,ye=0,Ne=0;Ne<pe.length;Ne++){var He=pe[Ne];if(!(He.isEdge()||He.isParent()||!n.has(He))){var Qe=qa(He);if(Qe!=null){var Je=Qe.index,et=Qe.depth;if(!(Je==null||et==null)){var xe=g[et].length;et<ve&&(Ee+=Je/xe,ye++)}}}}return ye=Math.max(1,ye),Ee=Ee/ye,ye===0&&(Ee=0),$[se.id()]=Ee,Ee},te=function(se,ve){var pe=X(se),Ee=X(ve),ye=pe-Ee;return ye===0?ey(se.id(),ve.id()):ye};r.depthSort!==void 0&&(te=r.depthSort);for(var R=g.length,L=0;L<R;L++)g[L].sort(te),T(L);for(var K=[],ne=0;ne<S.length;ne++)K.push(S[ne]);var Y=function(){for(var se=0;se<R;se++)T(se)};K.length&&(g.unshift(K),R=g.length,Y());for(var N=0,V=0;V<R;V++)N=Math.max(g[V].length,N);var U={x:u.x1+u.w/2,y:u.y1+u.h/2},j=n.reduce(function(me,se){return function(ve){return{w:me.w===-1?ve.w:(me.w+ve.w)/2,h:me.h===-1?ve.h:(me.h+ve.h)/2}}(se.boundingBox({includeLabels:r.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),ae=Math.max(R===1?0:o?(u.h-r.padding*2-j.h)/(R-1):(u.h-r.padding*2-j.h)/(R+1),P),he=g.reduce(function(me,se){return Math.max(me,se.length)},0),Ge=function(se){var ve=qa(se),pe=ve.depth,Ee=ve.index;if(r.circle){var ye=Math.min(u.w/2/R,u.h/2/R);ye=Math.max(ye,P);var Ne=ye*pe+ye-(R>0&&g[0].length<=3?ye/2:0),He=2*Math.PI/g[pe].length*Ee;return pe===0&&g[0].length===1&&(Ne=1),{x:U.x+Ne*Math.cos(He),y:U.y+Ne*Math.sin(He)}}else{var Qe=g[pe].length,Je=Math.max(Qe===1?0:o?(u.w-r.padding*2-j.w)/((r.grid?he:Qe)-1):(u.w-r.padding*2-j.w)/((r.grid?he:Qe)+1),P),et={x:U.x+(Ee+1-(Qe+1)/2)*Je,y:U.y+(pe+1-(R+1)/2)*ae};return et}},Ce={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Ce).indexOf(r.direction)===-1&&bt("Invalid direction '".concat(r.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Ce).join(", ")));var Se=function(se){return N1(Ge(se),u,Ce[r.direction])};return t.nodes().layoutPositions(this,r,Se),this};var ET={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function em(r){this.options=we({},ET,r)}em.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var s=ar(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,l=u/Math.max(1,i.length-1),c,f=0,d=0;d<i.length;d++){var h=i[d],v=h.layoutDimensions(e),y=v.w,p=v.h;f=Math.max(f,y,p)}if(ie(e.radius)?c=e.radius:i.length<=1?c=0:c=Math.min(s.h,s.w)/2-f,i.length>1&&e.avoidOverlap){f*=1.75;var g=Math.cos(l)-Math.cos(0),m=Math.sin(l)-Math.sin(0),b=Math.sqrt(f*f/(g*g+m*m));c=Math.max(b,c)}var w=function(E,x){var T=e.startAngle+x*l*(a?1:-1),B=c*Math.cos(T),I=c*Math.sin(T),_={x:o.x+B,y:o.y+I};return _};return n.nodes().layoutPositions(this,e,w),this};var TT={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function tm(r){this.options=we({},TT,r)}tm.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,a=e.eles,i=a.nodes().not(":parent"),s=ar(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:s.x1+s.w/2,y:s.y1+s.h/2},u=[],l=0,c=0;c<i.length;c++){var f=i[c],d=void 0;d=e.concentric(f),u.push({value:d,node:f}),f._private.scratch.concentric=d}i.updateStyle();for(var h=0;h<i.length;h++){var v=i[h],y=v.layoutDimensions(e);l=Math.max(l,y.w,y.h)}u.sort(function(ae,he){return he.value-ae.value});for(var p=e.levelWidth(i),g=[[]],m=g[0],b=0;b<u.length;b++){var w=u[b];if(m.length>0){var S=Math.abs(m[0].value-w.value);S>=p&&(m=[],g.push(m))}m.push(w)}var E=l+e.minNodeSpacing;if(!e.avoidOverlap){var x=g.length>0&&g[0].length>1,T=Math.min(s.w,s.h)/2-E,B=T/(g.length+x?1:0);E=Math.min(E,B)}for(var I=0,_=0;_<g.length;_++){var D=g[_],A=e.sweep===void 0?2*Math.PI-2*Math.PI/D.length:e.sweep,O=D.dTheta=A/Math.max(1,D.length-1);if(D.length>1&&e.avoidOverlap){var k=Math.cos(O)-Math.cos(0),P=Math.sin(O)-Math.sin(0),M=Math.sqrt(E*E/(k*k+P*P));I=Math.max(M,I)}D.r=I,I+=E}if(e.equidistant){for(var F=0,W=0,H=0;H<g.length;H++){var z=g[H],$=z.r-W;F=Math.max(F,$)}W=0;for(var X=0;X<g.length;X++){var te=g[X];X===0&&(W=te.r),te.r=W,W+=F}}for(var R={},L=0;L<g.length;L++)for(var K=g[L],ne=K.dTheta,Y=K.r,N=0;N<K.length;N++){var V=K[N],U=e.startAngle+(t?1:-1)*ne*N,j={x:o.x+Y*Math.cos(U),y:o.y+Y*Math.sin(U)};R[V.node.id()]=j}return a.nodes().layoutPositions(this,e,function(ae){var he=ae.id();return R[he]}),this};var lc,CT={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Bu(r){this.options=we({},CT,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(a){var i=a.source().data("id"),s=a.target().data("id"),o=e.some(function(l){return l.data("id")===i}),u=e.some(function(l){return l.data("id")===s});return!o||!u});this.options.eles=this.options.eles.not(n)}Bu.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?lc=!0:lc=!1;var n=BT(e,t,r);lc&&_T(n),r.randomize&&DT(n);var a=Cn(),i=function(){AT(n,e,r),r.fit===!0&&e.fit(r.padding)},s=function(d){return!(t.stopped||d>=r.numIter||(RT(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},o=function(){if(r.animate===!0||r.animate===!1)i(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var d=r.eles.nodes(),h=nm(n,r,d);d.layoutPositions(t,r,h)}},u=0,l=!0;if(r.animate===!0){var c=function(){for(var d=0;l&&d<r.refresh;)l=s(u),u++,d++;if(!l)Mv(n,r),o();else{var h=Cn();h-a>=r.animationThreshold&&i(),jo(c)}};c()}else{for(;l;)l=s(u),u++;Mv(n,r),o()}return this};Bu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Bu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var BT=function(e,t,n){for(var a=n.eles.edges(),i=n.eles.nodes(),s=ar(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:s.w,clientHeight:s.h,boundingBox:s},u=n.eles.components(),l={},c=0;c<u.length;c++)for(var f=u[c],d=0;d<f.length;d++){var h=f[d];l[h.id()]=c}for(var c=0;c<o.nodeSize;c++){var v=i[c],y=v.layoutDimensions(n),p={};p.isLocked=v.locked(),p.id=v.data("id"),p.parentId=v.data("parent"),p.cmptId=l[v.id()],p.children=[],p.positionX=v.position("x"),p.positionY=v.position("y"),p.offsetX=0,p.offsetY=0,p.height=y.w,p.width=y.h,p.maxX=p.positionX+p.width/2,p.minX=p.positionX-p.width/2,p.maxY=p.positionY+p.height/2,p.minY=p.positionY-p.height/2,p.padLeft=parseFloat(v.style("padding")),p.padRight=parseFloat(v.style("padding")),p.padTop=parseFloat(v.style("padding")),p.padBottom=parseFloat(v.style("padding")),p.nodeRepulsion=xt(n.nodeRepulsion)?n.nodeRepulsion(v):n.nodeRepulsion,o.layoutNodes.push(p),o.idToIndex[p.id]=c}for(var g=[],m=0,b=-1,w=[],c=0;c<o.nodeSize;c++){var v=o.layoutNodes[c],S=v.parentId;S!=null?o.layoutNodes[o.idToIndex[S]].children.push(v.id):(g[++b]=v.id,w.push(v.id))}for(o.graphSet.push(w);m<=b;){var E=g[m++],x=o.idToIndex[E],h=o.layoutNodes[x],T=h.children;if(T.length>0){o.graphSet.push(T);for(var c=0;c<T.length;c++)g[++b]=T[c]}}for(var c=0;c<o.graphSet.length;c++)for(var B=o.graphSet[c],d=0;d<B.length;d++){var I=o.idToIndex[B[d]];o.indexToGraph[I]=c}for(var c=0;c<o.edgeSize;c++){var _=a[c],D={};D.id=_.data("id"),D.sourceId=_.data("source"),D.targetId=_.data("target");var A=xt(n.idealEdgeLength)?n.idealEdgeLength(_):n.idealEdgeLength,O=xt(n.edgeElasticity)?n.edgeElasticity(_):n.edgeElasticity,k=o.idToIndex[D.sourceId],P=o.idToIndex[D.targetId],M=o.indexToGraph[k],F=o.indexToGraph[P];if(M!=F){for(var W=IT(D.sourceId,D.targetId,o),H=o.graphSet[W],z=0,p=o.layoutNodes[k];H.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],z++;for(p=o.layoutNodes[P];H.indexOf(p.id)===-1;)p=o.layoutNodes[o.idToIndex[p.parentId]],z++;A*=z*n.nestingFactor}D.idealLength=A,D.elasticity=O,o.layoutEdges.push(D)}return o},IT=function(e,t,n){var a=rm(e,t,0,n);return 2>a.count?0:a.graph},rm=function(e,t,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var s=0,o=0;o<i.length;o++){var u=i[o],l=a.idToIndex[u],c=a.layoutNodes[l].children;if(c.length!==0){var f=a.indexToGraph[a.idToIndex[c[0]]],d=rm(e,t,f,a);if(d.count!==0)if(d.count===1){if(s++,s===2)break}else return d}}return{count:s,graph:n}},_T,DT=function(e,t){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var s=e.layoutNodes[i];s.children.length===0&&!s.isLocked&&(s.positionX=Math.random()*n,s.positionY=Math.random()*a)}},nm=function(e,t,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(s){var o=e.layoutNodes[e.idToIndex[s.data("id")]];i.x1=Math.min(i.x1,o.positionX),i.x2=Math.max(i.x2,o.positionX),i.y1=Math.min(i.y1,o.positionY),i.y2=Math.max(i.y2,o.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(s,o){var u=e.layoutNodes[e.idToIndex[s.data("id")]];if(t.boundingBox){var l=i.w===0?.5:(u.positionX-i.x1)/i.w,c=i.h===0?.5:(u.positionY-i.y1)/i.h;return{x:a.x1+l*a.w,y:a.y1+c*a.h}}else return{x:u.positionX,y:u.positionY}}},AT=function(e,t,n){var a=n.layout,i=n.eles.nodes(),s=nm(e,n,i);i.positions(s),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},RT=function(e,t,n){OT(e,t),PT(e),LT(e,t),FT(e),NT(e)},OT=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,s=0;s<i;s++)for(var o=e.layoutNodes[e.idToIndex[a[s]]],u=s+1;u<i;u++){var l=e.layoutNodes[e.idToIndex[a[u]]];MT(o,l,e,t)}},Ov=function(e){return-1+2*e*Math.random()},MT=function(e,t,n,a){var i=e.cmptId,s=t.cmptId;if(!(i!==s&&!n.isCompound)){var o=t.positionX-e.positionX,u=t.positionY-e.positionY,l=1;o===0&&u===0&&(o=Ov(l),u=Ov(l));var c=kT(e,t,o,u);if(c>0)var f=a.nodeOverlap*c,d=Math.sqrt(o*o+u*u),h=f*o/d,v=f*u/d;else var y=ru(e,o,u),p=ru(t,-1*o,-1*u),g=p.x-y.x,m=p.y-y.y,b=g*g+m*m,d=Math.sqrt(b),f=(e.nodeRepulsion+t.nodeRepulsion)/b,h=f*g/d,v=f*m/d;e.isLocked||(e.offsetX-=h,e.offsetY-=v),t.isLocked||(t.offsetX+=h,t.offsetY+=v)}},kT=function(e,t,n,a){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var s=e.maxY-t.minY;else var s=t.maxY-e.minY;return i>=0&&s>=0?Math.sqrt(i*i+s*s):0},ru=function(e,t,n){var a=e.positionX,i=e.positionY,s=e.height||1,o=e.width||1,u=n/t,l=s/o,c={};return t===0&&0<n||t===0&&0>n?(c.x=a,c.y=i+s/2,c):0<t&&-1*l<=u&&u<=l?(c.x=a+o/2,c.y=i+o*n/2/t,c):0>t&&-1*l<=u&&u<=l?(c.x=a-o/2,c.y=i-o*n/2/t,c):0<n&&(u<=-1*l||u>=l)?(c.x=a+s*t/2/n,c.y=i+s/2,c):(0>n&&(u<=-1*l||u>=l)&&(c.x=a-s*t/2/n,c.y=i-s/2),c)},PT=function(e,t){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],s=e.layoutNodes[i],o=e.idToIndex[a.targetId],u=e.layoutNodes[o],l=u.positionX-s.positionX,c=u.positionY-s.positionY;if(!(l===0&&c===0)){var f=ru(s,l,c),d=ru(u,-1*l,-1*c),h=d.x-f.x,v=d.y-f.y,y=Math.sqrt(h*h+v*v),p=Math.pow(a.idealLength-y,2)/a.elasticity;if(y!==0)var g=p*h/y,m=p*v/y;else var g=0,m=0;s.isLocked||(s.offsetX+=g,s.offsetY+=m),u.isLocked||(u.offsetX-=g,u.offsetY-=m)}}},LT=function(e,t){if(t.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],s=i.length;if(a===0)var o=e.clientHeight/2,u=e.clientWidth/2;else var l=e.layoutNodes[e.idToIndex[i[0]]],c=e.layoutNodes[e.idToIndex[l.parentId]],o=c.positionX,u=c.positionY;for(var f=0;f<s;f++){var d=e.layoutNodes[e.idToIndex[i[f]]];if(!d.isLocked){var h=o-d.positionX,v=u-d.positionY,y=Math.sqrt(h*h+v*v);if(y>n){var p=t.gravity*h/y,g=t.gravity*v/y;d.offsetX+=p,d.offsetY+=g}}}}},FT=function(e,t){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var s=n[a++],o=e.idToIndex[s],u=e.layoutNodes[o],l=u.children;if(0<l.length&&!u.isLocked){for(var c=u.offsetX,f=u.offsetY,d=0;d<l.length;d++){var h=e.layoutNodes[e.idToIndex[l[d]]];h.offsetX+=c,h.offsetY+=f,n[++i]=l[d]}u.offsetX=0,u.offsetY=0}}},NT=function(e,t){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=zT(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,am(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},zT=function(e,t,n){var a=Math.sqrt(e*e+t*t);if(a>n)var i={x:n*e/a,y:n*t/a};else var i={x:e,y:t};return i},am=function(e,t){var n=e.parentId;if(n!=null){var a=t.layoutNodes[t.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return am(a,t)}},Mv=function(e,t){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var s=n[i],o=s.cmptId,u=a[o]=a[o]||[];u.push(s)}for(var l=0,i=0;i<a.length;i++){var c=a[i];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var f=0;f<c.length;f++){var d=c[f];c.x1=Math.min(c.x1,d.positionX-d.width/2),c.x2=Math.max(c.x2,d.positionX+d.width/2),c.y1=Math.min(c.y1,d.positionY-d.height/2),c.y2=Math.max(c.y2,d.positionY+d.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,l+=c.w*c.h}}a.sort(function(m,b){return b.w*b.h-m.w*m.h});for(var h=0,v=0,y=0,p=0,g=Math.sqrt(l)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var c=a[i];if(c){for(var f=0;f<c.length;f++){var d=c[f];d.isLocked||(d.positionX+=h-c.x1,d.positionY+=v-c.y1)}h+=c.w+t.componentSpacing,y+=c.w+t.componentSpacing,p=Math.max(p,c.h),y>g&&(v+=p+t.componentSpacing,h=0,y=0,p=0)}}},VT={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function im(r){this.options=we({},VT,r)}im.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=ar(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(X){return{x:i.x1,y:i.y1}});else{var s=a.size(),o=Math.sqrt(s*i.h/i.w),u=Math.round(o),l=Math.round(i.w/i.h*o),c=function(te){if(te==null)return Math.min(u,l);var R=Math.min(u,l);R==u?u=te:l=te},f=function(te){if(te==null)return Math.max(u,l);var R=Math.max(u,l);R==u?u=te:l=te},d=e.rows,h=e.cols!=null?e.cols:e.columns;if(d!=null&&h!=null)u=d,l=h;else if(d!=null&&h==null)u=d,l=Math.ceil(s/u);else if(d==null&&h!=null)l=h,u=Math.ceil(s/l);else if(l*u>s){var v=c(),y=f();(v-1)*y>=s?c(v-1):(y-1)*v>=s&&f(y-1)}else for(;l*u<s;){var p=c(),g=f();(g+1)*p>=s?f(g+1):c(p+1)}var m=i.w/l,b=i.h/u;if(e.condense&&(m=0,b=0),e.avoidOverlap)for(var w=0;w<a.length;w++){var S=a[w],E=S._private.position;(E.x==null||E.y==null)&&(E.x=0,E.y=0);var x=S.layoutDimensions(e),T=e.avoidOverlapPadding,B=x.w+T,I=x.h+T;m=Math.max(m,B),b=Math.max(b,I)}for(var _={},D=function(te,R){return!!_["c-"+te+"-"+R]},A=function(te,R){_["c-"+te+"-"+R]=!0},O=0,k=0,P=function(){k++,k>=l&&(k=0,O++)},M={},F=0;F<a.length;F++){var W=a[F],H=e.position(W);if(H&&(H.row!==void 0||H.col!==void 0)){var z={row:H.row,col:H.col};if(z.col===void 0)for(z.col=0;D(z.row,z.col);)z.col++;else if(z.row===void 0)for(z.row=0;D(z.row,z.col);)z.row++;M[W.id()]=z,A(z.row,z.col)}}var $=function(te,R){var L,K;if(te.locked()||te.isParent())return!1;var ne=M[te.id()];if(ne)L=ne.col*m+m/2+i.x1,K=ne.row*b+b/2+i.y1;else{for(;D(O,k);)P();L=k*m+m/2+i.x1,K=O*b+b/2+i.y1,A(O,k),P()}return{x:L,y:K}};a.layoutPositions(this,e,$)}return this};var UT={ready:function(){},stop:function(){}};function Yf(r){this.options=we({},UT,r)}Yf.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};Yf.prototype.stop=function(){return this};var qT={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function sm(r){this.options=we({},qT,r)}sm.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=xt(r.positions);function a(i){if(r.positions==null)return cS(i.position());if(n)return r.positions(i);var s=r.positions[i._private.data.id];return s??null}return t.layoutPositions(this,r,function(i,s){var o=a(i);return i.locked()||o==null?!1:o}),this};var $T={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function om(r){this.options=we({},$T,r)}om.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=ar(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(s,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,a),this};var WT=[{name:"breadthfirst",impl:Jy},{name:"circle",impl:em},{name:"concentric",impl:tm},{name:"cose",impl:Bu},{name:"grid",impl:im},{name:"null",impl:Yf},{name:"preset",impl:sm},{name:"random",impl:om}];function um(r){this.options=r,this.notifications=0}var kv=function(){},Pv=function(){throw new Error("A headless instance can not render images")};um.prototype={recalculateRenderedStyle:kv,notify:function(){this.notifications++},init:kv,isHeadless:function(){return!0},png:Pv,jpg:Pv};var Kf={};Kf.arrowShapeWidth=.3;Kf.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(l,c,f,d,h,v,y){var p=h.x-f/2-y,g=h.x+f/2+y,m=h.y-f/2-y,b=h.y+f/2+y,w=p<=l&&l<=g&&m<=c&&c<=b;return w},n=function(l,c,f,d,h){var v=l*Math.cos(d)-c*Math.sin(d),y=l*Math.sin(d)+c*Math.cos(d),p=v*f,g=y*f,m=p+h.x,b=g+h.y;return{x:m,y:b}},a=function(l,c,f,d){for(var h=[],v=0;v<l.length;v+=2){var y=l[v],p=l[v+1];h.push(n(y,p,c,f,d))}return h},i=function(l){for(var c=[],f=0;f<l.length;f++){var d=l[f];c.push(d.x,d.y)}return c},s=function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").pfValue*2},o=function(l,c){ge(c)&&(c=r[c]),r[l]=we({name:l,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,h,v,y,p,g){var m=i(a(this.points,v+2*g,y,p)),b=hr(d,h,m);return b},roughCollide:t,draw:function(d,h,v,y){var p=a(this.points,h,v,y);e.arrowShapeImpl("polygon")(d,p)},spacing:function(d){return 0},gap:s},c)};o("none",{collide:Xo,roughCollide:Xo,draw:Mf,spacing:jd,gap:jd}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(l,c,f,d,h){var v=a(this.points,c,f,d),y=this.controlPoint,p=n(y[0],y[1],c,f,d);e.arrowShapeImpl(this.name)(l,v,p)},gap:function(l){return s(l)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(l,c,f,d,h,v,y){var p=i(a(this.points,f+2*y,d,h)),g=i(a(this.pointsTee,f+2*y,d,h)),m=hr(l,c,p)||hr(l,c,g);return m},draw:function(l,c,f,d,h){var v=a(this.points,c,f,d),y=a(this.pointsTee,c,f,d);e.arrowShapeImpl(this.name)(l,v,y)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(l,c,f,d,h,v,y){var p=h,g=Math.pow(p.x-l,2)+Math.pow(p.y-c,2)<=Math.pow((f+2*y)*this.radius,2),m=i(a(this.points,f+2*y,d,h));return hr(l,c,m)||g},draw:function(l,c,f,d,h){var v=a(this.pointsTr,c,f,d);e.arrowShapeImpl(this.name)(l,v,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(l,c){var f=this.baseCrossLinePts.slice(),d=c/l,h=3,v=5;return f[h]=f[h]-d,f[v]=f[v]-d,f},collide:function(l,c,f,d,h,v,y){var p=i(a(this.points,f+2*y,d,h)),g=i(a(this.crossLinePts(f,v),f+2*y,d,h)),m=hr(l,c,p)||hr(l,c,g);return m},draw:function(l,c,f,d,h){var v=a(this.points,c,f,d),y=a(this.crossLinePts(c,h),c,f,d);e.arrowShapeImpl(this.name)(l,v,y)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(l){return s(l)*.525}}),o("circle",{radius:.15,collide:function(l,c,f,d,h,v,y){var p=h,g=Math.pow(p.x-l,2)+Math.pow(p.y-c,2)<=Math.pow((f+2*y)*this.radius,2);return g},draw:function(l,c,f,d,h){e.arrowShapeImpl(this.name)(l,d.x,d.y,this.radius*c)},spacing:function(l){return e.getArrowWidth(l.pstyle("width").pfValue,l.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(l){return 1},gap:function(l){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(l){return l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(l){return .95*l.pstyle("width").pfValue*l.pstyle("arrow-scale").value}})};var Pa={};Pa.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],s=n[4],o=t.pan(),u=t.zoom(),l=((r-a)/s-o.x)/u,c=((e-i)/s-o.y)/u;return[l,c]};Pa.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(g){return parseFloat(t.getPropertyValue(g))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},s=r.clientWidth,o=r.clientHeight,u=a.left+a.right,l=a.top+a.bottom,c=i.left+i.right,f=e.width/(s+c),d=s-u,h=o-l,v=e.left+a.left+i.left,y=e.top+a.top+i.top;return this.containerBB=[v,y,d,h,f]};Pa.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Pa.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Pa.findNearestElements=function(r,e,t,n){var a=this,i=this,s=i.getCachedZSortedEles(),o=[],u=i.cy.zoom(),l=i.cy.hasCompoundNodes(),c=(n?24:8)/u,f=(n?8:2)/u,d=(n?8:2)/u,h=1/0,v,y;t&&(s=s.interactive);function p(x,T){if(x.isNode()){if(y)return;y=x,o.push(x)}if(x.isEdge()&&(T==null||T<h))if(v){if(v.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value&&v.pstyle("z-compound-depth").value===x.pstyle("z-compound-depth").value){for(var B=0;B<o.length;B++)if(o[B].isEdge()){o[B]=x,v=x,h=T??h;break}}}else o.push(x),v=x,h=T??h}function g(x){var T=x.outerWidth()+2*f,B=x.outerHeight()+2*f,I=T/2,_=B/2,D=x.position(),A=x.pstyle("corner-radius").value==="auto"?"auto":x.pstyle("corner-radius").pfValue,O=x._private.rscratch;if(D.x-I<=r&&r<=D.x+I&&D.y-_<=e&&e<=D.y+_){var k=i.nodeShapes[a.getNodeShape(x)];if(k.checkPoint(r,e,0,T,B,D.x,D.y,A,O))return p(x,0),!0}}function m(x){var T=x._private,B=T.rscratch,I=x.pstyle("width").pfValue,_=x.pstyle("arrow-scale").value,D=I/2+c,A=D*D,O=D*2,F=T.source,W=T.target,k;if(B.edgeType==="segments"||B.edgeType==="straight"||B.edgeType==="haystack"){for(var P=B.allpts,M=0;M+3<P.length;M+=2)if(TS(r,e,P[M],P[M+1],P[M+2],P[M+3],O)&&A>(k=DS(r,e,P[M],P[M+1],P[M+2],P[M+3])))return p(x,k),!0}else if(B.edgeType==="bezier"||B.edgeType==="multibezier"||B.edgeType==="self"||B.edgeType==="compound"){for(var P=B.allpts,M=0;M+5<B.allpts.length;M+=4)if(CS(r,e,P[M],P[M+1],P[M+2],P[M+3],P[M+4],P[M+5],O)&&A>(k=_S(r,e,P[M],P[M+1],P[M+2],P[M+3],P[M+4],P[M+5])))return p(x,k),!0}for(var F=F||T.source,W=W||T.target,H=a.getArrowWidth(I,_),z=[{name:"source",x:B.arrowStartX,y:B.arrowStartY,angle:B.srcArrowAngle},{name:"target",x:B.arrowEndX,y:B.arrowEndY,angle:B.tgtArrowAngle},{name:"mid-source",x:B.midX,y:B.midY,angle:B.midsrcArrowAngle},{name:"mid-target",x:B.midX,y:B.midY,angle:B.midtgtArrowAngle}],M=0;M<z.length;M++){var $=z[M],X=i.arrowShapes[x.pstyle($.name+"-arrow-shape").value],te=x.pstyle("width").pfValue;if(X.roughCollide(r,e,H,$.angle,{x:$.x,y:$.y},te,c)&&X.collide(r,e,H,$.angle,{x:$.x,y:$.y},te,c))return p(x),!0}l&&o.length>0&&(g(F),g(W))}function b(x,T,B){return dr(x,T,B)}function w(x,T){var B=x._private,I=d,_;T?_=T+"-":_="",x.boundingBox();var D=B.labelBounds[T||"main"],A=x.pstyle(_+"label").value,O=x.pstyle("text-events").strValue==="yes";if(!(!O||!A)){var k=b(B.rscratch,"labelX",T),P=b(B.rscratch,"labelY",T),M=b(B.rscratch,"labelAngle",T),F=x.pstyle(_+"text-margin-x").pfValue,W=x.pstyle(_+"text-margin-y").pfValue,H=D.x1-I-F,z=D.x2+I-F,$=D.y1-I-W,X=D.y2+I-W;if(M){var te=Math.cos(M),R=Math.sin(M),L=function(j,ae){return j=j-k,ae=ae-P,{x:j*te-ae*R+k,y:j*R+ae*te+P}},K=L(H,$),ne=L(H,X),Y=L(z,$),N=L(z,X),V=[K.x+F,K.y+W,Y.x+F,Y.y+W,N.x+F,N.y+W,ne.x+F,ne.y+W];if(hr(r,e,V))return p(x),!0}else if(zn(D,r,e))return p(x),!0}}for(var S=s.length-1;S>=0;S--){var E=s[S];E.isNode()?g(E)||w(E):m(E)||w(E)||w(E,"source")||w(E,"target")}return o};Pa.getAllInBox=function(r,e,t,n){var a=this.getCachedZSortedEles().interactive,i=this.cy.zoom(),s=2/i,o=[],u=Math.min(r,t),l=Math.max(r,t),c=Math.min(e,n),f=Math.max(e,n);r=u,t=l,e=c,n=f;var d=ar({x1:r,y1:e,x2:t,y2:n}),h=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}],v=[[h[0],h[1]],[h[1],h[2]],[h[2],h[3]],[h[3],h[0]]];function y(j,ae,he){return dr(j,ae,he)}function p(j,ae){var he=j._private,Ge=s,Ce="";j.boundingBox();var Se=he.labelBounds.main;if(!Se)return null;var me=y(he.rscratch,"labelX",ae),se=y(he.rscratch,"labelY",ae),ve=y(he.rscratch,"labelAngle",ae),pe=j.pstyle(Ce+"text-margin-x").pfValue,Ee=j.pstyle(Ce+"text-margin-y").pfValue,ye=Se.x1-Ge-pe,Ne=Se.x2+Ge-pe,He=Se.y1-Ge-Ee,Qe=Se.y2+Ge-Ee;if(ve){var Je=Math.cos(ve),et=Math.sin(ve),xe=function(J,C){return J=J-me,C=C-se,{x:J*Je-C*et+me,y:J*et+C*Je+se}};return[xe(ye,He),xe(Ne,He),xe(Ne,Qe),xe(ye,Qe)]}else return[{x:ye,y:He},{x:Ne,y:He},{x:Ne,y:Qe},{x:ye,y:Qe}]}function g(j,ae,he,Ge){function Ce(Se,me,se){return(se.y-Se.y)*(me.x-Se.x)>(me.y-Se.y)*(se.x-Se.x)}return Ce(j,he,Ge)!==Ce(ae,he,Ge)&&Ce(j,ae,he)!==Ce(j,ae,Ge)}for(var m=0;m<a.length;m++){var b=a[m];if(b.isNode()){var w=b,S=w.pstyle("text-events").strValue==="yes",E=w.pstyle("box-selection").strValue,x=w.pstyle("box-select-labels").strValue==="yes";if(E==="none")continue;var T=(E==="overlap"||x)&&S,B=w.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:T});if(E==="contain"){var I=!1;if(x&&S){var _=p(w);_&&ol(_,h)&&(o.push(w),I=!0)}!I&&py(d,B)&&o.push(w)}else if(E==="overlap"&&Ff(d,B)){var D=w.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),A=[{x:D.x1,y:D.y1},{x:D.x2,y:D.y1},{x:D.x2,y:D.y2},{x:D.x1,y:D.y2}];if(ol(A,h))o.push(w);else{var O=p(w);O&&ol(O,h)&&o.push(w)}}}else{var k=b,P=k._private,M=P.rscratch,F=k.pstyle("box-selection").strValue;if(F==="none")continue;if(F==="contain"){if(M.startX!=null&&M.startY!=null&&!zn(d,M.startX,M.startY)||M.endX!=null&&M.endY!=null&&!zn(d,M.endX,M.endY))continue;if(M.edgeType==="bezier"||M.edgeType==="multibezier"||M.edgeType==="self"||M.edgeType==="compound"||M.edgeType==="segments"||M.edgeType==="haystack"){for(var W=P.rstyle.bezierPts||P.rstyle.linePts||P.rstyle.haystackPts,H=!0,z=0;z<W.length;z++)if(!eh(d,W[z])){H=!1;break}H&&o.push(k)}else M.edgeType==="straight"&&o.push(k)}else if(F==="overlap"){var $=!1;if(M.startX!=null&&M.startY!=null&&M.endX!=null&&M.endY!=null&&(zn(d,M.startX,M.startY)||zn(d,M.endX,M.endY)))o.push(k),$=!0;else if(!$&&M.edgeType==="haystack"){for(var X=P.rstyle.haystackPts,te=0;te<X.length;te++)if(eh(d,X[te])){o.push(k),$=!0;break}}if(!$){var R=P.rstyle.bezierPts||P.rstyle.linePts||P.rstyle.haystackPts;if((!R||R.length<2)&&M.edgeType==="straight"&&M.startX!=null&&M.startY!=null&&M.endX!=null&&M.endY!=null&&(R=[{x:M.startX,y:M.startY},{x:M.endX,y:M.endY}]),!R||R.length<2)continue;for(var L=0;L<R.length-1;L++){for(var K=R[L],ne=R[L+1],Y=0;Y<v.length;Y++){var N=Dt(v[Y],2),V=N[0],U=N[1];if(g(K,ne,V,U)){o.push(k),$=!0;break}}if($)break}}}}}return o};var nu={};nu.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",s=e.edgeType==="compound",o=e.edgeType==="self",u,l,c,f,d,h,g,m;if(t?(c=e.haystackPts[0],f=e.haystackPts[1],d=e.haystackPts[2],h=e.haystackPts[3]):(c=e.arrowStartX,f=e.arrowStartY,d=e.arrowEndX,h=e.arrowEndY),g=e.midX,m=e.midY,i)u=c-e.segpts[0],l=f-e.segpts[1];else if(a||s||o||n){var v=e.allpts,y=Ut(v[0],v[2],v[4],.1),p=Ut(v[1],v[3],v[5],.1);u=c-y,l=f-p}else u=c-g,l=f-m;e.srcArrowAngle=Us(u,l);var g=e.midX,m=e.midY;if(t&&(g=(c+d)/2,m=(f+h)/2),u=d-c,l=h-f,i){var v=e.allpts;if(v.length/2%2===0){var b=v.length/2,w=b-2;u=v[b]-v[w],l=v[b+1]-v[w+1]}else if(e.isRound)u=e.midVector[1],l=-e.midVector[0];else{var b=v.length/2-1,w=b-2;u=v[b]-v[w],l=v[b+1]-v[w+1]}}else if(a||s||o){var v=e.allpts,S=e.ctrlpts,E,x,T,B;if(S.length/2%2===0){var I=v.length/2-1,_=I+2,D=_+2;E=Ut(v[I],v[_],v[D],0),x=Ut(v[I+1],v[_+1],v[D+1],0),T=Ut(v[I],v[_],v[D],1e-4),B=Ut(v[I+1],v[_+1],v[D+1],1e-4)}else{var _=v.length/2-1,I=_-2,D=_+2;E=Ut(v[I],v[_],v[D],.4999),x=Ut(v[I+1],v[_+1],v[D+1],.4999),T=Ut(v[I],v[_],v[D],.5),B=Ut(v[I+1],v[_+1],v[D+1],.5)}u=T-E,l=B-x}if(e.midtgtArrowAngle=Us(u,l),e.midDispX=u,e.midDispY=l,u*=-1,l*=-1,i){var v=e.allpts;if(v.length/2%2!==0){if(!e.isRound){var b=v.length/2-1,A=b+2;u=-(v[A]-v[b]),l=-(v[A+1]-v[b+1])}}}if(e.midsrcArrowAngle=Us(u,l),i)u=d-e.segpts[e.segpts.length-2],l=h-e.segpts[e.segpts.length-1];else if(a||s||o||n){var v=e.allpts,O=v.length,y=Ut(v[O-6],v[O-4],v[O-2],.9),p=Ut(v[O-5],v[O-3],v[O-1],.9);u=d-y,l=h-p}else u=d-g,l=h-m;e.tgtArrowAngle=Us(u,l)};nu.getArrowWidth=nu.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var $c,Wc,Hr={},Ir={},Lv,Fv,ya,vo,hn,da,pa,$r,$a,js,lm,cm,Gc,Hc,Nv,zv=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},GT=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},HT=function(e,t,n,a,i){if(e!==Nv?zv(t,e,Hr):GT(Ir,Hr),zv(t,n,Ir),Lv=Hr.nx*Ir.ny-Hr.ny*Ir.nx,Fv=Hr.nx*Ir.nx-Hr.ny*-Ir.ny,hn=Math.asin(Math.max(-1,Math.min(1,Lv))),Math.abs(hn)<1e-6){$c=t.x,Wc=t.y,pa=$a=0;return}ya=1,vo=!1,Fv<0?hn<0?hn=Math.PI+hn:(hn=Math.PI-hn,ya=-1,vo=!0):hn>0&&(ya=-1,vo=!0),t.radius!==void 0?$a=t.radius:$a=a,da=hn/2,js=Math.min(Hr.len/2,Ir.len/2),i?($r=Math.abs(Math.cos(da)*$a/Math.sin(da)),$r>js?($r=js,pa=Math.abs($r*Math.sin(da)/Math.cos(da))):pa=$a):($r=Math.min(js,$a),pa=Math.abs($r*Math.sin(da)/Math.cos(da))),Gc=t.x+Ir.nx*$r,Hc=t.y+Ir.ny*$r,$c=Gc-Ir.ny*pa*ya,Wc=Hc+Ir.nx*pa*ya,lm=t.x+Hr.nx*$r,cm=t.y+Hr.ny*$r,Nv=t};function fm(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function jf(r,e,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(HT(r,e,t,n,a),{cx:$c,cy:Wc,radius:pa,startX:lm,startY:cm,stopX:Gc,stopY:Hc,startAngle:Hr.ang+Math.PI/2*ya,endAngle:Ir.ang-Math.PI/2*ya,counterClockwise:vo})}var vs=.01,YT=Math.sqrt(2*vs),Qt={};Qt.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,s=r.pstyle("source-endpoint"),o=r.pstyle("target-endpoint"),u=s.units!=null&&o.units!=null,l=function(S,E,x,T){var B=T-E,I=x-S,_=Math.sqrt(I*I+B*B);return{x:-B/_,y:I/_}},c=r.pstyle("edge-distances").value;switch(c){case"node-position":i=t;break;case"intersection":i=n;break;case"endpoints":{if(u){var f=this.manualEndptToPx(r.source()[0],s),d=Dt(f,2),h=d[0],v=d[1],y=this.manualEndptToPx(r.target()[0],o),p=Dt(y,2),g=p[0],m=p[1],b={x1:h,y1:v,x2:g,y2:m};a=l(h,v,g,m),i=b}else ot("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Qt.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var s=n.source,o=n.target,u=s.position(),l=o.position(),c=s.width(),f=o.width(),d=s.height(),h=o.height(),v=t.pstyle("haystack-radius").value,y=v/2;a.haystackPts=a.allpts=[a.source.x*c*y+u.x,a.source.y*d*y+u.y,a.target.x*f*y+l.x,a.target.y*h*y+l.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Qt.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),a=r.pstyle("segment-distances"),i=r.pstyle("segment-radii"),s=r.pstyle("radius-type"),o=Math.min(n.pfValue.length,a.pfValue.length),u=i.pfValue[i.pfValue.length-1],l=s.pfValue[s.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var c=0;c<o;c++){var f=n.pfValue[c],d=a.pfValue[c],h=1-f,v=f,y=this.findMidptPtsEtc(r,e),p=y.midptPts,g=y.vectorNormInverse,m={x:p.x1*h+p.x2*v,y:p.y1*h+p.y2*v};t.segpts.push(m.x+g.x*d,m.y+g.y*d),t.radii.push(i.pfValue[c]!==void 0?i.pfValue[c]:u),t.isArcRadius.push((s.pfValue[c]!==void 0?s.pfValue[c]:l)==="arc-radius")}};Qt.findLoopPoints=function(r,e,t,n){var a=r._private.rscratch,i=e.dirCounts,s=e.srcPos,o=r.pstyle("control-point-distances"),u=o?o.pfValue[0]:void 0,l=r.pstyle("loop-direction").pfValue,c=r.pstyle("loop-sweep").pfValue,f=r.pstyle("control-point-step-size").pfValue;a.edgeType="self";var d=t,h=f;n&&(d=0,h=u);var v=l-Math.PI/2,y=v-c/2,p=v+c/2,g=l+"_"+c;d=i[g]===void 0?i[g]=0:++i[g],a.ctrlpts=[s.x+Math.cos(y)*1.4*h*(d/3+1),s.y+Math.sin(y)*1.4*h*(d/3+1),s.x+Math.cos(p)*1.4*h*(d/3+1),s.y+Math.sin(p)*1.4*h*(d/3+1)]};Qt.findCompoundLoopPoints=function(r,e,t,n){var a=r._private.rscratch;a.edgeType="compound";var i=e.srcPos,s=e.tgtPos,o=e.srcW,u=e.srcH,l=e.tgtW,c=e.tgtH,f=r.pstyle("control-point-step-size").pfValue,d=r.pstyle("control-point-distances"),h=d?d.pfValue[0]:void 0,v=t,y=f;n&&(v=0,y=h);var p=50,g={x:i.x-o/2,y:i.y-u/2},m={x:s.x-l/2,y:s.y-c/2},b={x:Math.min(g.x,m.x),y:Math.min(g.y,m.y)},w=.5,S=Math.max(w,Math.log(o*vs)),E=Math.max(w,Math.log(l*vs));a.ctrlpts=[b.x,b.y-(1+Math.pow(p,1.12)/100)*y*(v/3+1)*S,b.x-(1+Math.pow(p,1.12)/100)*y*(v/3+1)*E,b.y]};Qt.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Qt.findBezierPoints=function(r,e,t,n,a){var i=r._private.rscratch,s=r.pstyle("control-point-step-size").pfValue,o=r.pstyle("control-point-distances"),u=r.pstyle("control-point-weights"),l=o&&u?Math.min(o.value.length,u.value.length):1,c=o?o.pfValue[0]:void 0,f=u.value[0],d=n;i.edgeType=d?"multibezier":"bezier",i.ctrlpts=[];for(var h=0;h<l;h++){var v=(.5-e.eles.length/2+t)*s*(a?-1:1),y=void 0,p=Lf(v);d&&(c=o?o.pfValue[h]:s,f=u.value[h]),n?y=c:y=c!==void 0?p*c:void 0;var g=y!==void 0?y:v,m=1-f,b=f,w=this.findMidptPtsEtc(r,e),S=w.midptPts,E=w.vectorNormInverse,x={x:S.x1*m+S.x2*b,y:S.y1*m+S.y2*b};i.ctrlpts.push(x.x+E.x*g,x.y+E.y*g)}};Qt.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",a="horizontal",i="leftward",s="rightward",o="downward",u="upward",l="auto",c=e.posPts,f=e.srcW,d=e.srcH,h=e.tgtW,v=e.tgtH,y=r.pstyle("edge-distances").value,p=y!=="node-position",g=r.pstyle("taxi-direction").value,m=g,b=r.pstyle("taxi-turn"),w=b.units==="%",S=b.pfValue,E=S<0,x=r.pstyle("taxi-turn-min-distance").pfValue,T=p?(f+h)/2:0,B=p?(d+v)/2:0,I=c.x2-c.x1,_=c.y2-c.y1,D=function(C,G){return C>0?Math.max(C-G,0):Math.min(C+G,0)},A=D(I,T),O=D(_,B),k=!1;m===l?g=Math.abs(A)>Math.abs(O)?a:n:m===u||m===o?(g=n,k=!0):(m===i||m===s)&&(g=a,k=!0);var P=g===n,M=P?O:A,F=P?_:I,W=Lf(F),H=!1;!(k&&(w||E))&&(m===o&&F<0||m===u&&F>0||m===i&&F>0||m===s&&F<0)&&(W*=-1,M=W*Math.abs(M),H=!0);var z;if(w){var $=S<0?1+S:S;z=$*M}else{var X=S<0?M:0;z=X+S*W}var te=function(C){return Math.abs(C)<x||Math.abs(C)>=Math.abs(M)},R=te(z),L=te(Math.abs(M)-Math.abs(z)),K=R||L;if(K&&!H)if(P){var ne=Math.abs(F)<=d/2,Y=Math.abs(I)<=h/2;if(ne){var N=(c.x1+c.x2)/2,V=c.y1,U=c.y2;t.segpts=[N,V,N,U]}else if(Y){var j=(c.y1+c.y2)/2,ae=c.x1,he=c.x2;t.segpts=[ae,j,he,j]}else t.segpts=[c.x1,c.y2]}else{var Ge=Math.abs(F)<=f/2,Ce=Math.abs(_)<=v/2;if(Ge){var Se=(c.y1+c.y2)/2,me=c.x1,se=c.x2;t.segpts=[me,Se,se,Se]}else if(Ce){var ve=(c.x1+c.x2)/2,pe=c.y1,Ee=c.y2;t.segpts=[ve,pe,ve,Ee]}else t.segpts=[c.x2,c.y1]}else if(P){var ye=c.y1+z+(p?d/2*W:0),Ne=c.x1,He=c.x2;t.segpts=[Ne,ye,He,ye]}else{var Qe=c.x1+z+(p?f/2*W:0),Je=c.y1,et=c.y2;t.segpts=[Qe,Je,Qe,et]}if(t.isRound){var xe=r.pstyle("taxi-radius").value,le=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(xe),t.isArcRadius=new Array(t.segpts.length/2).fill(le)}};Qt.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,s=e.srcH,o=e.tgtW,u=e.tgtH,l=e.srcShape,c=e.tgtShape,f=e.srcCornerRadius,d=e.tgtCornerRadius,h=e.srcRs,v=e.tgtRs,y=!ie(t.startX)||!ie(t.startY),p=!ie(t.arrowStartX)||!ie(t.arrowStartY),g=!ie(t.endX)||!ie(t.endY),m=!ie(t.arrowEndX)||!ie(t.arrowEndY),b=3,w=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,S=b*w,E=Da({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),x=E<S,T=Da({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),B=T<S,I=!1;if(y||p||x){I=!0;var _={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},D=Math.sqrt(_.x*_.x+_.y*_.y),A={x:_.x/D,y:_.y/D},O=Math.max(i,s),k={x:t.ctrlpts[0]+A.x*2*O,y:t.ctrlpts[1]+A.y*2*O},P=l.intersectLine(n.x,n.y,i,s,k.x,k.y,0,f,h);x?(t.ctrlpts[0]=t.ctrlpts[0]+A.x*(S-E),t.ctrlpts[1]=t.ctrlpts[1]+A.y*(S-E)):(t.ctrlpts[0]=P[0]+A.x*S,t.ctrlpts[1]=P[1]+A.y*S)}if(g||m||B){I=!0;var M={x:t.ctrlpts[0]-a.x,y:t.ctrlpts[1]-a.y},F=Math.sqrt(M.x*M.x+M.y*M.y),W={x:M.x/F,y:M.y/F},H=Math.max(i,s),z={x:t.ctrlpts[0]+W.x*2*H,y:t.ctrlpts[1]+W.y*2*H},$=c.intersectLine(a.x,a.y,o,u,z.x,z.y,0,d,v);B?(t.ctrlpts[0]=t.ctrlpts[0]+W.x*(S-T),t.ctrlpts[1]=t.ctrlpts[1]+W.y*(S-T)):(t.ctrlpts[0]=$[0]+W.x*S,t.ctrlpts[1]=$[1]+W.y*S)}I&&this.findEndpoints(r)}};Qt.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=Ut(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=Ut(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var s=e.radii[i/2-1],o=e.isArcRadius[i/2-1];e.roundCorners.push(jf({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:s},{x:e.allpts[i+2],y:e.allpts[i+3]},s,o))}}if(e.segpts.length%4===0){var u=e.segpts.length/2,l=u-2;e.midX=(e.segpts[l]+e.segpts[u])/2,e.midY=(e.segpts[l+1]+e.segpts[u+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var f={x:e.segpts[c],y:e.segpts[c+1]},d=e.roundCorners[c/2];if(d.radius===0){var h={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=f.x,e.midY=f.y,e.midVector=[f.y-h.y,h.x-f.x]}else{var v=[f.x-d.cx,f.y-d.cy],y=d.radius/Math.sqrt(Math.pow(v[0],2)+Math.pow(v[1],2));v=v.map(function(p){return p*y}),e.midX=d.cx+v[0],e.midY=d.cy+v[1],e.midVector=v}}}}};Qt.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||ie(e.startX)&&ie(e.startY)&&ie(e.endX)&&ie(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,ot("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Qt.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,a=n.hasCompoundNodes(),i=new Sn,s=function(B,I){return[].concat(Yo(B),[I?1:0]).join("-")},o=[],u=[],l=0;l<r.length;l++){var c=r[l],f=c._private,d=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(d==="haystack"){u.push(c);continue}var h=d==="unbundled-bezier"||Nn(d,"segments")||d==="straight"||d==="straight-triangle"||Nn(d,"taxi"),v=d==="unbundled-bezier"||d==="bezier",y=f.source,p=f.target,g=y.poolIndex(),m=p.poolIndex(),b=[g,m].sort(),w=s(b,h),S=i.get(w);S==null&&(S={eles:[]},o.push({pairId:b,edgeIsUnbundled:h}),i.set(w,S)),S.eles.push(c),h&&(S.hasUnbundled=!0),v&&(S.hasBezier=!0)}}for(var E=function(){var B=o[x],I=B.pairId,_=B.edgeIsUnbundled,D=s(I,_),A=i.get(D),O;if(!A.hasUnbundled){var k=A.eles[0].parallelEdges().filter(function(le){return le.isBundledBezier()});kf(A.eles),k.forEach(function(le){return A.eles.push(le)}),A.eles.sort(function(le,J){return le.poolIndex()-J.poolIndex()})}var P=A.eles[0],M=P.source(),F=P.target();if(M.poolIndex()>F.poolIndex()){var W=M;M=F,F=W}var H=A.srcPos=M.position(),z=A.tgtPos=F.position(),$=A.srcW=M.outerWidth(),X=A.srcH=M.outerHeight(),te=A.tgtW=F.outerWidth(),R=A.tgtH=F.outerHeight(),L=A.srcShape=t.nodeShapes[e.getNodeShape(M)],K=A.tgtShape=t.nodeShapes[e.getNodeShape(F)],ne=A.srcCornerRadius=M.pstyle("corner-radius").value==="auto"?"auto":M.pstyle("corner-radius").pfValue,Y=A.tgtCornerRadius=F.pstyle("corner-radius").value==="auto"?"auto":F.pstyle("corner-radius").pfValue,N=A.tgtRs=F._private.rscratch,V=A.srcRs=M._private.rscratch;A.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var U=0;U<A.eles.length;U++){var j=A.eles[U],ae=j[0]._private.rscratch,he=j.pstyle("curve-style").value,Ge=he==="unbundled-bezier"||Nn(he,"segments")||Nn(he,"taxi"),Ce=!M.same(j.source());if(!A.calculatedIntersection&&M!==F&&(A.hasBezier||A.hasUnbundled)){A.calculatedIntersection=!0;var Se=L.intersectLine(H.x,H.y,$,X,z.x,z.y,0,ne,V),me=A.srcIntn=Se,se=K.intersectLine(z.x,z.y,te,R,H.x,H.y,0,Y,N),ve=A.tgtIntn=se,pe=A.intersectionPts={x1:Se[0],x2:se[0],y1:Se[1],y2:se[1]},Ee=A.posPts={x1:H.x,x2:z.x,y1:H.y,y2:z.y},ye=se[1]-Se[1],Ne=se[0]-Se[0],He=Math.sqrt(Ne*Ne+ye*ye);ie(He)&&He>=YT||(He=Math.sqrt(Math.max(Ne*Ne,vs)+Math.max(ye*ye,vs)));var Qe=A.vector={x:Ne,y:ye},Je=A.vectorNorm={x:Qe.x/He,y:Qe.y/He},et={x:-Je.y,y:Je.x};A.nodesOverlap=!ie(He)||K.checkPoint(Se[0],Se[1],0,te,R,z.x,z.y,Y,N)||L.checkPoint(se[0],se[1],0,$,X,H.x,H.y,ne,V),A.vectorNormInverse=et,O={nodesOverlap:A.nodesOverlap,dirCounts:A.dirCounts,calculatedIntersection:!0,hasBezier:A.hasBezier,hasUnbundled:A.hasUnbundled,eles:A.eles,srcPos:z,srcRs:N,tgtPos:H,tgtRs:V,srcW:te,srcH:R,tgtW:$,tgtH:X,srcIntn:ve,tgtIntn:me,srcShape:K,tgtShape:L,posPts:{x1:Ee.x2,y1:Ee.y2,x2:Ee.x1,y2:Ee.y1},intersectionPts:{x1:pe.x2,y1:pe.y2,x2:pe.x1,y2:pe.y1},vector:{x:-Qe.x,y:-Qe.y},vectorNorm:{x:-Je.x,y:-Je.y},vectorNormInverse:{x:-et.x,y:-et.y}}}var xe=Ce?O:A;ae.nodesOverlap=xe.nodesOverlap,ae.srcIntn=xe.srcIntn,ae.tgtIntn=xe.tgtIntn,ae.isRound=he.startsWith("round"),a&&(M.isParent()||M.isChild()||F.isParent()||F.isChild())&&(M.parents().anySame(F)||F.parents().anySame(M)||M.same(F)&&M.isParent())?e.findCompoundLoopPoints(j,xe,U,Ge):M===F?e.findLoopPoints(j,xe,U,Ge):he.endsWith("segments")?e.findSegmentsPoints(j,xe):he.endsWith("taxi")?e.findTaxiPoints(j,xe):he==="straight"||!Ge&&A.eles.length%2===1&&U===Math.floor(A.eles.length/2)?e.findStraightEdgePoints(j):e.findBezierPoints(j,xe,U,Ge,Ce),e.findEndpoints(j),e.tryToCorrectInvalidPoints(j,xe),e.checkForInvalidEdgeWarning(j),e.storeAllpts(j),e.storeEdgeProjections(j),e.calculateArrowAngles(j),e.recalculateEdgeLabelProjections(j),e.calculateLabelAngles(j)}},x=0;x<o.length;x++)E();this.findHaystackPoints(u)}};function dm(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],a=r[t+1];e.push({x:n,y:a})}return e}}Qt.getSegmentPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="segments")return dm(e.segpts)};Qt.getControlPoints=function(r){var e=r[0]._private.rscratch;this.recalculateRenderedStyle(r);var t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return dm(e.ctrlpts)};Qt.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Rs={};Rs.manualEndptToPx=function(r,e){var t=this,n=r.position(),a=r.outerWidth(),i=r.outerHeight(),s=r._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*a),e.units[1]==="%"&&(o[1]=o[1]*i),o[0]+=n.x,o[1]+=n.y,o}else{var u=e.pfValue[0];u=-Math.PI/2+u;var l=2*Math.max(a,i),c=[n.x+Math.cos(u)*l,n.y+Math.sin(u)*l];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,a,i,c[0],c[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,s)}};Rs.findEndpoints=function(r){var e,t,n,a,i=this,s,o=r.source()[0],u=r.target()[0],l=o.position(),c=u.position(),f=r.pstyle("target-arrow-shape").value,d=r.pstyle("source-arrow-shape").value,h=r.pstyle("target-distance-from-node").pfValue,v=r.pstyle("source-distance-from-node").pfValue,y=o._private.rscratch,p=u._private.rscratch,g=r.pstyle("curve-style").value,m=r._private.rscratch,b=m.edgeType,w=Nn(g,"taxi"),S=b==="self"||b==="compound",E=b==="bezier"||b==="multibezier"||S,x=b!=="bezier",T=b==="straight"||b==="segments",B=b==="segments",I=E||x||T,_=S||w,D=r.pstyle("source-endpoint"),A=_?"outside-to-node":D.value,O=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,k=r.pstyle("target-endpoint"),P=_?"outside-to-node":k.value,M=u.pstyle("corner-radius").value==="auto"?"auto":u.pstyle("corner-radius").pfValue;m.srcManEndpt=D,m.tgtManEndpt=k;var F,W,H,z,$=(e=(k==null||(t=k.pfValue)===null||t===void 0?void 0:t.length)===2?k.pfValue:null)!==null&&e!==void 0?e:[0,0],X=(n=(D==null||(a=D.pfValue)===null||a===void 0?void 0:a.length)===2?D.pfValue:null)!==null&&n!==void 0?n:[0,0];if(E){var te=[m.ctrlpts[0],m.ctrlpts[1]],R=x?[m.ctrlpts[m.ctrlpts.length-2],m.ctrlpts[m.ctrlpts.length-1]]:te;F=R,W=te}else if(T){var L=B?m.segpts.slice(0,2):[c.x+$[0],c.y+$[1]],K=B?m.segpts.slice(m.segpts.length-2):[l.x+X[0],l.y+X[1]];F=K,W=L}if(P==="inside-to-node")s=[c.x,c.y];else if(k.units)s=this.manualEndptToPx(u,k);else if(P==="outside-to-line")s=m.tgtIntn;else if(P==="outside-to-node"||P==="outside-to-node-or-label"?H=F:(P==="outside-to-line"||P==="outside-to-line-or-label")&&(H=[l.x,l.y]),s=i.nodeShapes[this.getNodeShape(u)].intersectLine(c.x,c.y,u.outerWidth(),u.outerHeight(),H[0],H[1],0,M,p),P==="outside-to-node-or-label"||P==="outside-to-line-or-label"){var ne=u._private.rscratch,Y=ne.labelWidth,N=ne.labelHeight,V=ne.labelX,U=ne.labelY,j=Y/2,ae=N/2,he=u.pstyle("text-valign").value;he==="top"?U-=ae:he==="bottom"&&(U+=ae);var Ge=u.pstyle("text-halign").value;Ge==="left"?V-=j:Ge==="right"&&(V+=j);var Ce=ls(H[0],H[1],[V-j,U-ae,V+j,U-ae,V+j,U+ae,V-j,U+ae],c.x,c.y);if(Ce.length>0){var Se=l,me=va(Se,Ja(s)),se=va(Se,Ja(Ce)),ve=me;if(se<me&&(s=Ce,ve=se),Ce.length>2){var pe=va(Se,{x:Ce[2],y:Ce[3]});pe<ve&&(s=[Ce[2],Ce[3]])}}}var Ee=qs(s,F,i.arrowShapes[f].spacing(r)+h),ye=qs(s,F,i.arrowShapes[f].gap(r)+h);if(m.endX=ye[0],m.endY=ye[1],m.arrowEndX=Ee[0],m.arrowEndY=Ee[1],A==="inside-to-node")s=[l.x,l.y];else if(D.units)s=this.manualEndptToPx(o,D);else if(A==="outside-to-line")s=m.srcIntn;else if(A==="outside-to-node"||A==="outside-to-node-or-label"?z=W:(A==="outside-to-line"||A==="outside-to-line-or-label")&&(z=[c.x,c.y]),s=i.nodeShapes[this.getNodeShape(o)].intersectLine(l.x,l.y,o.outerWidth(),o.outerHeight(),z[0],z[1],0,O,y),A==="outside-to-node-or-label"||A==="outside-to-line-or-label"){var Ne=o._private.rscratch,He=Ne.labelWidth,Qe=Ne.labelHeight,Je=Ne.labelX,et=Ne.labelY,xe=He/2,le=Qe/2,J=o.pstyle("text-valign").value;J==="top"?et-=le:J==="bottom"&&(et+=le);var C=o.pstyle("text-halign").value;C==="left"?Je-=xe:C==="right"&&(Je+=xe);var G=ls(z[0],z[1],[Je-xe,et-le,Je+xe,et-le,Je+xe,et+le,Je-xe,et+le],l.x,l.y);if(G.length>0){var Z=c,Q=va(Z,Ja(s)),ee=va(Z,Ja(G)),ue=Q;if(ee<Q&&(s=[G[0],G[1]],ue=ee),G.length>2){var re=va(Z,{x:G[2],y:G[3]});re<ue&&(s=[G[2],G[3]])}}}var fe=qs(s,W,i.arrowShapes[d].spacing(r)+v),ce=qs(s,W,i.arrowShapes[d].gap(r)+v);m.startX=ce[0],m.startY=ce[1],m.arrowStartX=fe[0],m.arrowStartY=fe[1],I&&(!ie(m.startX)||!ie(m.startY)||!ie(m.endX)||!ie(m.endY)?m.badLine=!0:m.badLine=!1)};Rs.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Rs.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Xf={};function KT(r,e,t){for(var n=function(l,c,f,d){return Ut(l,c,f,d)},a=e._private,i=a.rstyle.bezierPts,s=0;s<r.bezierProjPcts.length;s++){var o=r.bezierProjPcts[s];i.push({x:n(t[0],t[2],t[4],o),y:n(t[1],t[3],t[5],o)})}}Xf.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<t.allpts.length;a+=4)KT(this,r,t.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<t.allpts.length;a+=2)i.push({x:t.allpts[a],y:t.allpts[a+1]});else if(n==="haystack"){var s=t.haystackPts;e.rstyle.haystackPts=[{x:s[0],y:s[1]},{x:s[2],y:s[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};Xf.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var ln={};ln.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!Xn(e)){var t,n,a=r._private,i=r.width(),s=r.height(),o=r.padding(),u=r.position(),l=r.pstyle("text-halign").strValue,c=r.pstyle("text-valign").strValue,f=a.rscratch,d=a.rstyle;switch(l){case"left":t=u.x-i/2-o;break;case"right":t=u.x+i/2+o;break;default:t=u.x}switch(c){case"top":n=u.y-s/2-o;break;case"bottom":n=u.y+s/2+o;break;default:n=u.y}f.labelX=t,f.labelY=n,d.labelX=t,d.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var hm=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},vm=function(e,t){var n=t.x-e.x,a=t.y-e.y;return hm(n,a)},jT=function(e,t,n,a){var i=us(0,a-.001,1),s=us(0,a+.001,1),o=oi(e,t,n,i),u=oi(e,t,n,s);return vm(o,u)};ln.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,a=this,i={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(i.mid||i.source||i.target){e={x:n.midX,y:n.midY};var s=function(f,d,h){mn(t.rscratch,f,d,h),mn(t.rstyle,f,d,h)};s("labelX",null,e.x),s("labelY",null,e.y);var o=hm(n.midDispX,n.midDispY);s("labelAutoAngle",null,o);var u=function(){if(u.cache)return u.cache;for(var f=[],d=0;d+5<n.allpts.length;d+=4){var h={x:n.allpts[d],y:n.allpts[d+1]},v={x:n.allpts[d+2],y:n.allpts[d+3]},y={x:n.allpts[d+4],y:n.allpts[d+5]};f.push({p0:h,p1:v,p2:y,startDist:0,length:0,segments:[]})}var p=t.rstyle.bezierPts,g=a.bezierProjPcts.length;function m(x,T,B,I,_){var D=Da(T,B),A=x.segments[x.segments.length-1],O={p0:T,p1:B,t0:I,t1:_,startDist:A?A.startDist+A.length:0,length:D};x.segments.push(O),x.length+=D}for(var b=0;b<f.length;b++){var w=f[b],S=f[b-1];S&&(w.startDist=S.startDist+S.length),m(w,w.p0,p[b*g],0,a.bezierProjPcts[0]);for(var E=0;E<g-1;E++)m(w,p[b*g+E],p[b*g+E+1],a.bezierProjPcts[E],a.bezierProjPcts[E+1]);m(w,p[b*g+g-1],w.p2,a.bezierProjPcts[g-1],1)}return u.cache=f},l=function(f){var d,h=f==="source";if(i[f]){var v=r.pstyle(f+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var y=u(),p,g=0,m=0,b=0;b<y.length;b++){for(var w=y[h?b:y.length-1-b],S=0;S<w.segments.length;S++){var E=w.segments[h?S:w.segments.length-1-S],x=b===y.length-1&&S===w.segments.length-1;if(g=m,m+=E.length,m>=v||x){p={cp:w,segment:E};break}}if(p)break}var T=p.cp,B=p.segment,I=(v-g)/B.length,_=B.t1-B.t0,D=h?B.t0+_*I:B.t1-_*I;D=us(0,D,1),e=oi(T.p0,T.p1,T.p2,D),d=jT(T.p0,T.p1,T.p2,D);break}case"straight":case"segments":case"haystack":{for(var A=0,O,k,P,M,F=n.allpts.length,W=0;W+3<F&&(h?(P={x:n.allpts[W],y:n.allpts[W+1]},M={x:n.allpts[W+2],y:n.allpts[W+3]}):(P={x:n.allpts[F-2-W],y:n.allpts[F-1-W]},M={x:n.allpts[F-4-W],y:n.allpts[F-3-W]}),O=Da(P,M),k=A,A+=O,!(A>=v));W+=2);var H=v-k,z=H/O;z=us(0,z,1),e=yS(P,M,z),d=vm(P,M);break}}s("labelX",f,e.x),s("labelY",f,e.y),s("labelAutoAngle",f,d)}};l("source"),l("target"),this.applyLabelDimensions(r)}};ln.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};ln.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),a=_a(n,r._private.labelDimsKey);if(dr(t.rscratch,"prefixedLabelDimsKey",e)!==a){mn(t.rscratch,"prefixedLabelDimsKey",e,a);var i=this.calculateLabelDimensions(r,n),s=r.pstyle("line-height").pfValue,o=r.pstyle("text-wrap").strValue,u=dr(t.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(u.length,1),c=i.height/l,f=c*s,d=i.width,h=i.height+(l-1)*(s-1)*c;mn(t.rstyle,"labelWidth",e,d),mn(t.rscratch,"labelWidth",e,d),mn(t.rstyle,"labelHeight",e,h),mn(t.rscratch,"labelHeight",e,h),mn(t.rscratch,"labelLineHeight",e,f)}};ln.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",a=r.pstyle(n+"label").strValue,i=r.pstyle("text-transform").value,s=function(X,te){return te?(mn(t.rscratch,X,e,te),te):dr(t.rscratch,X,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var o=r.pstyle("text-wrap").value;if(o==="wrap"){var u=s("labelKey");if(u!=null&&s("labelWrapKey")===u)return s("labelWrapCachedText");for(var l="​",c=a.split(`
`),f=r.pstyle("text-max-width").pfValue,d=r.pstyle("text-overflow-wrap").value,h=d==="anywhere",v=[],y=/[\s\u200b]+|$/g,p=0;p<c.length;p++){var g=c[p],m=this.calculateLabelDimensions(r,g),b=m.width;if(h){var w=g.split("").join(l);g=w}if(b>f){var S=g.matchAll(y),E="",x=0,T=vr(S),B;try{for(T.s();!(B=T.n()).done;){var I=B.value,_=I[0],D=g.substring(x,I.index);x=I.index+_.length;var A=E.length===0?D:E+D+_,O=this.calculateLabelDimensions(r,A),k=O.width;k<=f?E+=D+_:(E&&v.push(E),E=D+_)}}catch($){T.e($)}finally{T.f()}E.match(/^[\s\u200b]+$/)||v.push(E)}else v.push(g)}s("labelWrapCachedLines",v),a=s("labelWrapCachedText",v.join(`
`)),s("labelWrapKey",u)}else if(o==="ellipsis"){var P=r.pstyle("text-max-width").pfValue,M="",F="…",W=!1;if(this.calculateLabelDimensions(r,a).width<P)return a;for(var H=0;H<a.length;H++){var z=this.calculateLabelDimensions(r,M+a[H]+F).width;if(z>P)break;M+=a[H],H===a.length-1&&(W=!0)}return W||(M+=F),M}return a};ln.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};ln.calculateLabelDimensions=function(r,e){var t=this,n=t.cy.window(),a=n.document,i=0,s=r.pstyle("font-style").strValue,o=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,l=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,f=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=a.createElement("canvas"),f=this.labelCalcCanvasContext=c.getContext("2d");var d=c.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}f.font="".concat(s," ").concat(l," ").concat(o,"px ").concat(u);for(var h=0,v=0,y=e.split(`
`),p=0;p<y.length;p++){var g=y[p],m=f.measureText(g),b=Math.ceil(m.width),w=o;h=Math.max(b,h),v+=w}return h+=i,v+=i,{width:h,height:v}};ln.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,a=r.isEdge(),i=e?e+"-":"",s=r.pstyle(i+"text-rotation"),o=s.strValue;return o==="none"?0:a&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:s.pfValue};ln.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(r),t&&(a.sourceLabelAngle=e.calculateLabelAngle(r,"source"),a.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var pm={},Vv=28,Uv=!1;pm.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<Vv||r.height()<Vv))return Uv||(ot("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Uv=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var Iu={};Iu.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(s),o)for(var u=0;u<s.length;u++){var l=s[u],c=l._private,f=c.rstyle;f.clean=!1,f.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(s){var o=s.target;n(o)}).on("style.* background.*",function(s){var o=s.target;n(o,!1)});var a=function(s){if(s){var o=t.onUpdateEleCalcsFns;e.cleanStyle();for(var u=0;u<e.length;u++){var l=e[u],c=l._private.rstyle;l.isNode()&&!c.cleanConnected&&(n(l.connectedEdges()),c.cleanConnected=!0)}if(o)for(var f=0;f<o.length;f++){var d=o[f];d(s,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){a(!0)},t.beforeRender(a,t.beforeRenderPriorities.eleCalcs)};Iu.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};Iu.recalculateRenderedStyle=function(r,e){var t=function(w){return w._private.rstyle.cleanConnected};if(r.length!==0){var n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<r.length;i++){var s=r[i],o=s._private,u=o.rstyle;s.isEdge()&&(!t(s.source())||!t(s.target()))&&(u.clean=!1),s.isEdge()&&s.isBundledBezier()&&s.parallelEdges().some(function(b){return!b._private.rstyle.clean&&b.isBundledBezier()})&&(u.clean=!1),!(e&&u.clean||s.removed())&&s.pstyle("display").value!=="none"&&(o.group==="nodes"?a.push(s):n.push(s),u.clean=!0)}for(var l=0;l<a.length;l++){var c=a[l],f=c._private,d=f.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=h.x,d.nodeY=h.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var v=0;v<n.length;v++){var y=n[v],p=y._private,g=p.rstyle,m=p.rscratch;g.srcX=m.arrowStartX,g.srcY=m.arrowStartY,g.tgtX=m.arrowEndX,g.tgtY=m.arrowEndY,g.midX=m.midX,g.midY=m.midY,g.labelAngle=m.labelAngle,g.sourceLabelAngle=m.sourceLabelAngle,g.targetLabelAngle=m.targetLabelAngle}}}};var _u={};_u.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};_u.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};_u.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Xy),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var gm={};[Pa,nu,Qt,Rs,Xf,ln,pm,Iu,_u].forEach(function(r){we(gm,r)});var ym={};ym.getCachedImage=function(r,e,t){var n=this,a=n.imageCache=n.imageCache||{},i=a[r];if(i)return i.image.complete||i.image.addEventListener("load",t),i.image;i=a[r]=a[r]||{};var s=i.image=new Image;s.addEventListener("load",t),s.addEventListener("error",function(){s.error=!0});var o="data:",u=r.substring(0,o.length).toLowerCase()===o;return u||(e=e==="null"?null:e,s.crossOrigin=e),s.src=r,s};var Ii={};Ii.registerBinding=function(r,e,t,n){var a=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(r)){for(var i=[],s=0;s<r.length;s++){var o=r[s];if(o!==void 0){var u=this.binder(o);i.push(u.on.apply(u,a))}}return i}var u=this.binder(r);return u.on.apply(u,a)};Ii.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||o1(r);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});t.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var s=function(u,l,c){var f=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(f[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:f}),(r.addEventListener||r.on).apply(r,f),this};return{on:s,addEventListener:s,addListener:s,bind:s}};Ii.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};Ii.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};Ii.load=function(){var r=this,e=r.cy.window(),t=function(C){return C.selected()},n=function(C){var G=C.getRootNode();if(G&&G.nodeType===11&&G.host!==void 0)return G},a=function(C,G,Z,Q){C==null&&(C=r.cy);for(var ee=0;ee<G.length;ee++){var ue=G[ee];C.emit({originalEvent:Z,type:ue,position:Q})}},i=function(C){return C.shiftKey||C.metaKey||C.ctrlKey},s=function(C,G){var Z=!0;if(r.cy.hasCompoundNodes()&&C&&C.pannable())for(var Q=0;G&&Q<G.length;Q++){var C=G[Q];if(C.isNode()&&C.isParent()&&!C.pannable()){Z=!1;break}}else Z=!0;return Z},o=function(C){C[0]._private.grabbed=!0},u=function(C){C[0]._private.grabbed=!1},l=function(C){C[0]._private.rscratch.inDragLayer=!0},c=function(C){C[0]._private.rscratch.inDragLayer=!1},f=function(C){C[0]._private.rscratch.isGrabTarget=!0},d=function(C){C[0]._private.rscratch.isGrabTarget=!1},h=function(C,G){var Z=G.addToList,Q=Z.has(C);!Q&&C.grabbable()&&!C.locked()&&(Z.merge(C),o(C))},v=function(C,G){if(C.cy().hasCompoundNodes()&&!(G.inDragLayer==null&&G.addToList==null)){var Z=C.descendants();G.inDragLayer&&(Z.forEach(l),Z.connectedEdges().forEach(l)),G.addToList&&h(Z,G)}},y=function(C,G){G=G||{};var Z=C.cy().hasCompoundNodes();G.inDragLayer&&(C.forEach(l),C.neighborhood().stdFilter(function(Q){return!Z||Q.isEdge()}).forEach(l)),G.addToList&&C.forEach(function(Q){h(Q,G)}),v(C,G),m(C,{inDragLayer:G.inDragLayer}),r.updateCachedGrabbedEles()},p=y,g=function(C){C&&(r.getCachedZSortedEles().forEach(function(G){u(G),c(G),d(G)}),r.updateCachedGrabbedEles())},m=function(C,G){if(!(G.inDragLayer==null&&G.addToList==null)&&C.cy().hasCompoundNodes()){var Z=C.ancestors().orphans();if(!Z.same(C)){var Q=Z.descendants().spawnSelf().merge(Z).unmerge(C).unmerge(C.descendants()),ee=Q.connectedEdges();G.inDragLayer&&(ee.forEach(l),Q.forEach(l)),G.addToList&&Q.forEach(function(ue){h(ue,G)})}}},b=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},w=typeof MutationObserver<"u",S=typeof ResizeObserver<"u";w?(r.removeObserver=new MutationObserver(function(J){for(var C=0;C<J.length;C++){var G=J[C],Z=G.removedNodes;if(Z)for(var Q=0;Q<Z.length;Q++){var ee=Z[Q];if(ee===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(J){r.destroy()});var E=Is(function(){r.cy.resize()},100);w&&(r.styleObserver=new MutationObserver(E),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",E),S&&(r.resizeObserver=new ResizeObserver(E),r.resizeObserver.observe(r.container));var x=function(C,G){for(;C!=null;)G(C),C=C.parentNode},T=function(){r.invalidateContainerClientCoordsCache()};x(r.container,function(J){r.registerBinding(J,"transitionend",T),r.registerBinding(J,"animationend",T),r.registerBinding(J,"scroll",T)}),r.registerBinding(r.container,"contextmenu",function(J){J.preventDefault()});var B=function(){return r.selection[4]!==0},I=function(C){for(var G=r.findContainerClientCoords(),Z=G[0],Q=G[1],ee=G[2],ue=G[3],re=C.touches?C.touches:[C],fe=!1,ce=0;ce<re.length;ce++){var be=re[ce];if(Z<=be.clientX&&be.clientX<=Z+ee&&Q<=be.clientY&&be.clientY<=Q+ue){fe=!0;break}}if(!fe)return!1;for(var Ve=r.container,Le=C.target,de=Le.parentNode,qe=!1;de;){if(de===Ve){qe=!0;break}de=de.parentNode}return!!qe};r.registerBinding(r.container,"mousedown",function(C){if(I(C)&&!(r.hoverData.which===1&&C.which!==1)){C.preventDefault(),b(),r.hoverData.capture=!0,r.hoverData.which=C.which;var G=r.cy,Z=[C.clientX,C.clientY],Q=r.projectIntoViewport(Z[0],Z[1]),ee=r.selection,ue=r.findNearestElements(Q[0],Q[1],!0,!1),re=ue[0],fe=r.dragData.possibleDragElements;r.hoverData.mdownPos=Q,r.hoverData.mdownGPos=Z;var ce=function(Ue){return{originalEvent:C,type:Ue,position:{x:Q[0],y:Q[1]}}},be=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var Ue=r.hoverData.down;Ue?Ue.emit(ce("taphold")):G.emit(ce("taphold"))}},r.tapholdDuration)};if(C.which==3){r.hoverData.cxtStarted=!0;var Ve={originalEvent:C,type:"cxttapstart",position:{x:Q[0],y:Q[1]}};re?(re.activate(),re.emit(Ve),r.hoverData.down=re):G.emit(Ve),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(C.which==1){re&&re.activate();{if(re!=null&&r.nodeIsGrabbable(re)){var Le=function(Ue){Ue.emit(ce("grab"))};if(f(re),!re.selected())fe=r.dragData.possibleDragElements=G.collection(),p(re,{addToList:fe}),re.emit(ce("grabon")).emit(ce("grab"));else{fe=r.dragData.possibleDragElements=G.collection();var de=G.$(function(qe){return qe.isNode()&&qe.selected()&&r.nodeIsGrabbable(qe)});y(de,{addToList:fe}),re.emit(ce("grabon")),de.forEach(Le)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=re,r.hoverData.downs=ue,r.hoverData.downTime=new Date().getTime()}a(re,["mousedown","tapstart","vmousedown"],C,{x:Q[0],y:Q[1]}),re==null?(ee[4]=1,r.data.bgActivePosistion={x:Q[0],y:Q[1]},r.redrawHint("select",!0),r.redraw()):re.pannable()&&(ee[4]=1),be()}ee[0]=ee[2]=Q[0],ee[1]=ee[3]=Q[1]}},!1);var _=n(r.container);r.registerBinding([e,_],"mousemove",function(C){var G=r.hoverData.capture;if(!(!G&&!I(C))){var Z=!1,Q=r.cy,ee=Q.zoom(),ue=[C.clientX,C.clientY],re=r.projectIntoViewport(ue[0],ue[1]),fe=r.hoverData.mdownPos,ce=r.hoverData.mdownGPos,be=r.selection,Ve=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(Ve=r.findNearestElement(re[0],re[1],!0,!1));var Le=r.hoverData.last,de=r.hoverData.down,qe=[re[0]-be[2],re[1]-be[3]],Ue=r.dragData.possibleDragElements,Ot;if(ce){var Et=ue[0]-ce[0],Jt=Et*Et,Bt=ue[1]-ce[1],Vt=Bt*Bt,Mt=Jt+Vt;r.hoverData.isOverThresholdDrag=Ot=Mt>=r.desktopTapThreshold2}var Wt=i(C);Ot&&(r.hoverData.tapholdCancelled=!0);var Rn=function(){var Cr=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Cr.length===0?(Cr.push(qe[0]),Cr.push(qe[1])):(Cr[0]+=qe[0],Cr[1]+=qe[1])};Z=!0,a(Ve,["mousemove","vmousemove","tapdrag"],C,{x:re[0],y:re[1]});var It=function(Cr){return{originalEvent:C,type:Cr,position:{x:re[0],y:re[1]}}},fn=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||Q.emit(It("boxstart")),be[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(Ot){var dn=It("cxtdrag");de?de.emit(dn):Q.emit(dn),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||Ve!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit(It("cxtdragout")),r.hoverData.cxtOver=Ve,Ve&&Ve.emit(It("cxtdragover")))}}else if(r.hoverData.dragging){if(Z=!0,Q.panningEnabled()&&Q.userPanningEnabled()){var Fa;if(r.hoverData.justStartedPan){var ks=r.hoverData.mdownPos;Fa={x:(re[0]-ks[0])*ee,y:(re[1]-ks[1])*ee},r.hoverData.justStartedPan=!1}else Fa={x:qe[0]*ee,y:qe[1]*ee};Q.panBy(Fa),Q.emit(It("dragpan")),r.hoverData.dragged=!0}re=r.projectIntoViewport(C.clientX,C.clientY)}else if(be[4]==1&&(de==null||de.pannable())){if(Ot){if(!r.hoverData.dragging&&Q.boxSelectionEnabled()&&(Wt||!Q.panningEnabled()||!Q.userPanningEnabled()))fn();else if(!r.hoverData.selecting&&Q.panningEnabled()&&Q.userPanningEnabled()){var ca=s(de,r.hoverData.downs);ca&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,be[4]=0,r.data.bgActivePosistion=Ja(fe),r.redrawHint("select",!0),r.redraw())}de&&de.pannable()&&de.active()&&de.unactivate()}}else{if(de&&de.pannable()&&de.active()&&de.unactivate(),(!de||!de.grabbed())&&Ve!=Le&&(Le&&a(Le,["mouseout","tapdragout"],C,{x:re[0],y:re[1]}),Ve&&a(Ve,["mouseover","tapdragover"],C,{x:re[0],y:re[1]}),r.hoverData.last=Ve),de)if(Ot){if(Q.boxSelectionEnabled()&&Wt)de&&de.grabbed()&&(g(Ue),de.emit(It("freeon")),Ue.emit(It("free")),r.dragData.didDrag&&(de.emit(It("dragfreeon")),Ue.emit(It("dragfree")))),fn();else if(de&&de.grabbed()&&r.nodeIsDraggable(de)){var sr=!r.dragData.didDrag;sr&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||y(Ue,{inDragLayer:!0});var jt={x:0,y:0};if(ie(qe[0])&&ie(qe[1])&&(jt.x+=qe[0],jt.y+=qe[1],sr)){var or=r.hoverData.dragDelta;or&&ie(or[0])&&ie(or[1])&&(jt.x+=or[0],jt.y+=or[1])}r.hoverData.draggingEles=!0,Ue.silentShift(jt).emit(It("position")).emit(It("drag")),r.redrawHint("drag",!0),r.redraw()}}else Rn();Z=!0}if(be[2]=re[0],be[3]=re[1],Z)return C.stopPropagation&&C.stopPropagation(),C.preventDefault&&C.preventDefault(),!1}},!1);var D,A,O;r.registerBinding(e,"mouseup",function(C){if(!(r.hoverData.which===1&&C.which!==1&&r.hoverData.capture)){var G=r.hoverData.capture;if(G){r.hoverData.capture=!1;var Z=r.cy,Q=r.projectIntoViewport(C.clientX,C.clientY),ee=r.selection,ue=r.findNearestElement(Q[0],Q[1],!0,!1),re=r.dragData.possibleDragElements,fe=r.hoverData.down,ce=i(C);r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,fe&&fe.unactivate();var be=function(Et){return{originalEvent:C,type:Et,position:{x:Q[0],y:Q[1]}}};if(r.hoverData.which===3){var Ve=be("cxttapend");if(fe?fe.emit(Ve):Z.emit(Ve),!r.hoverData.cxtDragged){var Le=be("cxttap");fe?fe.emit(Le):Z.emit(Le)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(a(ue,["mouseup","tapend","vmouseup"],C,{x:Q[0],y:Q[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(a(fe,["click","tap","vclick"],C,{x:Q[0],y:Q[1]}),A=!1,C.timeStamp-O<=Z.multiClickDebounceTime()?(D&&clearTimeout(D),A=!0,O=null,a(fe,["dblclick","dbltap","vdblclick"],C,{x:Q[0],y:Q[1]})):(D=setTimeout(function(){A||a(fe,["oneclick","onetap","voneclick"],C,{x:Q[0],y:Q[1]})},Z.multiClickDebounceTime()),O=C.timeStamp)),fe==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!i(C)&&(Z.$(t).unselect(["tapunselect"]),re.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=re=Z.collection()),ue==fe&&!r.dragData.didDrag&&!r.hoverData.selecting&&ue!=null&&ue._private.selectable&&(r.hoverData.dragging||(Z.selectionType()==="additive"||ce?ue.selected()?ue.unselect(["tapunselect"]):ue.select(["tapselect"]):ce||(Z.$(t).unmerge(ue).unselect(["tapunselect"]),ue.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var de=Z.collection(r.getAllInBox(ee[0],ee[1],ee[2],ee[3]));r.redrawHint("select",!0),de.length>0&&r.redrawHint("eles",!0),Z.emit(be("boxend"));var qe=function(Et){return Et.selectable()&&!Et.selected()};Z.selectionType()==="additive"||ce||Z.$(t).unmerge(de).unselect(),de.emit(be("box")).stdFilter(qe).select().emit(be("boxselect")),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ee[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var Ue=fe&&fe.grabbed();g(re),Ue&&(fe.emit(be("freeon")),re.emit(be("free")),r.dragData.didDrag&&(fe.emit(be("dragfreeon")),re.emit(be("dragfree"))))}}ee[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null,r.hoverData.which=null}}},!1);var k=[],P=4,M,F=1e5,W=function(C,G){for(var Z=0;Z<C.length;Z++)if(C[Z]%G!==0)return!1;return!0},H=function(C){for(var G=Math.abs(C[0]),Z=1;Z<C.length;Z++)if(Math.abs(C[Z])!==G)return!1;return!0},z=function(C){var G=!1,Z=C.deltaY;if(Z==null&&(C.wheelDeltaY!=null?Z=C.wheelDeltaY/4:C.wheelDelta!=null&&(Z=C.wheelDelta/4)),Z!==0){if(M==null)if(k.length>=P){var Q=k;if(M=W(Q,5),!M){var ee=Math.abs(Q[0]);M=H(Q)&&ee>5}if(M)for(var ue=0;ue<Q.length;ue++)F=Math.min(Math.abs(Q[ue]),F)}else k.push(Z),G=!0;else M&&(F=Math.min(Math.abs(Z),F));if(!r.scrollingPage){var re=r.cy,fe=re.zoom(),ce=re.pan(),be=r.projectIntoViewport(C.clientX,C.clientY),Ve=[be[0]*fe+ce.x,be[1]*fe+ce.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||B()){C.preventDefault();return}if(re.panningEnabled()&&re.userPanningEnabled()&&re.zoomingEnabled()&&re.userZoomingEnabled()){C.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var Le;G&&Math.abs(Z)>5&&(Z=Lf(Z)*5),Le=Z/-250,M&&(Le/=F,Le*=3),Le=Le*r.wheelSensitivity;var de=C.deltaMode===1;de&&(Le*=33);var qe=re.zoom()*Math.pow(10,Le);C.type==="gesturechange"&&(qe=r.gestureStartZoom*C.scale),re.zoom({level:qe,renderedPosition:{x:Ve[0],y:Ve[1]}}),re.emit({type:C.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:C,position:{x:be[0],y:be[1]}})}}}};r.registerBinding(r.container,"wheel",z,!0),r.registerBinding(e,"scroll",function(C){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(C){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||C.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(J){r.hasTouchStarted||z(J)},!0),r.registerBinding(r.container,"mouseout",function(C){var G=r.projectIntoViewport(C.clientX,C.clientY);r.cy.emit({originalEvent:C,type:"mouseout",position:{x:G[0],y:G[1]}})},!1),r.registerBinding(r.container,"mouseover",function(C){var G=r.projectIntoViewport(C.clientX,C.clientY);r.cy.emit({originalEvent:C,type:"mouseover",position:{x:G[0],y:G[1]}})},!1);var $,X,te,R,L,K,ne,Y,N,V,U,j,ae,he=function(C,G,Z,Q){return Math.sqrt((Z-C)*(Z-C)+(Q-G)*(Q-G))},Ge=function(C,G,Z,Q){return(Z-C)*(Z-C)+(Q-G)*(Q-G)},Ce;r.registerBinding(r.container,"touchstart",Ce=function(C){if(r.hasTouchStarted=!0,!!I(C)){b(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var G=r.cy,Z=r.touchData.now,Q=r.touchData.earlier;if(C.touches[0]){var ee=r.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);Z[0]=ee[0],Z[1]=ee[1]}if(C.touches[1]){var ee=r.projectIntoViewport(C.touches[1].clientX,C.touches[1].clientY);Z[2]=ee[0],Z[3]=ee[1]}if(C.touches[2]){var ee=r.projectIntoViewport(C.touches[2].clientX,C.touches[2].clientY);Z[4]=ee[0],Z[5]=ee[1]}var ue=function(Wt){return{originalEvent:C,type:Wt,position:{x:Z[0],y:Z[1]}}};if(C.touches[1]){r.touchData.singleTouchMoved=!0,g(r.dragData.touchDragEles);var re=r.findContainerClientCoords();N=re[0],V=re[1],U=re[2],j=re[3],$=C.touches[0].clientX-N,X=C.touches[0].clientY-V,te=C.touches[1].clientX-N,R=C.touches[1].clientY-V,ae=0<=$&&$<=U&&0<=te&&te<=U&&0<=X&&X<=j&&0<=R&&R<=j;var fe=G.pan(),ce=G.zoom();L=he($,X,te,R),K=Ge($,X,te,R),ne=[($+te)/2,(X+R)/2],Y=[(ne[0]-fe.x)/ce,(ne[1]-fe.y)/ce];var be=200,Ve=be*be;if(K<Ve&&!C.touches[2]){var Le=r.findNearestElement(Z[0],Z[1],!0,!0),de=r.findNearestElement(Z[2],Z[3],!0,!0);Le&&Le.isNode()?(Le.activate().emit(ue("cxttapstart")),r.touchData.start=Le):de&&de.isNode()?(de.activate().emit(ue("cxttapstart")),r.touchData.start=de):G.emit(ue("cxttapstart")),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(C.touches[2])G.boxSelectionEnabled()&&C.preventDefault();else if(!C.touches[1]){if(C.touches[0]){var qe=r.findNearestElements(Z[0],Z[1],!0,!0),Ue=qe[0];if(Ue!=null&&(Ue.activate(),r.touchData.start=Ue,r.touchData.starts=qe,r.nodeIsGrabbable(Ue))){var Ot=r.dragData.touchDragEles=G.collection(),Et=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),Ue.selected()?(Et=G.$(function(Mt){return Mt.selected()&&r.nodeIsGrabbable(Mt)}),y(Et,{addToList:Ot})):p(Ue,{addToList:Ot}),f(Ue),Ue.emit(ue("grabon")),Et?Et.forEach(function(Mt){Mt.emit(ue("grab"))}):Ue.emit(ue("grab"))}a(Ue,["touchstart","tapstart","vmousedown"],C,{x:Z[0],y:Z[1]}),Ue==null&&(r.data.bgActivePosistion={x:ee[0],y:ee[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&a(r.touchData.start,["taphold"],C,{x:Z[0],y:Z[1]})},r.tapholdDuration)}}if(C.touches.length>=1){for(var Jt=r.touchData.startPosition=[null,null,null,null,null,null],Bt=0;Bt<Z.length;Bt++)Jt[Bt]=Q[Bt]=Z[Bt];var Vt=C.touches[0];r.touchData.startGPosition=[Vt.clientX,Vt.clientY]}}},!1);var Se;r.registerBinding(e,"touchmove",Se=function(C){var G=r.touchData.capture;if(!(!G&&!I(C))){var Z=r.selection,Q=r.cy,ee=r.touchData.now,ue=r.touchData.earlier,re=Q.zoom();if(C.touches[0]){var fe=r.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);ee[0]=fe[0],ee[1]=fe[1]}if(C.touches[1]){var fe=r.projectIntoViewport(C.touches[1].clientX,C.touches[1].clientY);ee[2]=fe[0],ee[3]=fe[1]}if(C.touches[2]){var fe=r.projectIntoViewport(C.touches[2].clientX,C.touches[2].clientY);ee[4]=fe[0],ee[5]=fe[1]}var ce=function(Km){return{originalEvent:C,type:Km,position:{x:ee[0],y:ee[1]}}},be=r.touchData.startGPosition,Ve;if(G&&C.touches[0]&&be){for(var Le=[],de=0;de<ee.length;de++)Le[de]=ee[de]-ue[de];var qe=C.touches[0].clientX-be[0],Ue=qe*qe,Ot=C.touches[0].clientY-be[1],Et=Ot*Ot,Jt=Ue+Et;Ve=Jt>=r.touchTapThreshold2}if(G&&r.touchData.cxt){C.preventDefault();var Bt=C.touches[0].clientX-N,Vt=C.touches[0].clientY-V,Mt=C.touches[1].clientX-N,Wt=C.touches[1].clientY-V,Rn=Ge(Bt,Vt,Mt,Wt),It=Rn/K,fn=150,dn=fn*fn,Fa=1.5,ks=Fa*Fa;if(It>=ks||Rn>=dn){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var ca=ce("cxttapend");r.touchData.start?(r.touchData.start.unactivate().emit(ca),r.touchData.start=null):Q.emit(ca)}}if(G&&r.touchData.cxt){var ca=ce("cxtdrag");r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(ca):Q.emit(ca),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var sr=r.findNearestElement(ee[0],ee[1],!0,!0);(!r.touchData.cxtOver||sr!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit(ce("cxtdragout")),r.touchData.cxtOver=sr,sr&&sr.emit(ce("cxtdragover")))}else if(G&&C.touches[2]&&Q.boxSelectionEnabled())C.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||Q.emit(ce("boxstart")),r.touchData.selecting=!0,r.touchData.didSelect=!0,Z[4]=1,!Z||Z.length===0||Z[0]===void 0?(Z[0]=(ee[0]+ee[2]+ee[4])/3,Z[1]=(ee[1]+ee[3]+ee[5])/3,Z[2]=(ee[0]+ee[2]+ee[4])/3+1,Z[3]=(ee[1]+ee[3]+ee[5])/3+1):(Z[2]=(ee[0]+ee[2]+ee[4])/3,Z[3]=(ee[1]+ee[3]+ee[5])/3),r.redrawHint("select",!0),r.redraw();else if(G&&C.touches[1]&&!r.touchData.didSelect&&Q.zoomingEnabled()&&Q.panningEnabled()&&Q.userZoomingEnabled()&&Q.userPanningEnabled()){C.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var jt=r.dragData.touchDragEles;if(jt){r.redrawHint("drag",!0);for(var or=0;or<jt.length;or++){var Ai=jt[or]._private;Ai.grabbed=!1,Ai.rscratch.inDragLayer=!1}}var Cr=r.touchData.start,Bt=C.touches[0].clientX-N,Vt=C.touches[0].clientY-V,Mt=C.touches[1].clientX-N,Wt=C.touches[1].clientY-V,Jf=he(Bt,Vt,Mt,Wt),zm=Jf/L;if(ae){var Vm=Bt-$,Um=Vt-X,qm=Mt-te,$m=Wt-R,Wm=(Vm+qm)/2,Gm=(Um+$m)/2,Ri=Q.zoom(),Du=Ri*zm,Ps=Q.pan(),ed=Y[0]*Ri+Ps.x,td=Y[1]*Ri+Ps.y,Hm={x:-Du/Ri*(ed-Ps.x-Wm)+ed,y:-Du/Ri*(td-Ps.y-Gm)+td};if(Cr&&Cr.active()){var jt=r.dragData.touchDragEles;g(jt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Cr.unactivate().emit(ce("freeon")),jt.emit(ce("free")),r.dragData.didDrag&&(Cr.emit(ce("dragfreeon")),jt.emit(ce("dragfree")))}Q.viewport({zoom:Du,pan:Hm,cancelOnFailedZoom:!0}),Q.emit(ce("pinchzoom")),L=Jf,$=Bt,X=Vt,te=Mt,R=Wt,r.pinching=!0}if(C.touches[0]){var fe=r.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);ee[0]=fe[0],ee[1]=fe[1]}if(C.touches[1]){var fe=r.projectIntoViewport(C.touches[1].clientX,C.touches[1].clientY);ee[2]=fe[0],ee[3]=fe[1]}if(C.touches[2]){var fe=r.projectIntoViewport(C.touches[2].clientX,C.touches[2].clientY);ee[4]=fe[0],ee[5]=fe[1]}}else if(C.touches[0]&&!r.touchData.didSelect){var kr=r.touchData.start,Au=r.touchData.last,sr;if(!r.hoverData.draggingEles&&!r.swipePanning&&(sr=r.findNearestElement(ee[0],ee[1],!0,!0)),G&&kr!=null&&C.preventDefault(),G&&kr!=null&&r.nodeIsDraggable(kr))if(Ve){var jt=r.dragData.touchDragEles,rd=!r.dragData.didDrag;rd&&y(jt,{inDragLayer:!0}),r.dragData.didDrag=!0;var Oi={x:0,y:0};if(ie(Le[0])&&ie(Le[1])&&(Oi.x+=Le[0],Oi.y+=Le[1],rd)){r.redrawHint("eles",!0);var Pr=r.touchData.dragDelta;Pr&&ie(Pr[0])&&ie(Pr[1])&&(Oi.x+=Pr[0],Oi.y+=Pr[1])}r.hoverData.draggingEles=!0,jt.silentShift(Oi).emit(ce("position")).emit(ce("drag")),r.redrawHint("drag",!0),r.touchData.startPosition[0]==ue[0]&&r.touchData.startPosition[1]==ue[1]&&r.redrawHint("eles",!0),r.redraw()}else{var Pr=r.touchData.dragDelta=r.touchData.dragDelta||[];Pr.length===0?(Pr.push(Le[0]),Pr.push(Le[1])):(Pr[0]+=Le[0],Pr[1]+=Le[1])}if(a(kr||sr,["touchmove","tapdrag","vmousemove"],C,{x:ee[0],y:ee[1]}),(!kr||!kr.grabbed())&&sr!=Au&&(Au&&Au.emit(ce("tapdragout")),sr&&sr.emit(ce("tapdragover"))),r.touchData.last=sr,G)for(var or=0;or<ee.length;or++)ee[or]&&r.touchData.startPosition[or]&&Ve&&(r.touchData.singleTouchMoved=!0);if(G&&(kr==null||kr.pannable())&&Q.panningEnabled()&&Q.userPanningEnabled()){var Ym=s(kr,r.touchData.starts);Ym&&(C.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=Ja(r.touchData.startPosition)),r.swipePanning?(Q.panBy({x:Le[0]*re,y:Le[1]*re}),Q.emit(ce("dragpan"))):Ve&&(r.swipePanning=!0,Q.panBy({x:qe*re,y:Ot*re}),Q.emit(ce("dragpan")),kr&&(kr.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var fe=r.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);ee[0]=fe[0],ee[1]=fe[1]}}for(var de=0;de<ee.length;de++)ue[de]=ee[de];G&&C.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var me;r.registerBinding(e,"touchcancel",me=function(C){var G=r.touchData.start;r.touchData.capture=!1,G&&G.unactivate()});var se,ve,pe,Ee;if(r.registerBinding(e,"touchend",se=function(C){var G=r.touchData.start,Z=r.touchData.capture;if(Z)C.touches.length===0&&(r.touchData.capture=!1),C.preventDefault();else return;var Q=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ee=r.cy,ue=ee.zoom(),re=r.touchData.now,fe=r.touchData.earlier;if(C.touches[0]){var ce=r.projectIntoViewport(C.touches[0].clientX,C.touches[0].clientY);re[0]=ce[0],re[1]=ce[1]}if(C.touches[1]){var ce=r.projectIntoViewport(C.touches[1].clientX,C.touches[1].clientY);re[2]=ce[0],re[3]=ce[1]}if(C.touches[2]){var ce=r.projectIntoViewport(C.touches[2].clientX,C.touches[2].clientY);re[4]=ce[0],re[5]=ce[1]}var be=function(dn){return{originalEvent:C,type:dn,position:{x:re[0],y:re[1]}}};G&&G.unactivate();var Ve;if(r.touchData.cxt){if(Ve=be("cxttapend"),G?G.emit(Ve):ee.emit(Ve),!r.touchData.cxtDragged){var Le=be("cxttap");G?G.emit(Le):ee.emit(Le)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!C.touches[2]&&ee.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var de=ee.collection(r.getAllInBox(Q[0],Q[1],Q[2],Q[3]));Q[0]=void 0,Q[1]=void 0,Q[2]=void 0,Q[3]=void 0,Q[4]=0,r.redrawHint("select",!0),ee.emit(be("boxend"));var qe=function(dn){return dn.selectable()&&!dn.selected()};de.emit(be("box")).stdFilter(qe).select().emit(be("boxselect")),de.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(G!=null&&G.unactivate(),C.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!C.touches[1]){if(!C.touches[0]){if(!C.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Ue=r.dragData.touchDragEles;if(G!=null){var Ot=G._private.grabbed;g(Ue),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Ot&&(G.emit(be("freeon")),Ue.emit(be("free")),r.dragData.didDrag&&(G.emit(be("dragfreeon")),Ue.emit(be("dragfree")))),a(G,["touchend","tapend","vmouseup","tapdragout"],C,{x:re[0],y:re[1]}),G.unactivate(),r.touchData.start=null}else{var Et=r.findNearestElement(re[0],re[1],!0,!0);a(Et,["touchend","tapend","vmouseup","tapdragout"],C,{x:re[0],y:re[1]})}var Jt=r.touchData.startPosition[0]-re[0],Bt=Jt*Jt,Vt=r.touchData.startPosition[1]-re[1],Mt=Vt*Vt,Wt=Bt+Mt,Rn=Wt*ue*ue;r.touchData.singleTouchMoved||(G||ee.$(":selected").unselect(["tapunselect"]),a(G,["tap","vclick"],C,{x:re[0],y:re[1]}),ve=!1,C.timeStamp-Ee<=ee.multiClickDebounceTime()?(pe&&clearTimeout(pe),ve=!0,Ee=null,a(G,["dbltap","vdblclick"],C,{x:re[0],y:re[1]})):(pe=setTimeout(function(){ve||a(G,["onetap","voneclick"],C,{x:re[0],y:re[1]})},ee.multiClickDebounceTime()),Ee=C.timeStamp)),G!=null&&!r.dragData.didDrag&&G._private.selectable&&Rn<r.touchTapThreshold2&&!r.pinching&&(ee.selectionType()==="single"?(ee.$(t).unmerge(G).unselect(["tapunselect"]),G.select(["tapselect"])):G.selected()?G.unselect(["tapunselect"]):G.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var It=0;It<re.length;It++)fe[It]=re[It];r.dragData.didDrag=!1,C.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),C.touches.length<2&&(C.touches.length===1&&(r.touchData.startGPosition=[C.touches[0].clientX,C.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var ye=[],Ne=function(C){return{clientX:C.clientX,clientY:C.clientY,force:1,identifier:C.pointerId,pageX:C.pageX,pageY:C.pageY,radiusX:C.width/2,radiusY:C.height/2,screenX:C.screenX,screenY:C.screenY,target:C.target}},He=function(C){return{event:C,touch:Ne(C)}},Qe=function(C){ye.push(He(C))},Je=function(C){for(var G=0;G<ye.length;G++){var Z=ye[G];if(Z.event.pointerId===C.pointerId){ye.splice(G,1);return}}},et=function(C){var G=ye.filter(function(Z){return Z.event.pointerId===C.pointerId})[0];G.event=C,G.touch=Ne(C)},xe=function(C){C.touches=ye.map(function(G){return G.touch})},le=function(C){return C.pointerType==="mouse"||C.pointerType===4};r.registerBinding(r.container,"pointerdown",function(J){le(J)||(J.preventDefault(),Qe(J),xe(J),Ce(J))}),r.registerBinding(r.container,"pointerup",function(J){le(J)||(Je(J),xe(J),se(J))}),r.registerBinding(r.container,"pointercancel",function(J){le(J)||(Je(J),xe(J),me(J))}),r.registerBinding(r.container,"pointermove",function(J){le(J)||(J.preventDefault(),et(J),xe(J),Se(J))})}};var Dn={};Dn.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,a,i,s,o,u){this.renderer.nodeShapeImpl("polygon",n,a,i,s,o,this.points)},intersectLine:function(n,a,i,s,o,u,l,c){return ls(o,u,this.points,n,a,i/2,s/2,l)},checkPoint:function(n,a,i,s,o,u,l,c){return Bn(n,a,this.points,u,l,s,o,[0,-1],i)},hasMiterBounds:r!=="rectangle",miterBounds:function(n,a,i,s,o,u){return ES(this.points,n,a,i,s,o)}}};Dn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,s,o,u){return RS(i,s,e,t,n/2+o,a/2+o)},checkPoint:function(e,t,n,a,i,s,o,u){return Ta(e,t,a,i,s,o,n)}}};Dn.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,a,i,s,o,u,l){if(u[l]!==void 0&&u[l+"-cx"]===n&&u[l+"-cy"]===a)return u[l];u[l]=new Array(e.length/2),u[l+"-cx"]=n,u[l+"-cy"]=a;var c=i/2,f=s/2;o=o==="auto"?my(i,s):o;for(var d=new Array(e.length/2),h=0;h<e.length/2;h++)d[h]={x:n+c*e[h*2],y:a+f*e[h*2+1]};var v,y,p,g,m=d.length;for(y=d[m-1],v=0;v<m;v++)p=d[v%m],g=d[(v+1)%m],u[l][v]=jf(y,p,g,o),y=p,p=g;return u[l]},draw:function(n,a,i,s,o,u,l){this.renderer.nodeShapeImpl("round-polygon",n,a,i,s,o,this.points,this.getOrCreateCorners(a,i,s,o,u,l,"drawCorners"))},intersectLine:function(n,a,i,s,o,u,l,c,f){return MS(o,u,this.points,n,a,i,s,l,this.getOrCreateCorners(n,a,i,s,c,f,"corners"))},checkPoint:function(n,a,i,s,o,u,l,c,f){return AS(n,a,this.points,u,l,s,o,this.getOrCreateCorners(u,l,s,o,c,f,"corners"))}}};Dn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:er(4,0),draw:function(e,t,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,s)},intersectLine:function(e,t,n,a,i,s,o,u){return gy(i,s,e,t,n,a,o,u)},checkPoint:function(e,t,n,a,i,s,o,u){var l=a/2,c=i/2;u=u==="auto"?Qn(a,i):u,u=Math.min(l,c,u);var f=u*2;return!!(Bn(e,t,this.points,s,o,a,i-f,[0,-1],n)||Bn(e,t,this.points,s,o,a-f,i,[0,-1],n)||Ta(e,t,f,f,s-l+u,o-c+u,n)||Ta(e,t,f,f,s+l-u,o-c+u,n)||Ta(e,t,f,f,s+l-u,o+c-u,n)||Ta(e,t,f,f,s-l+u,o+c-u,n))}}};Dn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Nf(),points:er(4,0),draw:function(e,t,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,null,s)},generateCutTrianglePts:function(e,t,n,a,i){var s=i==="auto"?this.cornerLength:i,o=t/2,u=e/2,l=n-u,c=n+u,f=a-o,d=a+o;return{topLeft:[l,f+s,l+s,f,l+s,f+s],topRight:[c-s,f,c,f+s,c-s,f+s],bottomRight:[c,d-s,c-s,d,c-s,d-s],bottomLeft:[l+s,d,l,d-s,l+s,d-s]}},intersectLine:function(e,t,n,a,i,s,o,u){var l=this.generateCutTrianglePts(n+2*o,a+2*o,e,t,u),c=[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]);return ls(i,s,c,e,t)},checkPoint:function(e,t,n,a,i,s,o,u){var l=u==="auto"?this.cornerLength:u;if(Bn(e,t,this.points,s,o,a,i-2*l,[0,-1],n)||Bn(e,t,this.points,s,o,a-2*l,i,[0,-1],n))return!0;var c=this.generateCutTrianglePts(a,i,s,o);return hr(e,t,c.topLeft)||hr(e,t,c.topRight)||hr(e,t,c.bottomRight)||hr(e,t,c.bottomLeft)}}};Dn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:er(4,0),draw:function(e,t,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,s,o,u){var l=.15,c=.5,f=.85,d=this.generateBarrelBezierPts(n+2*o,a+2*o,e,t),h=function(p){var g=oi({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},l),m=oi({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},c),b=oi({x:p[0],y:p[1]},{x:p[2],y:p[3]},{x:p[4],y:p[5]},f);return[p[0],p[1],g.x,g.y,m.x,m.y,b.x,b.y,p[4],p[5]]},v=[].concat(h(d.topLeft),h(d.topRight),h(d.bottomRight),h(d.bottomLeft));return ls(i,s,v,e,t)},generateBarrelBezierPts:function(e,t,n,a){var i=t/2,s=e/2,o=n-s,u=n+s,l=a-i,c=a+i,f=kc(e,t),d=f.heightOffset,h=f.widthOffset,v=f.ctrlPtOffsetPct*e,y={topLeft:[o,l+d,o+v,l,o+h,l],topRight:[u-h,l,u-v,l,u,l+d],bottomRight:[u,c-d,u-v,c,u-h,c],bottomLeft:[o+h,c,o+v,c,o,c-d]};return y.topLeft.isTop=!0,y.topRight.isTop=!0,y.bottomLeft.isBottom=!0,y.bottomRight.isBottom=!0,y},checkPoint:function(e,t,n,a,i,s,o,u){var l=kc(a,i),c=l.heightOffset,f=l.widthOffset;if(Bn(e,t,this.points,s,o,a,i-2*c,[0,-1],n)||Bn(e,t,this.points,s,o,a-2*f,i,[0,-1],n))return!0;for(var d=this.generateBarrelBezierPts(a,i,s,o),h=function(T,B,I){var _=I[4],D=I[2],A=I[0],O=I[5],k=I[1],P=Math.min(_,A),M=Math.max(_,A),F=Math.min(O,k),W=Math.max(O,k);if(P<=T&&T<=M&&F<=B&&B<=W){var H=kS(_,D,A),z=BS(H[0],H[1],H[2],T),$=z.filter(function(X){return 0<=X&&X<=1});if($.length>0)return $[0]}return null},v=Object.keys(d),y=0;y<v.length;y++){var p=v[y],g=d[p],m=h(e,t,g);if(m!=null){var b=g[5],w=g[3],S=g[1],E=Ut(b,w,S,m);if(g.isTop&&E<=t||g.isBottom&&t<=E)return!0}}return!1}}};Dn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:er(4,0),draw:function(e,t,n,a,i,s){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,s)},intersectLine:function(e,t,n,a,i,s,o,u){var l=e-(n/2+o),c=t-(a/2+o),f=c,d=e+(n/2+o),h=Vn(i,s,e,t,l,c,d,f,!1);return h.length>0?h:gy(i,s,e,t,n,a,o,u)},checkPoint:function(e,t,n,a,i,s,o,u){u=u==="auto"?Qn(a,i):u;var l=2*u;if(Bn(e,t,this.points,s,o,a,i-l,[0,-1],n)||Bn(e,t,this.points,s,o,a-l,i,[0,-1],n))return!0;var c=a/2+2*n,f=i/2+2*n,d=[s-c,o-f,s-c,o,s+c,o,s+c,o-f];return!!(hr(e,t,d)||Ta(e,t,l,l,s+a/2-u,o+i/2-u,n)||Ta(e,t,l,l,s-a/2+u,o+i/2-u,n))}}};Dn.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",er(3,0)),this.generateRoundPolygon("round-triangle",er(3,0)),this.generatePolygon("rectangle",er(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",er(5,0)),this.generateRoundPolygon("round-pentagon",er(5,0)),this.generatePolygon("hexagon",er(6,0)),this.generateRoundPolygon("round-hexagon",er(6,0)),this.generatePolygon("heptagon",er(7,0)),this.generateRoundPolygon("round-heptagon",er(7,0)),this.generatePolygon("octagon",er(8,0)),this.generateRoundPolygon("round-octagon",er(8,0));var n=new Array(20);{var a=Mc(5,0),i=Mc(5,Math.PI/5),s=.5*(3-Math.sqrt(5));s*=1.57;for(var o=0;o<i.length/2;o++)i[o*2]*=s,i[o*2+1]*=s;for(var o=0;o<20/4;o++)n[o*4]=a[o*2],n[o*4+1]=a[o*2+1],n[o*4+2]=i[o*2],n[o*4+3]=i[o*2+1]}n=yy(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var u=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",u),this.generateRoundPolygon("round-tag",u)}r.makePolygon=function(l){var c=l.join("$"),f="polygon-"+c,d;return(d=this[f])?d:e.generatePolygon(f,l)}};var Os={};Os.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Os.redraw=function(r){r=r||dy();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};Os.beforeRender=function(r,e){if(!this.destroyed){e==null&&bt("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,a){return a.priority-n.priority})}};var qv=function(e,t,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(t,n)};Os.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function(a){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){qv(r,!0,a);var i=Cn();r.render(r.renderOptions);var s=r.lastDrawTime=Cn();r.averageRedrawTime===void 0&&(r.averageRedrawTime=s-i),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var o=s-i;r.redrawTotalTime+=o,r.lastRedrawTime=o,r.averageRedrawTime=r.averageRedrawTime/2+o/2,r.requestedFrame=!1}else qv(r,!1,a);r.skipFrame=!1,jo(t)}};jo(t)}};var XT=function(e){this.init(e)},mm=XT,_i=mm.prototype;_i.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];_i.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,s="__________cytoscape_stylesheet",o="__________cytoscape_container",u=a.getElementById(s)!=null;if(t.className.indexOf(o)<0&&(t.className=(t.className||"")+" "+o),!u){var l=a.createElement("style");l.id=s,l.textContent="."+o+" { position: relative; }",i.insertBefore(l,i.children[0])}var c=n.getComputedStyle(t),f=c.getPropertyValue("position");f==="static"&&ot("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.webgl=r.webgl,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=ie(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};_i.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),r==="gc"&&t.redrawHint("gc",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};_i.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};_i.isHeadless=function(){return!1};[Kf,gm,ym,Ii,Dn,Os].forEach(function(r){we(_i,r)});var cc=1e3/60,bm={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Is(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),s=function(l,c){var f=Cn(),d=a.averageRedrawTime,h=a.lastRedrawTime,v=[],y=a.cy.extent(),p=a.getPixelRatio();for(l||a.flushRenderedStyleQueue();;){var g=Cn(),m=g-f,b=g-c;if(h<cc){var w=cc-(l?d:0);if(b>=e.deqFastCost*w)break}else if(l){if(m>=e.deqCost*h||m>=e.deqAvgCost*d)break}else if(b>=e.deqNoDrawCost*cc)break;var S=e.deq(n,p,y);if(S.length>0)for(var E=0;E<S.length;E++)v.push(S[E]);else break}v.length>0&&(e.onDeqd(n,v),!l&&e.shouldRedraw(n,v,p,y)&&i())},o=e.priority||Mf;a.beforeRender(s,o(n))}}}},ZT=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xo;ia(this,r),this.idsByKey=new Sn,this.keyForId=new Sn,this.cachesByLvl=new Sn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return sa(r,[{key:"getIdsFor",value:function(t){t==null&&bt("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(t);return a||(a=new Ei,n.set(t,a)),a}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);return a!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,a=this.lvls,i=n.get(t);return i||(i=new Sn,n.set(t,i),a.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var a=this.getKey(t),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var a=this.keyForId.get(t.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var a=this.getKey(t);return this.hasCache(a,n)}},{key:"setCache",value:function(t,n,a){a.key=t,this.getCachesAt(n).set(t,a)}},{key:"set",value:function(t,n,a){var i=this.getKey(t);this.setCache(i,n,a),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var a=this.getKey(t);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(a){return n.deleteCache(t,a)})}},{key:"invalidate",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}])}(),$v=25,Xs=50,po=-4,Yc=3,wm=7.99,QT=8,JT=1024,e2=1024,t2=1024,r2=.2,n2=.8,a2=10,i2=.15,s2=.1,o2=.9,u2=.9,l2=100,c2=1,ti={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},f2=Yt({getKey:null,doesEleInvalidateKey:Xo,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:ly,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Gi=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var a=f2(t);we(n,a),n.lookup=new ZT(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},zt=Gi.prototype;zt.reasons=ti;zt.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};zt.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};zt.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new _s(function(t,n){return n.reqs-t.reqs});return e};zt.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};zt.getElement=function(r,e,t,n,a){var i=this,s=this.renderer,o=s.cy.zoom(),u=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!i.allowEdgeTxrCaching&&r.isEdge()||!i.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(Pf(o*t))),n<po)n=po;else if(o>=wm||n>Yc)return null;var l=Math.pow(2,n),c=e.h*l,f=e.w*l,d=s.eleTextBiggerThanMin(r,l);if(!this.isVisible(r,d))return null;var h=u.get(r,n);if(h&&h.invalidated&&(h.invalidated=!1,h.texture.invalidatedWidth-=h.width),h)return h;var v;if(c<=$v?v=$v:c<=Xs?v=Xs:v=Math.ceil(c/Xs)*Xs,c>t2||f>e2)return null;var y=i.getTextureQueue(v),p=y[y.length-2],g=function(){return i.recycleTexture(v,f)||i.addTexture(v,f)};p||(p=y[y.length-1]),p||(p=g()),p.width-p.usedWidth<f&&(p=g());for(var m=function(P){return P&&P.scaledLabelShown===d},b=a&&a===ti.dequeue,w=a&&a===ti.highQuality,S=a&&a===ti.downscale,E,x=n+1;x<=Yc;x++){var T=u.get(r,x);if(T){E=T;break}}var B=E&&E.level===n+1?E:null,I=function(){p.context.drawImage(B.texture.canvas,B.x,0,B.width,B.height,p.usedWidth,0,f,c)};if(p.context.setTransform(1,0,0,1,0,0),p.context.clearRect(p.usedWidth,0,f,v),m(B))I();else if(m(E))if(w){for(var _=E.level;_>n;_--)B=i.getElement(r,e,t,_,ti.downscale);I()}else return i.queueElement(r,E.level-1),E;else{var D;if(!b&&!w&&!S)for(var A=n-1;A>=po;A--){var O=u.get(r,A);if(O){D=O;break}}if(m(D))return i.queueElement(r,n),D;p.context.translate(p.usedWidth,0),p.context.scale(l,l),this.drawElement(p.context,r,e,d,!1),p.context.scale(1/l,1/l),p.context.translate(-p.usedWidth,0)}return h={x:p.usedWidth,texture:p,level:n,scale:l,width:f,height:c,scaledLabelShown:d},p.usedWidth+=Math.ceil(f+QT),p.eleCaches.push(h),u.set(r,n,h),i.checkTextureFullness(p),h};zt.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};zt.invalidateElement=function(r){var e=this,t=e.lookup,n=[],a=t.isInvalid(r);if(a){for(var i=po;i<=Yc;i++){var s=t.getForCachedKey(r,i);s&&n.push(s)}var o=t.invalidate(r);if(o)for(var u=0;u<n.length;u++){var l=n[u],c=l.texture;c.invalidatedWidth+=l.width,l.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(r)}};zt.checkTextureUtility=function(r){r.invalidatedWidth>=r2*r.width&&this.retireTexture(r)};zt.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>n2&&r.fullnessChecks>=a2?Zn(t,r):r.fullnessChecks++};zt.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),a=this.lookup;Zn(n,r),r.retired=!0;for(var i=r.eleCaches,s=0;s<i.length;s++){var o=i[s];a.deleteCache(o.key,o.level)}kf(i);var u=e.getRetiredTextureQueue(t);u.push(r)};zt.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),a={};return n.push(a),a.eleCaches=[],a.height=r,a.width=Math.max(JT,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=t.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};zt.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),a=t.getRetiredTextureQueue(r),i=0;i<a.length;i++){var s=a[i];if(s.width>=e)return s.retired=!1,s.usedWidth=0,s.invalidatedWidth=0,s.fullnessChecks=0,kf(s.eleCaches),s.context.setTransform(1,0,0,1,0,0),s.context.clearRect(0,0,s.width,s.height),Zn(a,s),n.push(s),s}};zt.queueElement=function(r,e){var t=this,n=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(r),s=a[i];if(s)s.level=Math.max(s.level,e),s.eles.merge(r),s.reqs++,n.updateItem(s);else{var o={eles:r.spawn().merge(r),level:e,reqs:1,key:i};n.push(o),a[i]=o}};zt.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,s=0;s<c2&&t.size()>0;s++){var o=t.pop(),u=o.key,l=o.eles[0],c=i.hasCache(l,o.level);if(n[u]=null,c)continue;a.push(o);var f=e.getBoundingBox(l);e.getElement(l,f,r,o.level,ti.dequeue)}return a};zt.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(r),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Of,t.updateItem(i),t.pop(),n[a]=null):i.eles.unmerge(r))};zt.onDequeue=function(r){this.onDequeues.push(r)};zt.offDequeue=function(r){Zn(this.onDequeues,r)};zt.setupDequeueing=bm.setupDequeueing({deqRedrawThreshold:l2,deqCost:i2,deqAvgCost:s2,deqNoDrawCost:o2,deqFastCost:u2,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(t)}},shouldRedraw:function(e,t,n,a){for(var i=0;i<t.length;i++)for(var s=t[i].eles,o=0;o<s.length;o++){var u=s[o].boundingBox();if(Ff(u,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var d2=1,Xi=-4,au=2,h2=3.99,v2=50,p2=50,g2=.15,y2=.1,m2=.9,b2=.9,w2=1,Wv=250,S2=4e3*4e3,Gv=32767,x2=!0,Sm=function(e){var t=this,n=t.renderer=e,a=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Cn()-2*Wv,t.skipping=!1,t.eleTxrDeqs=a.collection(),t.scheduleElementRefinement=Is(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},p2),n.beforeRender(function(s,o){o-t.lastInvalidationTime<=Wv?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(o,u){return u.reqs-o.reqs};t.layersQueue=new _s(i),t.setupDequeueing()},Kt=Sm.prototype,Hv=0,E2=Math.pow(2,53)-1;Kt.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),a=Math.ceil(r.h*t),i=this.renderer.makeOffscreenCanvas(n,a),s={id:Hv=++Hv%E2,bb:r,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=s.context,u=-s.bb.x1,l=-s.bb.y1;return o.scale(t,t),o.translate(u,l),s};Kt.getLayers=function(r,e,t){var n=this,a=n.renderer,i=a.cy,s=i.zoom(),o=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(Pf(s*e)),t<Xi)t=Xi;else if(s>=h2||t>au)return null}n.validateLayersElesOrdering(t,r);var u=n.layersByLevel,l=Math.pow(2,t),c=u[t]=u[t]||[],f,d=n.levelIsComplete(t,r),h,v=function(){var I=function(k){if(n.validateLayersElesOrdering(k,r),n.levelIsComplete(k,r))return h=u[k],!0},_=function(k){if(!h)for(var P=t+k;Xi<=P&&P<=au&&!I(P);P+=k);};_(1),_(-1);for(var D=c.length-1;D>=0;D--){var A=c[D];A.invalid&&Zn(c,A)}};if(!d)v();else return c;var y=function(){if(!f){f=ar();for(var I=0;I<r.length;I++)wS(f,r[I].boundingBox())}return f},p=function(I){I=I||{};var _=I.after;y();var D=Math.ceil(f.w*l),A=Math.ceil(f.h*l);if(D>Gv||A>Gv)return null;var O=D*A;if(O>S2)return null;var k=n.makeLayer(f,t);if(_!=null){var P=c.indexOf(_)+1;c.splice(P,0,k)}else(I.insert===void 0||I.insert)&&c.unshift(k);return k};if(n.skipping&&!o)return null;for(var g=null,m=r.length/d2,b=!o,w=0;w<r.length;w++){var S=r[w],E=S._private.rscratch,x=E.imgLayerCaches=E.imgLayerCaches||{},T=x[t];if(T){g=T;continue}if((!g||g.eles.length>=m||!py(g.bb,S.boundingBox()))&&(g=p({insert:!0,after:g}),!g))return null;h||b?n.queueLayer(g,S):n.drawEleInLayer(g,S,t,e),g.eles.push(S),x[t]=g}return h||(b?null:c)};Kt.getEleLevelForLayerLevel=function(r,e){return r};Kt.drawEleInLayer=function(r,e,t,n){var a=this,i=this.renderer,s=r.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(t=a.getEleLevelForLayerLevel(t,n),i.setImgSmoothing(s,!1),i.drawCachedElement(s,e,null,null,t,x2),i.setImgSmoothing(s,!0))};Kt.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var s=n[i];if(s.reqs>0||s.invalid)return!1;a+=s.eles.length}return a===e.length};Kt.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(t)for(var n=0;n<t.length;n++){for(var a=t[n],i=-1,s=0;s<e.length;s++)if(a.eles[0]===e[s]){i=s;break}if(i<0){this.invalidateLayer(a);continue}for(var o=i,s=0;s<a.eles.length;s++)if(a.eles[s]!==e[o+s]){this.invalidateLayer(a);break}}};Kt.updateElementsInLayers=function(r,e){for(var t=this,n=Es(r[0]),a=0;a<r.length;a++)for(var i=n?null:r[a],s=n?r[a]:r[a].ele,o=s._private.rscratch,u=o.imgLayerCaches=o.imgLayerCaches||{},l=Xi;l<=au;l++){var c=u[l];c&&(i&&t.getEleLevelForLayerLevel(c.level)!==i.level||e(c,s,i))}};Kt.haveLayers=function(){for(var r=this,e=!1,t=Xi;t<=au;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Kt.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Cn(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,a,i){e.invalidateLayer(n)}))};Kt.invalidateLayer=function(r){if(this.lastInvalidationTime=Cn(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];Zn(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var a=0;a<t.length;a++){var i=t[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Kt.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,a,i){var s=n.replacement;if(s||(s=n.replacement=e.makeLayer(n.bb,n.level),s.replaces=n,s.eles=n.eles),!s.reqs)for(var o=0;o<s.eles.length;o++)e.queueLayer(s,s.eles[o])})};Kt.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Kt.queueLayer=function(r,e){var t=this,n=t.layersQueue,a=r.elesQueue,i=a.hasId=a.hasId||{};if(!r.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Kt.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],a=0;a<w2&&t.size()!==0;){var i=t.peek();if(i.replacement){t.pop();continue}if(i.replaces&&i!==i.replaces.replacement){t.pop();continue}if(i.invalid){t.pop();continue}var s=i.elesQueue.shift();s&&(e.drawEleInLayer(i,s,i.level,r),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(t.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Kt.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,a=t.indexOf(n);if(!(a<0||n.invalid)){t[a]=r;for(var i=0;i<r.eles.length;i++){var s=r.eles[i]._private,o=s.imgLayerCaches=s.imgLayerCaches||{};o&&(o[r.level]=r)}e.requestRedraw()}};Kt.requestRedraw=Is(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Kt.setupDequeueing=bm.setupDequeueing({deqRedrawThreshold:v2,deqCost:g2,deqAvgCost:y2,deqNoDrawCost:m2,deqFastCost:b2,deq:function(e,t){return e.dequeue(t)},onDeqd:Mf,shouldRedraw:ly,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var xm={},Yv;function T2(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function C2(r,e,t){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),r.lineTo(i.x,i.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function Kv(r,e,t){r.beginPath&&r.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];r.lineTo(i.x,i.y)}var s=t,o=t[0];r.moveTo(o.x,o.y);for(var a=1;a<s.length;a++){var i=s[a];r.lineTo(i.x,i.y)}r.closePath&&r.closePath()}function B2(r,e,t,n,a){r.beginPath&&r.beginPath(),r.arc(t,n,a,0,Math.PI*2,!1);var i=e,s=i[0];r.moveTo(s.x,s.y);for(var o=0;o<i.length;o++){var u=i[o];r.lineTo(u.x,u.y)}r.closePath&&r.closePath()}function I2(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}xm.arrowShapeImpl=function(r){return(Yv||(Yv={polygon:T2,"triangle-backcurve":C2,"triangle-tee":Kv,"circle-triangle":B2,"triangle-cross":Kv,circle:I2}))[r]};var cn={};cn.drawElement=function(r,e,t,n,a,i){var s=this;e.isNode()?s.drawNode(r,e,t,n,a,i):s.drawEdge(r,e,t,n,a,i)};cn.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};cn.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};cn.drawCachedElementPortion=function(r,e,t,n,a,i,s,o){var u=this,l=t.getBoundingBox(e);if(!(l.w===0||l.h===0)){var c=t.getElement(e,l,n,a,i);if(c!=null){var f=o(u,e);if(f===0)return;var d=s(u,e),h=l.x1,v=l.y1,y=l.w,p=l.h,g,m,b,w,S;if(d!==0){var E=t.getRotationPoint(e);b=E.x,w=E.y,r.translate(b,w),r.rotate(d),S=u.getImgSmoothing(r),S||u.setImgSmoothing(r,!0);var x=t.getRotationOffset(e);g=x.x,m=x.y}else g=h,m=v;var T;f!==1&&(T=r.globalAlpha,r.globalAlpha=T*f),r.drawImage(c.texture.canvas,c.x,0,c.width,c.height,g,m,y,p),f!==1&&(r.globalAlpha=T),d!==0&&(r.rotate(-d),r.translate(-b,-w),S||u.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var _2=function(){return 0},D2=function(e,t){return e.getTextAngle(t,null)},A2=function(e,t){return e.getTextAngle(t,"source")},R2=function(e,t){return e.getTextAngle(t,"target")},O2=function(e,t){return t.effectiveOpacity()},fc=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};cn.drawCachedElement=function(r,e,t,n,a,i){var s=this,o=s.data,u=o.eleTxrCache,l=o.lblTxrCache,c=o.slbTxrCache,f=o.tlbTxrCache,d=e.boundingBox(),h=i===!0?u.reasons.highQuality:null;if(!(d.w===0||d.h===0||!e.visible())&&(!n||Ff(d,n))){var v=e.isEdge(),y=e.element()._private.rscratch.badLine;s.drawElementUnderlay(r,e),s.drawCachedElementPortion(r,e,u,t,a,h,_2,O2),(!v||!y)&&s.drawCachedElementPortion(r,e,l,t,a,h,D2,fc),v&&!y&&(s.drawCachedElementPortion(r,e,c,t,a,h,A2,fc),s.drawCachedElementPortion(r,e,f,t,a,h,R2,fc)),s.drawElementOverlay(r,e)}};cn.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var a=e[n];t.drawElement(r,a)}};cn.drawCachedElements=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];a.drawCachedElement(r,s,t,n)}};cn.drawCachedNodes=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var s=e[i];s.isNode()&&a.drawCachedElement(r,s,t,n)}};cn.drawLayeredElements=function(r,e,t,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,t);if(i)for(var s=0;s<i.length;s++){var o=i[s],u=o.bb;u.w===0||u.h===0||r.drawImage(o.canvas,u.x1,u.y1,u.w,u.h)}else a.drawCachedElements(r,e,t,n)};var An={};An.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o=e._private.rscratch;if(!(i&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var u;t&&(u=t,r.translate(-u.x1,-u.y1));var l=i?e.pstyle("opacity").value:1,c=i?e.pstyle("line-opacity").value:1,f=e.pstyle("curve-style").value,d=e.pstyle("line-style").value,h=e.pstyle("width").pfValue,v=e.pstyle("line-cap").value,y=e.pstyle("line-outline-width").value,p=e.pstyle("line-outline-color").value,g=l*c,m=l*c,b=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;f==="straight-triangle"?(s.eleStrokeStyle(r,e,k),s.drawEdgeTrianglePath(e,r,o.allpts)):(r.lineWidth=h,r.lineCap=v,s.eleStrokeStyle(r,e,k),s.drawEdgePath(e,r,o.allpts,d),r.lineCap="butt")},w=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;if(r.lineWidth=h+y,r.lineCap=v,y>0)s.colorStrokeStyle(r,p[0],p[1],p[2],k);else{r.lineCap="butt";return}f==="straight-triangle"?s.drawEdgeTrianglePath(e,r,o.allpts):(s.drawEdgePath(e,r,o.allpts,d),r.lineCap="butt")},S=function(){a&&s.drawEdgeOverlay(r,e)},E=function(){a&&s.drawEdgeUnderlay(r,e)},x=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;s.drawArrowheads(r,e,k)},T=function(){s.drawElementText(r,e,null,n)};r.lineJoin="round";var B=e.pstyle("ghost").value==="yes";if(B){var I=e.pstyle("ghost-offset-x").pfValue,_=e.pstyle("ghost-offset-y").pfValue,D=e.pstyle("ghost-opacity").value,A=g*D;r.translate(I,_),b(A),x(A),r.translate(-I,-_)}else w();E(),b(),x(),S(),T(),t&&r.translate(u.x1,u.y1)}};var Em=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,s=i.usePaths(),o=n._private.rscratch,u=n.pstyle("".concat(e,"-padding")).pfValue,l=2*u,c=n.pstyle("".concat(e,"-color")).value;t.lineWidth=l,o.edgeType==="self"&&!s?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,c[0],c[1],c[2],a),i.drawEdgePath(n,t,o.allpts,"solid")}}}};An.drawEdgeOverlay=Em("overlay");An.drawEdgeUnderlay=Em("underlay");An.drawEdgePath=function(r,e,t,n){var a=r._private.rscratch,i=e,s,o=!1,u=this.usePaths(),l=r.pstyle("line-dash-pattern").pfValue,c=r.pstyle("line-dash-offset").pfValue;if(u){var f=t.join("$"),d=a.pathCacheKey&&a.pathCacheKey===f;d?(s=e=a.pathCache,o=!0):(s=e=new Path2D,a.pathCacheKey=f,a.pathCache=s)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(l),i.lineDashOffset=c;break;case"solid":i.setLineDash([]);break}if(!o&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var h=2;h+3<t.length;h+=4)e.quadraticCurveTo(t[h],t[h+1],t[h+2],t[h+3]);break;case"straight":case"haystack":for(var v=2;v+1<t.length;v+=2)e.lineTo(t[v],t[v+1]);break;case"segments":if(a.isRound){var y=vr(a.roundCorners),p;try{for(y.s();!(p=y.n()).done;){var g=p.value;fm(e,g)}}catch(b){y.e(b)}finally{y.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var m=2;m+1<t.length;m+=2)e.lineTo(t[m],t[m+1]);break}e=i,u?e.stroke(s):e.stroke(),e.setLineDash&&e.setLineDash([])};An.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,a=0;a+1<t.length;a+=2){var i=[t[a+2]-t[a],t[a+3]-t[a+1]],s=Math.sqrt(i[0]*i[0]+i[1]*i[1]),o=[i[1]/s,-i[0]/s],u=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(t[a]-u[0],t[a+1]-u[1]),e.lineTo(t[a]+u[0],t[a+1]+u[1]),e.lineTo(t[a+2],t[a+3]),e.closePath(),e.fill()}};An.drawArrowheads=function(r,e,t){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),a||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};An.drawArrowhead=function(r,e,t,n,a,i,s){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var o=this,u=e.pstyle(t+"-arrow-shape").value;if(u!=="none"){var l=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(t+"-arrow-fill").value,f=e.pstyle("width").pfValue,d=e.pstyle(t+"-arrow-width"),h=d.value==="match-line"?f:d.pfValue;d.units==="%"&&(h*=f);var v=e.pstyle("opacity").value;s===void 0&&(s=v);var y=r.globalCompositeOperation;(s!==1||c==="hollow")&&(r.globalCompositeOperation="destination-out",o.colorFillStyle(r,255,255,255,1),o.colorStrokeStyle(r,255,255,255,1),o.drawArrowShape(e,r,l,f,u,h,n,a,i),r.globalCompositeOperation=y);var p=e.pstyle(t+"-arrow-color").value;o.colorFillStyle(r,p[0],p[1],p[2],s),o.colorStrokeStyle(r,p[0],p[1],p[2],s),o.drawArrowShape(e,r,c,f,u,h,n,a,i)}}};An.drawArrowShape=function(r,e,t,n,a,i,s,o,u){var l=this,c=this.usePaths()&&a!=="triangle-cross",f=!1,d,h=e,v={x:s,y:o},y=r.pstyle("arrow-scale").value,p=this.getArrowWidth(n,y),g=l.arrowShapes[a];if(c){var m=l.arrowPathCache=l.arrowPathCache||[],b=_a(a),w=m[b];w!=null?(d=e=w,f=!0):(d=e=new Path2D,m[b]=d)}f||(e.beginPath&&e.beginPath(),c?g.draw(e,1,0,{x:0,y:0},1):g.draw(e,p,u,v,n),e.closePath&&e.closePath()),e=h,c&&(e.translate(s,o),e.rotate(u),e.scale(p,p)),(t==="filled"||t==="both")&&(c?e.fill(d):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=i/(c?p:1),e.lineJoin="miter",c?e.stroke(d):e.stroke()),c&&(e.scale(1/p,1/p),e.rotate(-u),e.translate(-s,-o))};var Zf={};Zf.safeDrawImage=function(r,e,t,n,a,i,s,o,u,l){if(!(a<=0||i<=0||u<=0||l<=0))try{r.drawImage(e,t,n,a,i,s,o,u,l)}catch(c){ot(c)}};Zf.drawInscribedImage=function(r,e,t,n,a){var i=this,s=t.position(),o=s.x,u=s.y,l=t.cy().style(),c=l.getIndexedStyle.bind(l),f=c(t,"background-fit","value",n),d=c(t,"background-repeat","value",n),h=t.width(),v=t.height(),y=t.padding()*2,p=h+(c(t,"background-width-relative-to","value",n)==="inner"?0:y),g=v+(c(t,"background-height-relative-to","value",n)==="inner"?0:y),m=t._private.rscratch,b=c(t,"background-clip","value",n),w=b==="node",S=c(t,"background-image-opacity","value",n)*a,E=c(t,"background-image-smoothing","value",n),x=t.pstyle("corner-radius").value;x!=="auto"&&(x=t.pstyle("corner-radius").pfValue);var T=e.width||e.cachedW,B=e.height||e.cachedH;(T==null||B==null)&&(document.body.appendChild(e),T=e.cachedW=e.width||e.offsetWidth,B=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var I=T,_=B;if(c(t,"background-width","value",n)!=="auto"&&(c(t,"background-width","units",n)==="%"?I=c(t,"background-width","pfValue",n)*p:I=c(t,"background-width","pfValue",n)),c(t,"background-height","value",n)!=="auto"&&(c(t,"background-height","units",n)==="%"?_=c(t,"background-height","pfValue",n)*g:_=c(t,"background-height","pfValue",n)),!(I===0||_===0)){if(f==="contain"){var D=Math.min(p/I,g/_);I*=D,_*=D}else if(f==="cover"){var D=Math.max(p/I,g/_);I*=D,_*=D}var A=o-p/2,O=c(t,"background-position-x","units",n),k=c(t,"background-position-x","pfValue",n);O==="%"?A+=(p-I)*k:A+=k;var P=c(t,"background-offset-x","units",n),M=c(t,"background-offset-x","pfValue",n);P==="%"?A+=(p-I)*M:A+=M;var F=u-g/2,W=c(t,"background-position-y","units",n),H=c(t,"background-position-y","pfValue",n);W==="%"?F+=(g-_)*H:F+=H;var z=c(t,"background-offset-y","units",n),$=c(t,"background-offset-y","pfValue",n);z==="%"?F+=(g-_)*$:F+=$,m.pathCache&&(A-=o,F-=u,o=0,u=0);var X=r.globalAlpha;r.globalAlpha=S;var te=i.getImgSmoothing(r),R=!1;if(E==="no"&&te?(i.setImgSmoothing(r,!1),R=!0):E==="yes"&&!te&&(i.setImgSmoothing(r,!0),R=!0),d==="no-repeat")w&&(r.save(),m.pathCache?r.clip(m.pathCache):(i.nodeShapes[i.getNodeShape(t)].draw(r,o,u,p,g,x,m),r.clip())),i.safeDrawImage(r,e,0,0,T,B,A,F,I,_),w&&r.restore();else{var L=r.createPattern(e,d);r.fillStyle=L,i.nodeShapes[i.getNodeShape(t)].draw(r,o,u,p,g,x,m),r.translate(A,F),r.fill(),r.translate(-A,-F)}r.globalAlpha=X,R&&i.setImgSmoothing(r,te)}};var La={};La.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Pf(t*n));e=Math.pow(2,a)}var i=r.pstyle("font-size").pfValue*e,s=r.pstyle("min-zoomed-font-size").pfValue;return!(i<s)};La.drawElementText=function(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this;if(n==null){if(i&&!s.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var u=s.getLabelJustification(e);r.textAlign=u,r.textBaseline="bottom"}else{var l=e.element()._private.rscratch.badLine,c=e.pstyle("label"),f=e.pstyle("source-label"),d=e.pstyle("target-label");if(l||(!c||!c.value)&&(!f||!f.value)&&(!d||!d.value))return;r.textAlign="center",r.textBaseline="bottom"}var h=!t,v;t&&(v=t,r.translate(-v.x1,-v.y1)),a==null?(s.drawText(r,e,null,h,i),e.isEdge()&&(s.drawText(r,e,"source",h,i),s.drawText(r,e,"target",h,i))):s.drawText(r,e,a,h,i),t&&r.translate(v.x1,v.y1)};La.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};La.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,s=e.pstyle("font-weight").strValue,o=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,u=e.pstyle("text-outline-opacity").value*o,l=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;r.font=n+" "+s+" "+a+" "+i,r.lineJoin="round",this.colorFillStyle(r,l[0],l[1],l[2],o),this.colorStrokeStyle(r,c[0],c[1],c[2],u)};function M2(r,e,t,n,a){var i=Math.min(n,a),s=i/2,o=e+n/2,u=t+a/2;r.beginPath(),r.arc(o,u,s,0,Math.PI*2),r.closePath()}function jv(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,s=Math.min(i,n/2,a/2);r.beginPath(),r.moveTo(e+s,t),r.lineTo(e+n-s,t),r.quadraticCurveTo(e+n,t,e+n,t+s),r.lineTo(e+n,t+a-s),r.quadraticCurveTo(e+n,t+a,e+n-s,t+a),r.lineTo(e+s,t+a),r.quadraticCurveTo(e,t+a,e,t+a-s),r.lineTo(e,t+s),r.quadraticCurveTo(e,t,e+s,t),r.closePath()}La.getTextAngle=function(r,e){var t,n=r._private,a=n.rscratch,i=e?e+"-":"",s=r.pstyle(i+"text-rotation");if(s.strValue==="autorotate"){var o=dr(a,"labelAngle",e);t=r.isEdge()?o:0}else s.strValue==="none"?t=0:t=s.pfValue;return t};La.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,s=i.rscratch,o=a?e.effectiveOpacity():1;if(!(a&&(o===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var u=dr(s,"labelX",t),l=dr(s,"labelY",t),c,f,d=this.getLabelText(e,t);if(d!=null&&d!==""&&!isNaN(u)&&!isNaN(l)){this.setupTextStyle(r,e,a);var h=t?t+"-":"",v=dr(s,"labelWidth",t),y=dr(s,"labelHeight",t),p=e.pstyle(h+"text-margin-x").pfValue,g=e.pstyle(h+"text-margin-y").pfValue,m=e.isEdge(),b=e.pstyle("text-halign").value,w=e.pstyle("text-valign").value;m&&(b="center",w="center"),u+=p,l+=g;var S;switch(n?S=this.getTextAngle(e,t):S=0,S!==0&&(c=u,f=l,r.translate(c,f),r.rotate(S),u=0,l=0),w){case"top":break;case"center":l+=y/2;break;case"bottom":l+=y;break}var E=e.pstyle("text-background-opacity").value,x=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,B=e.pstyle("text-background-padding").pfValue,I=e.pstyle("text-background-shape").strValue,_=I==="round-rectangle"||I==="roundrectangle",D=I==="circle",A=2;if(E>0||T>0&&x>0){var O=r.fillStyle,k=r.strokeStyle,P=r.lineWidth,M=e.pstyle("text-background-color").value,F=e.pstyle("text-border-color").value,W=e.pstyle("text-border-style").value,H=E>0,z=T>0&&x>0,$=u-B;switch(b){case"left":$-=v;break;case"center":$-=v/2;break}var X=l-y-B,te=v+2*B,R=y+2*B;if(H&&(r.fillStyle="rgba(".concat(M[0],",").concat(M[1],",").concat(M[2],",").concat(E*o,")")),z&&(r.strokeStyle="rgba(".concat(F[0],",").concat(F[1],",").concat(F[2],",").concat(x*o,")"),r.lineWidth=T,r.setLineDash))switch(W){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=T/4,r.setLineDash([]);break;case"solid":default:r.setLineDash([]);break}if(_?(r.beginPath(),jv(r,$,X,te,R,A)):D?(r.beginPath(),M2(r,$,X,te,R)):(r.beginPath(),r.rect($,X,te,R)),H&&r.fill(),z&&r.stroke(),z&&W==="double"){var L=T/2;r.beginPath(),_?jv(r,$+L,X+L,te-2*L,R-2*L,A):r.rect($+L,X+L,te-2*L,R-2*L),r.stroke()}r.fillStyle=O,r.strokeStyle=k,r.lineWidth=P,r.setLineDash&&r.setLineDash([])}var K=2*e.pstyle("text-outline-width").pfValue;if(K>0&&(r.lineWidth=K),e.pstyle("text-wrap").value==="wrap"){var ne=dr(s,"labelWrapCachedLines",t),Y=dr(s,"labelLineHeight",t),N=v/2,V=this.getLabelJustification(e);switch(V==="auto"||(b==="left"?V==="left"?u+=-v:V==="center"&&(u+=-N):b==="center"?V==="left"?u+=-N:V==="right"&&(u+=N):b==="right"&&(V==="center"?u+=N:V==="right"&&(u+=v))),w){case"top":l-=(ne.length-1)*Y;break;case"center":case"bottom":l-=(ne.length-1)*Y;break}for(var U=0;U<ne.length;U++)K>0&&r.strokeText(ne[U],u,l),r.fillText(ne[U],u,l),l+=Y}else K>0&&r.strokeText(d,u,l),r.fillText(d,u,l);S!==0&&(r.rotate(-S),r.translate(-c,-f))}}};var ua={};ua.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,s=this,o,u,l=e._private,c=l.rscratch,f=e.position();if(!(!ie(f.x)||!ie(f.y))&&!(i&&!e.visible())){var d=i?e.effectiveOpacity():1,h=s.usePaths(),v,y=!1,p=e.padding();o=e.width()+2*p,u=e.height()+2*p;var g;t&&(g=t,r.translate(-g.x1,-g.y1));for(var m=e.pstyle("background-image"),b=m.value,w=new Array(b.length),S=new Array(b.length),E=0,x=0;x<b.length;x++){var T=b[x],B=w[x]=T!=null&&T!=="none";if(B){var I=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",x);E++,S[x]=s.getCachedImage(T,I,function(){l.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var _=e.pstyle("background-blacken").value,D=e.pstyle("border-width").pfValue,A=e.pstyle("background-opacity").value*d,O=e.pstyle("border-color").value,k=e.pstyle("border-style").value,P=e.pstyle("border-join").value,M=e.pstyle("border-cap").value,F=e.pstyle("border-position").value,W=e.pstyle("border-dash-pattern").pfValue,H=e.pstyle("border-dash-offset").pfValue,z=e.pstyle("border-opacity").value*d,$=e.pstyle("outline-width").pfValue,X=e.pstyle("outline-color").value,te=e.pstyle("outline-style").value,R=e.pstyle("outline-opacity").value*d,L=e.pstyle("outline-offset").value,K=e.pstyle("corner-radius").value;K!=="auto"&&(K=e.pstyle("corner-radius").pfValue);var ne=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:A;s.eleFillStyle(r,e,le)},Y=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z;s.colorStrokeStyle(r,O[0],O[1],O[2],le)},N=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:R;s.colorStrokeStyle(r,X[0],X[1],X[2],le)},V=function(le,J,C,G){var Z=s.nodePathCache=s.nodePathCache||[],Q=uy(C==="polygon"?C+","+G.join(","):C,""+J,""+le,""+K),ee=Z[Q],ue,re=!1;return ee!=null?(ue=ee,re=!0,c.pathCache=ue):(ue=new Path2D,Z[Q]=c.pathCache=ue),{path:ue,cacheHit:re}},U=e.pstyle("shape").strValue,j=e.pstyle("shape-polygon-points").pfValue;if(h){r.translate(f.x,f.y);var ae=V(o,u,U,j);v=ae.path,y=ae.cacheHit}var he=function(){if(!y){var le=f;h&&(le={x:0,y:0}),s.nodeShapes[s.getNodeShape(e)].draw(v||r,le.x,le.y,o,u,K,c)}h?r.fill(v):r.fill()},Ge=function(){for(var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,C=l.backgrounding,G=0,Z=0;Z<S.length;Z++){var Q=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Z);if(J&&Q==="over"||!J&&Q==="inside"){G++;continue}w[Z]&&S[Z].complete&&!S[Z].error&&(G++,s.drawInscribedImage(r,S[Z],e,Z,le))}l.backgrounding=G!==E,C!==l.backgrounding&&e.updateStyle(!1)},Ce=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasPie(e)&&(s.drawPie(r,e,J),le&&(h||s.nodeShapes[s.getNodeShape(e)].draw(r,f.x,f.y,o,u,K,c)))},Se=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;s.hasStripe(e)&&(r.save(),h?r.clip(c.pathCache):(s.nodeShapes[s.getNodeShape(e)].draw(r,f.x,f.y,o,u,K,c),r.clip()),s.drawStripe(r,e,J),r.restore(),le&&(h||s.nodeShapes[s.getNodeShape(e)].draw(r,f.x,f.y,o,u,K,c)))},me=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,J=(_>0?_:-_)*le,C=_>0?0:255;_!==0&&(s.colorFillStyle(r,C,C,C,J),h?r.fill(v):r.fill())},se=function(){if(D>0){if(r.lineWidth=D,r.lineCap=M,r.lineJoin=P,r.setLineDash)switch(k){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(W),r.lineDashOffset=H;break;case"solid":case"double":r.setLineDash([]);break}if(F!=="center"){if(r.save(),r.lineWidth*=2,F==="inside")h?r.clip(v):r.clip();else{var le=new Path2D;le.rect(-o/2-D,-u/2-D,o+2*D,u+2*D),le.addPath(v),r.clip(le,"evenodd")}h?r.stroke(v):r.stroke(),r.restore()}else h?r.stroke(v):r.stroke();if(k==="double"){r.lineWidth=D/3;var J=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",h?r.stroke(v):r.stroke(),r.globalCompositeOperation=J}r.setLineDash&&r.setLineDash([])}},ve=function(){if($>0){if(r.lineWidth=$,r.lineCap="butt",r.setLineDash)switch(te){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var le=f;h&&(le={x:0,y:0});var J=s.getNodeShape(e),C=D;F==="inside"&&(C=0),F==="outside"&&(C*=2);var G=(o+C+($+L))/o,Z=(u+C+($+L))/u,Q=o*G,ee=u*Z,ue=s.nodeShapes[J].points,re;if(h){var fe=V(Q,ee,J,ue);re=fe.path}if(J==="ellipse")s.drawEllipsePath(re||r,le.x,le.y,Q,ee);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(J)){var ce=0,be=0,Ve=0;J==="round-diamond"?ce=(C+L+$)*1.4:J==="round-heptagon"?(ce=(C+L+$)*1.075,Ve=-(C/2+L+$)/35):J==="round-hexagon"?ce=(C+L+$)*1.12:J==="round-pentagon"?(ce=(C+L+$)*1.13,Ve=-(C/2+L+$)/15):J==="round-tag"?(ce=(C+L+$)*1.12,be=(C/2+$+L)*.07):J==="round-triangle"&&(ce=(C+L+$)*(Math.PI/2),Ve=-(C+L/2+$)/Math.PI),ce!==0&&(G=(o+ce)/o,Q=o*G,["round-hexagon","round-tag"].includes(J)||(Z=(u+ce)/u,ee=u*Z)),K=K==="auto"?my(Q,ee):K;for(var Le=Q/2,de=ee/2,qe=K+(C+$+L)/2,Ue=new Array(ue.length/2),Ot=new Array(ue.length/2),Et=0;Et<ue.length/2;Et++)Ue[Et]={x:le.x+be+Le*ue[Et*2],y:le.y+Ve+de*ue[Et*2+1]};var Jt,Bt,Vt,Mt,Wt=Ue.length;for(Bt=Ue[Wt-1],Jt=0;Jt<Wt;Jt++)Vt=Ue[Jt%Wt],Mt=Ue[(Jt+1)%Wt],Ot[Jt]=jf(Bt,Vt,Mt,qe),Bt=Vt,Vt=Mt;s.drawRoundPolygonPath(re||r,le.x+be,le.y+Ve,o*G,u*Z,ue,Ot)}else if(["roundrectangle","round-rectangle"].includes(J))K=K==="auto"?Qn(Q,ee):K,s.drawRoundRectanglePath(re||r,le.x,le.y,Q,ee,K+(C+$+L)/2);else if(["cutrectangle","cut-rectangle"].includes(J))K=K==="auto"?Nf():K,s.drawCutRectanglePath(re||r,le.x,le.y,Q,ee,null,K+(C+$+L)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(J))K=K==="auto"?Qn(Q,ee):K,s.drawBottomRoundRectanglePath(re||r,le.x,le.y,Q,ee,K+(C+$+L)/2);else if(J==="barrel")s.drawBarrelPath(re||r,le.x,le.y,Q,ee);else if(J.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(J)){var Rn=(C+$+L)/o;ue=Zo(Qo(ue,Rn)),s.drawPolygonPath(re||r,le.x,le.y,o,u,ue)}else{var It=(C+$+L)/o;ue=Zo(Qo(ue,-It)),s.drawPolygonPath(re||r,le.x,le.y,o,u,ue)}if(h?r.stroke(re):r.stroke(),te==="double"){r.lineWidth=C/3;var fn=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",h?r.stroke(re):r.stroke(),r.globalCompositeOperation=fn}r.setLineDash&&r.setLineDash([])}},pe=function(){a&&s.drawNodeOverlay(r,e,f,o,u)},Ee=function(){a&&s.drawNodeUnderlay(r,e,f,o,u)},ye=function(){s.drawElementText(r,e,null,n)},Ne=e.pstyle("ghost").value==="yes";if(Ne){var He=e.pstyle("ghost-offset-x").pfValue,Qe=e.pstyle("ghost-offset-y").pfValue,Je=e.pstyle("ghost-opacity").value,et=Je*d;r.translate(He,Qe),N(),ve(),ne(Je*A),he(),Ge(et,!0),Y(Je*z),se(),Ce(_!==0||D!==0),Se(_!==0||D!==0),Ge(et,!1),me(et),r.translate(-He,-Qe)}h&&r.translate(-f.x,-f.y),Ee(),h&&r.translate(f.x,f.y),N(),ve(),ne(),he(),Ge(d,!0),Y(),se(),Ce(_!==0||D!==0),Se(_!==0||D!==0),Ge(d,!1),me(),h&&r.translate(-f.x,-f.y),ye(),pe(),t&&r.translate(g.x1,g.y1)}};var Tm=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,a,i,s){var o=this;if(n.visible()){var u=n.pstyle("".concat(e,"-padding")).pfValue,l=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,f=n.pstyle("".concat(e,"-shape")).value,d=n.pstyle("".concat(e,"-corner-radius")).value;if(l>0){if(a=a||n.position(),i==null||s==null){var h=n.padding();i=n.width()+2*h,s=n.height()+2*h}o.colorFillStyle(t,c[0],c[1],c[2],l),o.nodeShapes[f].draw(t,a.x,a.y,i+u*2,s+u*2,d),t.fill()}}}};ua.drawNodeOverlay=Tm("overlay");ua.drawNodeUnderlay=Tm("underlay");ua.hasPie=function(r){return r=r[0],r._private.hasPie};ua.hasStripe=function(r){return r=r[0],r._private.hasStripe};ua.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),s=e.pstyle("pie-hole"),o=e.pstyle("pie-start-angle").pfValue,u=n.x,l=n.y,c=e.width(),f=e.height(),d=Math.min(c,f)/2,h,v=0,y=this.usePaths();if(y&&(u=0,l=0),i.units==="%"?d=d*i.pfValue:i.pfValue!==void 0&&(d=i.pfValue/2),s.units==="%"?h=d*s.pfValue:s.pfValue!==void 0&&(h=s.pfValue/2),!(h>=d))for(var p=1;p<=a.pieBackgroundN;p++){var g=e.pstyle("pie-"+p+"-background-size").value,m=e.pstyle("pie-"+p+"-background-color").value,b=e.pstyle("pie-"+p+"-background-opacity").value*t,w=g/100;w+v>1&&(w=1-v);var S=1.5*Math.PI+2*Math.PI*v;S+=o;var E=2*Math.PI*w,x=S+E;g===0||v>=1||v+w>1||(h===0?(r.beginPath(),r.moveTo(u,l),r.arc(u,l,d,S,x),r.closePath()):(r.beginPath(),r.arc(u,l,d,S,x),r.arc(u,l,h,x,S,!0),r.closePath()),this.colorFillStyle(r,m[0],m[1],m[2],b),r.fill(),v+=w)}};ua.drawStripe=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=n.x,s=n.y,o=e.width(),u=e.height(),l=0,c=this.usePaths();r.save();var f=e.pstyle("stripe-direction").value,d=e.pstyle("stripe-size");switch(f){case"vertical":break;case"righward":r.rotate(-Math.PI/2);break}var h=o,v=u;d.units==="%"?(h=h*d.pfValue,v=v*d.pfValue):d.pfValue!==void 0&&(h=d.pfValue,v=d.pfValue),c&&(i=0,s=0),s-=h/2,i-=v/2;for(var y=1;y<=a.stripeBackgroundN;y++){var p=e.pstyle("stripe-"+y+"-background-size").value,g=e.pstyle("stripe-"+y+"-background-color").value,m=e.pstyle("stripe-"+y+"-background-opacity").value*t,b=p/100;b+l>1&&(b=1-l),!(p===0||l>=1||l+b>1)&&(r.beginPath(),r.rect(i,s+v*l,h,v*b),r.closePath(),this.colorFillStyle(r,g[0],g[1],g[2],m),r.fill(),l+=b)}r.restore()};var ir={},k2=100;ir.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),t=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/t};ir.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};ir.createGradientStyleFor=function(r,e,t,n,a){var i,s=this.usePaths(),o=t.pstyle(e+"-gradient-stop-colors").value,u=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var l=t.sourceEndpoint(),c=t.targetEndpoint(),f=t.midpoint(),d=Da(l,f),h=Da(c,f);i=r.createRadialGradient(f.x,f.y,0,f.x,f.y,Math.max(d,h))}else{var v=s?{x:0,y:0}:t.position(),y=t.paddedWidth(),p=t.paddedHeight();i=r.createRadialGradient(v.x,v.y,0,v.x,v.y,Math.max(y,p))}else if(t.isEdge()){var g=t.sourceEndpoint(),m=t.targetEndpoint();i=r.createLinearGradient(g.x,g.y,m.x,m.y)}else{var b=s?{x:0,y:0}:t.position(),w=t.paddedWidth(),S=t.paddedHeight(),E=w/2,x=S/2,T=t.pstyle("background-gradient-direction").value;switch(T){case"to-bottom":i=r.createLinearGradient(b.x,b.y-x,b.x,b.y+x);break;case"to-top":i=r.createLinearGradient(b.x,b.y+x,b.x,b.y-x);break;case"to-left":i=r.createLinearGradient(b.x+E,b.y,b.x-E,b.y);break;case"to-right":i=r.createLinearGradient(b.x-E,b.y,b.x+E,b.y);break;case"to-bottom-right":case"to-right-bottom":i=r.createLinearGradient(b.x-E,b.y-x,b.x+E,b.y+x);break;case"to-top-right":case"to-right-top":i=r.createLinearGradient(b.x-E,b.y+x,b.x+E,b.y-x);break;case"to-bottom-left":case"to-left-bottom":i=r.createLinearGradient(b.x+E,b.y-x,b.x-E,b.y+x);break;case"to-top-left":case"to-left-top":i=r.createLinearGradient(b.x+E,b.y+x,b.x-E,b.y-x);break}}if(!i)return null;for(var B=u.length===o.length,I=o.length,_=0;_<I;_++)i.addColorStop(B?u[_]:_/(I-1),"rgba("+o[_][0]+","+o[_][1]+","+o[_][2]+","+a+")");return i};ir.gradientFillStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"background",e,t,n);if(!a)return null;r.fillStyle=a};ir.colorFillStyle=function(r,e,t,n,a){r.fillStyle="rgba("+e+","+t+","+n+","+a+")"};ir.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var a=e.pstyle("background-color").value;this.colorFillStyle(r,a[0],a[1],a[2],t)}};ir.gradientStrokeStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"line",e,t,n);if(!a)return null;r.strokeStyle=a};ir.colorStrokeStyle=function(r,e,t,n,a){r.strokeStyle="rgba("+e+","+t+","+n+","+a+")"};ir.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(r,a[0],a[1],a[2],t)}};ir.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],s=e.getPixelRatio(),o=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(s=o);var u=a*s,l=i*s,c;if(!(u===e.canvasWidth&&l===e.canvasHeight)){e.fontCaches=null;var f=t.canvasContainer;f.style.width=a+"px",f.style.height=i+"px";for(var d=0;d<e.CANVAS_LAYERS;d++)c=t.canvases[d],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";for(var d=0;d<e.BUFFER_COUNT;d++)c=t.bufferCanvases[d],c.width=u,c.height=l,c.style.width=a+"px",c.style.height=i+"px";e.textureMult=1,s<=1&&(c=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=u*e.textureMult,c.height=l*e.textureMult),e.canvasWidth=u,e.canvasHeight=l,e.pixelRatio=s}};ir.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};ir.clearCanvas=function(){var r=this,e=r.data;function t(n){n.clearRect(0,0,r.canvasWidth,r.canvasHeight)}t(e.contexts[r.NODE]),t(e.contexts[r.DRAG])};ir.render=function(r){var e=this;r=r||dy();var t=e.cy,n=r.forcedContext,a=r.drawAllLayers,i=r.drawOnlyNodeLayer,s=r.forcedZoom,o=r.forcedPan,u=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=e.data,c=l.canvasNeedsRedraw,f=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),d=r.motionBlur!==void 0?r.motionBlur:e.motionBlur,h=e.motionBlurPxRatio,v=t.hasCompoundNodes(),y=e.hoverData.draggingEles,p=!!(e.hoverData.selecting||e.touchData.selecting);d=d&&!n&&e.motionBlurEnabled&&!p;var g=d;n||(e.prevPxRatio!==u&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=u),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),d&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(g=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!f&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var m=t.style(),b=t.zoom(),w=s!==void 0?s:b,S=t.pan(),E={x:S.x,y:S.y},x={zoom:b,pan:{x:S.x,y:S.y}},T=e.prevViewport,B=T===void 0||x.zoom!==T.zoom||x.pan.x!==T.pan.x||x.pan.y!==T.pan.y;!B&&!(y&&!v)&&(e.motionBlurPxRatio=1),o&&(E=o),w*=u,E.x*=u,E.y*=u;var I=e.getCachedZSortedEles();function _(Y,N,V,U,j){var ae=Y.globalCompositeOperation;Y.globalCompositeOperation="destination-out",e.colorFillStyle(Y,255,255,255,e.motionBlurTransparency),Y.fillRect(N,V,U,j),Y.globalCompositeOperation=ae}function D(Y,N){var V,U,j,ae;!e.clearingMotionBlur&&(Y===l.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||Y===l.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(V={x:S.x*h,y:S.y*h},U=b*h,j=e.canvasWidth*h,ae=e.canvasHeight*h):(V=E,U=w,j=e.canvasWidth,ae=e.canvasHeight),Y.setTransform(1,0,0,1,0,0),N==="motionBlur"?_(Y,0,0,j,ae):!n&&(N===void 0||N)&&Y.clearRect(0,0,j,ae),a||(Y.translate(V.x,V.y),Y.scale(U,U)),o&&Y.translate(o.x,o.y),s&&Y.scale(s,s)}if(f||(e.textureDrawLastFrame=!1),f){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=t.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var A=e.data.bufferContexts[e.TEXTURE_BUFFER];A.setTransform(1,0,0,1,0,0),A.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:A,drawOnlyNodeLayer:!0,forcedPxRatio:u*e.textureMult});var x=e.textureCache.viewport={zoom:t.zoom(),pan:t.pan(),width:e.canvasWidth,height:e.canvasHeight};x.mpan={x:(0-x.pan.x)/x.zoom,y:(0-x.pan.y)/x.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var O=l.contexts[e.NODE],k=e.textureCache.texture,x=e.textureCache.viewport;O.setTransform(1,0,0,1,0,0),d?_(O,0,0,x.width,x.height):O.clearRect(0,0,x.width,x.height);var P=m.core("outside-texture-bg-color").value,M=m.core("outside-texture-bg-opacity").value;e.colorFillStyle(O,P[0],P[1],P[2],M),O.fillRect(0,0,x.width,x.height);var b=t.zoom();D(O,!1),O.clearRect(x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u),O.drawImage(k,x.mpan.x,x.mpan.y,x.width/x.zoom/u,x.height/x.zoom/u)}else e.textureOnViewport&&!n&&(e.textureCache=null);var F=t.extent(),W=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),H=e.hideEdgesOnViewport&&W,z=[];if(z[e.NODE]=!c[e.NODE]&&d&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,z[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),z[e.DRAG]=!c[e.DRAG]&&d&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,z[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||a||i||z[e.NODE]){var $=d&&!z[e.NODE]&&h!==1,O=n||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:l.contexts[e.NODE]),X=d&&!$?"motionBlur":void 0;D(O,X),H?e.drawCachedNodes(O,I.nondrag,u,F):e.drawLayeredElements(O,I.nondrag,u,F),e.debug&&e.drawDebugPoints(O,I.nondrag),!a&&!d&&(c[e.NODE]=!1)}if(!i&&(c[e.DRAG]||a||z[e.DRAG])){var $=d&&!z[e.DRAG]&&h!==1,O=n||($?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:l.contexts[e.DRAG]);D(O,d&&!$?"motionBlur":void 0),H?e.drawCachedNodes(O,I.drag,u,F):e.drawCachedElements(O,I.drag,u,F),e.debug&&e.drawDebugPoints(O,I.drag),!a&&!d&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(r,D),d&&h!==1){var te=l.contexts[e.NODE],R=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],L=l.contexts[e.DRAG],K=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],ne=function(N,V,U){N.setTransform(1,0,0,1,0,0),U||!g?N.clearRect(0,0,e.canvasWidth,e.canvasHeight):_(N,0,0,e.canvasWidth,e.canvasHeight);var j=h;N.drawImage(V,0,0,e.canvasWidth*j,e.canvasHeight*j,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||z[e.NODE])&&(ne(te,R,z[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||z[e.DRAG])&&(ne(L,K,z[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=x,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),d&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!f,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},k2)),n||t.emit("render")};var Ni;ir.drawSelectionRectangle=function(r,e){var t=this,n=t.cy,a=t.data,i=n.style(),s=r.drawOnlyNodeLayer,o=r.drawAllLayers,u=a.canvasNeedsRedraw,l=r.forcedContext;if(t.showFps||!s&&u[t.SELECT_BOX]&&!o){var c=l||a.contexts[t.SELECT_BOX];if(e(c),t.selection[4]==1&&(t.hoverData.selecting||t.touchData.selecting)){var f=t.cy.zoom(),d=i.core("selection-box-border-width").value/f;c.lineWidth=d,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]),d>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(t.selection[0],t.selection[1],t.selection[2]-t.selection[0],t.selection[3]-t.selection[1]))}if(a.bgActivePosistion&&!t.hoverData.selecting){var f=t.cy.zoom(),h=a.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(h.x,h.y,i.core("active-bg-size").pfValue/f,0,2*Math.PI),c.fill()}var v=t.lastRedrawTime;if(t.showFps&&v){v=Math.round(v);var y=Math.round(1e3/v),p="1 frame = "+v+" ms = "+y+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!Ni){var g=c.measureText(p);Ni=g.actualBoundingBoxAscent}c.fillText(p,0,Ni);var m=60;c.strokeRect(0,Ni+10,250,20),c.fillRect(0,Ni+10,250*Math.min(y/m,1),20)}o||(u[t.SELECT_BOX]=!1)}};function Xv(r,e,t){var n=r.createShader(e);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw new Error(r.getShaderInfoLog(n));return n}function P2(r,e,t){var n=Xv(r,r.VERTEX_SHADER,e),a=Xv(r,r.FRAGMENT_SHADER,t),i=r.createProgram();if(r.attachShader(i,n),r.attachShader(i,a),r.linkProgram(i),!r.getProgramParameter(i,r.LINK_STATUS))throw new Error("Could not initialize shaders");return i}function L2(r,e,t){t===void 0&&(t=e);var n=r.makeOffscreenCanvas(e,t),a=n.context=n.getContext("2d");return n.clear=function(){return a.clearRect(0,0,n.width,n.height)},n.clear(),n}function Qf(r){var e=r.pixelRatio,t=r.cy.zoom(),n=r.cy.pan();return{zoom:t*e,pan:{x:n.x*e,y:n.y*e}}}function F2(r){var e=r.pixelRatio,t=r.cy.zoom();return t*e}function N2(r,e,t,n,a){var i=n*t+e.x,s=a*t+e.y;return s=Math.round(r.canvasHeight-s),[i,s]}function z2(r){return r.pstyle("background-fill").value!=="solid"||r.pstyle("background-image").strValue!=="none"?!1:r.pstyle("border-width").value===0||r.pstyle("border-opacity").value===0?!0:r.pstyle("border-style").value==="solid"}function V2(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function ha(r,e,t){var n=r[0]/255,a=r[1]/255,i=r[2]/255,s=e,o=t||new Array(4);return o[0]=n*s,o[1]=a*s,o[2]=i*s,o[3]=s,o}function Wa(r,e){var t=e||new Array(4);return t[0]=(r>>0&255)/255,t[1]=(r>>8&255)/255,t[2]=(r>>16&255)/255,t[3]=(r>>24&255)/255,t}function U2(r){return r[0]+(r[1]<<8)+(r[2]<<16)+(r[3]<<24)}function q2(r,e){var t=r.createTexture();return t.buffer=function(n){r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.generateMipmap(r.TEXTURE_2D),r.bindTexture(r.TEXTURE_2D,null)},t.deleteTexture=function(){r.deleteTexture(t)},t}function Cm(r,e){switch(e){case"float":return[1,r.FLOAT,4];case"vec2":return[2,r.FLOAT,4];case"vec3":return[3,r.FLOAT,4];case"vec4":return[4,r.FLOAT,4];case"int":return[1,r.INT,4];case"ivec2":return[2,r.INT,4]}}function Bm(r,e,t){switch(e){case r.FLOAT:return new Float32Array(t);case r.INT:return new Int32Array(t)}}function $2(r,e,t,n,a,i){switch(e){case r.FLOAT:return new Float32Array(t.buffer,i*n,a);case r.INT:return new Int32Array(t.buffer,i*n,a)}}function W2(r,e,t,n){var a=Cm(r,e),i=Dt(a,2),s=i[0],o=i[1],u=Bm(r,o,n),l=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,l),r.bufferData(r.ARRAY_BUFFER,u,r.STATIC_DRAW),o===r.FLOAT?r.vertexAttribPointer(t,s,o,!1,0,0):o===r.INT&&r.vertexAttribIPointer(t,s,o,0,0),r.enableVertexAttribArray(t),r.bindBuffer(r.ARRAY_BUFFER,null),l}function Wr(r,e,t,n){var a=Cm(r,t),i=Dt(a,3),s=i[0],o=i[1],u=i[2],l=Bm(r,o,e*s),c=s*u,f=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,f),r.bufferData(r.ARRAY_BUFFER,e*c,r.DYNAMIC_DRAW),r.enableVertexAttribArray(n),o===r.FLOAT?r.vertexAttribPointer(n,s,o,!1,c,0):o===r.INT&&r.vertexAttribIPointer(n,s,o,c,0),r.vertexAttribDivisor(n,1),r.bindBuffer(r.ARRAY_BUFFER,null);for(var d=new Array(e),h=0;h<e;h++)d[h]=$2(r,o,l,c,s,h);return f.dataArray=l,f.stride=c,f.size=s,f.getView=function(v){return d[v]},f.setPoint=function(v,y,p){var g=d[v];g[0]=y,g[1]=p},f.bufferSubData=function(v){r.bindBuffer(r.ARRAY_BUFFER,f),v?r.bufferSubData(r.ARRAY_BUFFER,0,l,0,v*s):r.bufferSubData(r.ARRAY_BUFFER,0,l)},f}function G2(r,e,t){for(var n=9,a=new Float32Array(e*n),i=new Array(e),s=0;s<e;s++){var o=s*n*4;i[s]=new Float32Array(a.buffer,o,n)}var u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferData(r.ARRAY_BUFFER,a.byteLength,r.DYNAMIC_DRAW);for(var l=0;l<3;l++){var c=t+l;r.enableVertexAttribArray(c),r.vertexAttribPointer(c,3,r.FLOAT,!1,36,l*12),r.vertexAttribDivisor(c,1)}return r.bindBuffer(r.ARRAY_BUFFER,null),u.getMatrixView=function(f){return i[f]},u.setData=function(f,d){i[d].set(f,0)},u.bufferSubData=function(){r.bindBuffer(r.ARRAY_BUFFER,u),r.bufferSubData(r.ARRAY_BUFFER,0,a)},u}function H2(r){var e=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,e);var t=r.createTexture();return r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.bindFramebuffer(r.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,a){r.bindTexture(r.TEXTURE_2D,t),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n,a,0,r.RGBA,r.UNSIGNED_BYTE,null)},e}var Zv=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});function dc(){var r=new Zv(9);return Zv!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function Qv(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Y2(r,e,t){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=t[0],h=t[1],v=t[2],y=t[3],p=t[4],g=t[5],m=t[6],b=t[7],w=t[8];return r[0]=d*n+h*s+v*l,r[1]=d*a+h*o+v*c,r[2]=d*i+h*u+v*f,r[3]=y*n+p*s+g*l,r[4]=y*a+p*o+g*c,r[5]=y*i+p*u+g*f,r[6]=m*n+b*s+w*l,r[7]=m*a+b*o+w*c,r[8]=m*i+b*u+w*f,r}function go(r,e,t){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=t[0],h=t[1];return r[0]=n,r[1]=a,r[2]=i,r[3]=s,r[4]=o,r[5]=u,r[6]=d*n+h*s+l,r[7]=d*a+h*o+c,r[8]=d*i+h*u+f,r}function Jv(r,e,t){var n=e[0],a=e[1],i=e[2],s=e[3],o=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=Math.sin(t),h=Math.cos(t);return r[0]=h*n+d*s,r[1]=h*a+d*o,r[2]=h*i+d*u,r[3]=h*s-d*n,r[4]=h*o-d*a,r[5]=h*u-d*i,r[6]=l,r[7]=c,r[8]=f,r}function Kc(r,e,t){var n=t[0],a=t[1];return r[0]=n*e[0],r[1]=n*e[1],r[2]=n*e[2],r[3]=a*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function K2(r,e,t){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/t,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}var j2=function(){function r(e,t,n,a){ia(this,r),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=t,this.texRows=n,this.texHeight=Math.floor(t/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=a(e,t,t),this.scratch=a(e,t,this.texHeight,"scratch")}return sa(r,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(t){var n=t.w,a=t.h,i=this.texHeight,s=this.texSize,o=i/a,u=n*o,l=a*o;return u>s&&(o=s/n,u=n*o,l=a*o),{scale:o,texW:u,texH:l}}},{key:"draw",value:function(t,n,a){var i=this;if(this.locked)throw new Error("can't draw, atlas is locked");var s=this.texSize,o=this.texRows,u=this.texHeight,l=this.getScale(n),c=l.scale,f=l.texW,d=l.texH,h=function(b,w){if(a&&w){var S=w.context,E=b.x,x=b.row,T=E,B=u*x;S.save(),S.translate(T,B),S.scale(c,c),a(S,n),S.restore()}},v=[null,null],y=function(){h(i.freePointer,i.canvas),v[0]={x:i.freePointer.x,y:i.freePointer.row*u,w:f,h:d},v[1]={x:i.freePointer.x+f,y:i.freePointer.row*u,w:0,h:d},i.freePointer.x+=f,i.freePointer.x==s&&(i.freePointer.x=0,i.freePointer.row++)},p=function(){var b=i.scratch,w=i.canvas;b.clear(),h({x:0,row:0},b);var S=s-i.freePointer.x,E=f-S,x=u;{var T=i.freePointer.x,B=i.freePointer.row*u,I=S;w.context.drawImage(b,0,0,I,x,T,B,I,x),v[0]={x:T,y:B,w:I,h:d}}{var _=S,D=(i.freePointer.row+1)*u,A=E;w&&w.context.drawImage(b,_,0,A,x,0,D,A,x),v[1]={x:0,y:D,w:A,h:d}}i.freePointer.x=E,i.freePointer.row++},g=function(){i.freePointer.x=0,i.freePointer.row++};if(this.freePointer.x+f<=s)y();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===s?(g(),y()):this.enableWrapping?p():(g(),y())}return this.keyToLocation.set(t,v),this.needsBuffer=!0,v}},{key:"getOffsets",value:function(t){return this.keyToLocation.get(t)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(t){if(this.locked)return!1;var n=this.texSize,a=this.texRows,i=this.getScale(t),s=i.texW;return this.freePointer.x+s>n?this.freePointer.row<a-1:!0}},{key:"bufferIfNeeded",value:function(t){this.texture||(this.texture=q2(t,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])}(),X2=function(){function r(e,t,n,a){ia(this,r),this.r=e,this.texSize=t,this.texRows=n,this.createTextureCanvas=a,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return sa(r,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var t=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas;return new j2(t,n,a,i)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var t=this.r,n=this.texSize,a=this.texRows,i=this.createTextureCanvas,s=Math.floor(n/a);this.scratch=i(t,n,s,"scratch")}return this.scratch}},{key:"draw",value:function(t,n,a){var i=this.styleKeyToAtlas.get(t);return i||(i=this.atlases[this.atlases.length-1],(!i||!i.canFit(n))&&(i&&i.lock(),i=this._createAtlas(),this.atlases.push(i)),i.draw(t,n,a),this.styleKeyToAtlas.set(t,i)),i}},{key:"getAtlas",value:function(t){return this.styleKeyToAtlas.get(t)}},{key:"hasAtlas",value:function(t){return this.styleKeyToAtlas.has(t)}},{key:"markKeyForGC",value:function(t){this.markedKeys.add(t)}},{key:"gc",value:function(){var t=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var a=[],i=new Map,s=null,o=vr(this.atlases),u;try{var l=function(){var f=u.value,d=f.getKeys(),h=Z2(n,d);if(h.size===0)return a.push(f),d.forEach(function(S){return i.set(S,f)}),1;s||(s=t._createAtlas(),a.push(s));var v=vr(d),y;try{for(v.s();!(y=v.n()).done;){var p=y.value;if(!h.has(p)){var g=f.getOffsets(p),m=Dt(g,2),b=m[0],w=m[1];s.canFit({w:b.w+w.w,h:b.h})||(s.lock(),s=t._createAtlas(),a.push(s)),f.canvas&&(t._copyTextureToNewAtlas(p,f,s),i.set(p,s))}}}catch(S){v.e(S)}finally{v.f()}f.dispose()};for(o.s();!(u=o.n()).done;)l()}catch(c){o.e(c)}finally{o.f()}this.atlases=a,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(t,n,a){var i=n.getOffsets(t),s=Dt(i,2),o=s[0],u=s[1];if(u.w===0)a.draw(t,o,function(d){d.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var l=this._getScratchCanvas();l.clear(),l.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l.context.drawImage(n.canvas,u.x,u.y,u.w,u.h,o.w,0,u.w,u.h);var c=o.w+u.w,f=o.h;a.draw(t,{w:c,h:f},function(d){d.drawImage(l,0,0,c,f,0,0,c,f)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])}();function Z2(r,e){return r.intersection?r.intersection(e):new Set(Yo(r).filter(function(t){return e.has(t)}))}var Q2=function(){function r(e,t){ia(this,r),this.r=e,this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return sa(r,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(t,n){var a=this.globalOptions,i=a.webglTexSize,s=a.createTextureCanvas,o=n.texRows,u=this._cacheScratchCanvas(s),l=new X2(this.r,i,o,u);this.collections.set(t,l)}},{key:"addRenderType",value:function(t,n){var a=n.collection;if(!this.collections.has(a))throw new Error("invalid atlas collection name '".concat(a,"'"));var i=this.collections.get(a),s=we({type:t,atlasCollection:i},n);this.renderTypes.set(t,s)}},{key:"getRenderTypeOpts",value:function(t){return this.renderTypes.get(t)}},{key:"getAtlasCollection",value:function(t){return this.collections.get(t)}},{key:"_cacheScratchCanvas",value:function(t){var n=-1,a=-1,i=null;return function(s,o,u,l){return l?((!i||o!=n||u!=a)&&(n=o,a=u,i=t(s,o,u)),i):t(s,o,u)}}},{key:"_key",value:function(t,n){return"".concat(t,"-").concat(n)}},{key:"invalidate",value:function(t){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=a.forceRedraw,s=i===void 0?!1:i,o=a.filterEle,u=o===void 0?function(){return!0}:o,l=a.filterType,c=l===void 0?function(){return!0}:l,f=!1,d=!1,h=vr(t),v;try{for(h.s();!(v=h.n()).done;){var y=v.value;if(u(y)){var p=vr(this.renderTypes.values()),g;try{var m=function(){var w=g.value,S=w.type;if(c(S)){var E=n.collections.get(w.collection),x=w.getKey(y),T=Array.isArray(x)?x:[x];if(s)T.forEach(function(D){return E.markKeyForGC(D)}),d=!0;else{var B=w.getID?w.getID(y):y.id(),I=n._key(S,B),_=n.typeAndIdToKey.get(I);_!==void 0&&!V2(T,_)&&(f=!0,n.typeAndIdToKey.delete(I),_.forEach(function(D){return E.markKeyForGC(D)}))}}};for(p.s();!(g=p.n()).done;)m()}catch(b){p.e(b)}finally{p.f()}}}}catch(b){h.e(b)}finally{h.f()}return d&&(this.gc(),f=!1),f}},{key:"gc",value:function(){var t=vr(this.collections.values()),n;try{for(t.s();!(n=t.n()).done;){var a=n.value;a.gc()}}catch(i){t.e(i)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(t,n,a,i){var s=this.renderTypes.get(n),o=this.collections.get(s.collection),u=!1,l=o.draw(i,a,function(d){s.drawClipped?(d.save(),d.beginPath(),d.rect(0,0,a.w,a.h),d.clip(),s.drawElement(d,t,a,!0,!0),d.restore()):s.drawElement(d,t,a,!0,!0),u=!0});if(u){var c=s.getID?s.getID(t):t.id(),f=this._key(n,c);this.typeAndIdToKey.has(f)?this.typeAndIdToKey.get(f).push(i):this.typeAndIdToKey.set(f,[i])}return l}},{key:"getAtlasInfo",value:function(t,n){var a=this,i=this.renderTypes.get(n),s=i.getKey(t),o=Array.isArray(s)?s:[s];return o.map(function(u){var l=i.getBoundingBox(t,u),c=a.getOrCreateAtlas(t,n,l,u),f=c.getOffsets(u),d=Dt(f,2),h=d[0],v=d[1];return{atlas:c,tex:h,tex1:h,tex2:v,bb:l}})}},{key:"getDebugInfo",value:function(){var t=[],n=vr(this.collections),a;try{for(n.s();!(a=n.n()).done;){var i=Dt(a.value,2),s=i[0],o=i[1],u=o.getCounts(),l=u.keyCount,c=u.atlasCount;t.push({type:s,keyCount:l,atlasCount:c})}}catch(f){n.e(f)}finally{n.f()}return t}}])}(),J2=function(){function r(e){ia(this,r),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return sa(r,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(t,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(t){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(t):!0}},{key:"getAtlasIndexForBatch",value:function(t){var n=this.batchAtlases.indexOf(t);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(t),n=this.batchAtlases.length-1}return n}}])}(),eC=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,tC=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,rC=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,nC=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Zi={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},iu={IGNORE:1,USE_BB:2},hc=0,ep=1,tp=2,vc=3,Ga=4,Zs=5,zi=6,Vi=7,aC=function(){function r(e,t,n){ia(this,r),this.r=e,this.gl=t,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=L2,this.atlasManager=new Q2(e,n),this.batchManager=new J2(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Zi.SCREEN),this.pickingProgram=this._createShaderProgram(Zi.PICKING),this.vao=this._createVAO()}return sa(r,[{key:"addAtlasCollection",value:function(t,n){this.atlasManager.addAtlasCollection(t,n)}},{key:"addTextureAtlasRenderType",value:function(t,n){this.atlasManager.addRenderType(t,n)}},{key:"addSimpleShapeRenderType",value:function(t,n){this.simpleShapeOptions.set(t,n)}},{key:"invalidate",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.type,i=this.atlasManager;return a?i.invalidate(t,{filterType:function(o){return o===a},forceRedraw:!0}):i.invalidate(t)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(t){var n=this.gl,a=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(hc,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Ga," || aVertType == ").concat(Vi,` 
             || aVertType == `).concat(Zs," || aVertType == ").concat(zi,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(ep,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(tp,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(vc,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),i=this.batchManager.getIndexArray(),s=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(i.map(function(l){return"uniform sampler2D uTexture".concat(l,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(eC,`
      `).concat(tC,`
      `).concat(rC,`
      `).concat(nC,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(hc,`) {
          // look up the texel from the texture unit
          `).concat(i.map(function(l){return"if(vAtlasId == ".concat(l,") outColor = texture(uTexture").concat(l,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(vc,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Ga,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Ga," || vVertType == ").concat(Vi,` 
          || vVertType == `).concat(Zs," || vVertType == ").concat(zi,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Ga,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(Vi,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(Vi,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(t.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=P2(n,a,s);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var u=0;u<this.batchManager.getMaxAtlasesPerBatch();u++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(u)));return o}},{key:"_createVAO",value:function(){var t=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=t.length/2;var n=this.maxInstances,a=this.gl,i=this.program,s=a.createVertexArray();return a.bindVertexArray(s),W2(a,"vec2",i.aPosition,t),this.transformBuffer=G2(a,n,i.aTransform),this.indexBuffer=Wr(a,n,"vec4",i.aIndex),this.vertTypeBuffer=Wr(a,n,"int",i.aVertType),this.atlasIdBuffer=Wr(a,n,"int",i.aAtlasId),this.texBuffer=Wr(a,n,"vec4",i.aTex),this.pointAPointBBuffer=Wr(a,n,"vec4",i.aPointAPointB),this.pointCPointDBuffer=Wr(a,n,"vec4",i.aPointCPointD),this.lineWidthBuffer=Wr(a,n,"vec2",i.aLineWidth),this.colorBuffer=Wr(a,n,"vec4",i.aColor),this.cornerRadiusBuffer=Wr(a,n,"vec4",i.aCornerRadius),this.borderColorBuffer=Wr(a,n,"vec4",i.aBorderColor),a.bindVertexArray(null),s}},{key:"buffers",get:function(){var t=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return Nn(n,"Buffer")}).map(function(n){return t[n]})),this._buffers}},{key:"startFrame",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zi.SCREEN;this.panZoomMatrix=t,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(t,n){return t.visible()?n&&n.isVisible?n.isVisible(t):!0:!1}},{key:"drawTexture",value:function(t,n,a){var i=this.atlasManager,s=this.batchManager,o=i.getRenderTypeOpts(a);if(this._isVisible(t,o)){if(this.renderTarget.picking&&o.getTexPickingMode){var u=o.getTexPickingMode(t);if(u===iu.IGNORE)return;if(u==iu.USE_BB){this.drawPickingRectangle(t,n,a);return}}var l=i.getAtlasInfo(t,a),c=vr(l),f;try{for(c.s();!(f=c.n()).done;){var d=f.value,h=d.atlas,v=d.tex1,y=d.tex2;s.canAddToCurrentBatch(h)||this.endBatch();for(var p=s.getAtlasIndexForBatch(h),g=0,m=[[v,!0],[y,!1]];g<m.length;g++){var b=Dt(m[g],2),w=b[0],S=b[1];if(w.w!=0){var E=this.instanceCount;this.vertTypeBuffer.getView(E)[0]=hc;var x=this.indexBuffer.getView(E);Wa(n,x);var T=this.atlasIdBuffer.getView(E);T[0]=p;var B=this.texBuffer.getView(E);B[0]=w.x,B[1]=w.y,B[2]=w.w,B[3]=w.h;var I=this.transformBuffer.getMatrixView(E);this.setTransformMatrix(t,I,o,d,S),this.instanceCount++,S||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(_){c.e(_)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(t,n,a,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(a.shapeProps&&a.shapeProps.padding&&(o=t.pstyle(a.shapeProps.padding).pfValue),i){var u=i.bb,l=i.tex1,c=i.tex2,f=l.w/(l.w+c.w);s||(f=1-f);var d=this._getAdjustedBB(u,o,s,f);this._applyTransformMatrix(n,d,a,t)}else{var h=a.getBoundingBox(t),v=this._getAdjustedBB(h,o,!0,1);this._applyTransformMatrix(n,v,a,t)}}},{key:"_applyTransformMatrix",value:function(t,n,a,i){var s,o;Qv(t);var u=a.getRotation?a.getRotation(i):0;if(u!==0){var l=a.getRotationPoint(i),c=l.x,f=l.y;go(t,t,[c,f]),Jv(t,t,u);var d=a.getRotationOffset(i);s=d.x+(n.xOffset||0),o=d.y+(n.yOffset||0)}else s=n.x1,o=n.y1;go(t,t,[s,o]),Kc(t,t,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(t,n,a,i){var s=t.x1,o=t.y1,u=t.w,l=t.h,c=t.yOffset;n&&(s-=n,o-=n,u+=2*n,l+=2*n);var f=0,d=u*i;return a&&i<1?u=d:!a&&i<1&&(f=u-d,s+=f,u=d),{x1:s,y1:o,w:u,h:l,xOffset:f,yOffset:c}}},{key:"drawPickingRectangle",value:function(t,n,a){var i=this.atlasManager.getRenderTypeOpts(a),s=this.instanceCount;this.vertTypeBuffer.getView(s)[0]=Ga;var o=this.indexBuffer.getView(s);Wa(n,o);var u=this.colorBuffer.getView(s);ha([0,0,0],1,u);var l=this.transformBuffer.getMatrixView(s);this.setTransformMatrix(t,l,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(t,n,a){var i=this.simpleShapeOptions.get(a);if(this._isVisible(t,i)){var s=i.shapeProps,o=this._getVertTypeForShape(t,s.shape);if(o===void 0||i.isSimple&&!i.isSimple(t)){this.drawTexture(t,n,a);return}var u=this.instanceCount;if(this.vertTypeBuffer.getView(u)[0]=o,o===Zs||o===zi){var l=i.getBoundingBox(t),c=this._getCornerRadius(t,s.radius,l),f=this.cornerRadiusBuffer.getView(u);f[0]=c,f[1]=c,f[2]=c,f[3]=c,o===zi&&(f[0]=0,f[2]=0)}var d=this.indexBuffer.getView(u);Wa(n,d);var h=t.pstyle(s.color).value,v=t.pstyle(s.opacity).value,y=this.colorBuffer.getView(u);ha(h,v,y);var p=this.lineWidthBuffer.getView(u);if(p[0]=0,p[1]=0,s.border){var g=t.pstyle("border-width").value;if(g>0){var m=t.pstyle("border-color").value,b=t.pstyle("border-opacity").value,w=this.borderColorBuffer.getView(u);ha(m,b,w);var S=t.pstyle("border-position").value;if(S==="inside")p[0]=0,p[1]=-g;else if(S==="outside")p[0]=g,p[1]=0;else{var E=g/2;p[0]=E,p[1]=-E}}}var x=this.transformBuffer.getMatrixView(u);this.setTransformMatrix(t,x,i),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(t,n){var a=t.pstyle(n).value;switch(a){case"rectangle":return Ga;case"ellipse":return Vi;case"roundrectangle":case"round-rectangle":return Zs;case"bottom-round-rectangle":return zi;default:return}}},{key:"_getCornerRadius",value:function(t,n,a){var i=a.w,s=a.h;if(t.pstyle(n).value==="auto")return Qn(i,s);var o=t.pstyle(n).pfValue,u=i/2,l=s/2;return Math.min(o,l,u)}},{key:"drawEdgeArrow",value:function(t,n,a){if(t.visible()){var i=t._private.rscratch,s,o,u;if(a==="source"?(s=i.arrowStartX,o=i.arrowStartY,u=i.srcArrowAngle):(s=i.arrowEndX,o=i.arrowEndY,u=i.tgtArrowAngle),!(isNaN(s)||s==null||isNaN(o)||o==null||isNaN(u)||u==null)){var l=t.pstyle(a+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(a+"-arrow-color").value,f=t.pstyle("opacity").value,d=t.pstyle("line-opacity").value,h=f*d,v=t.pstyle("width").pfValue,y=t.pstyle("arrow-scale").value,p=this.r.getArrowWidth(v,y),g=this.instanceCount,m=this.transformBuffer.getMatrixView(g);Qv(m),go(m,m,[s,o]),Kc(m,m,[p,p]),Jv(m,m,u),this.vertTypeBuffer.getView(g)[0]=vc;var b=this.indexBuffer.getView(g);Wa(n,b);var w=this.colorBuffer.getView(g);ha(c,h,w),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(t,n){if(t.visible()){var a=this._getEdgePoints(t);if(a){var i=t.pstyle("opacity").value,s=t.pstyle("line-opacity").value,o=t.pstyle("width").pfValue,u=t.pstyle("line-color").value,l=i*s;if(a.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),a.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=ep;var f=this.indexBuffer.getView(c);Wa(n,f);var d=this.colorBuffer.getView(c);ha(u,l,d);var h=this.lineWidthBuffer.getView(c);h[0]=o;var v=this.pointAPointBBuffer.getView(c);v[0]=a[0],v[1]=a[1],v[2]=a[2],v[3]=a[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var y=0;y<a.length-2;y+=2){var p=this.instanceCount;this.vertTypeBuffer.getView(p)[0]=tp;var g=this.indexBuffer.getView(p);Wa(n,g);var m=this.colorBuffer.getView(p);ha(u,l,m);var b=this.lineWidthBuffer.getView(p);b[0]=o;var w=a[y-2],S=a[y-1],E=a[y],x=a[y+1],T=a[y+2],B=a[y+3],I=a[y+4],_=a[y+5];y==0&&(w=2*E-T+.001,S=2*x-B+.001),y==a.length-4&&(I=2*T-E+.001,_=2*B-x+.001);var D=this.pointAPointBBuffer.getView(p);D[0]=w,D[1]=S,D[2]=E,D[3]=x;var A=this.pointCPointDBuffer.getView(p);A[0]=T,A[1]=B,A[2]=I,A[3]=_,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_getEdgePoints",value:function(t){var n=t._private.rscratch;if(!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))){var a=n.allpts;if(a.length==4)return a;var i=this._getNumSegments(t);return this._getCurveSegmentPoints(a,i)}}},{key:"_getNumSegments",value:function(t){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(t,n){if(t.length==4)return t;for(var a=Array((n+1)*2),i=0;i<=n;i++)if(i==0)a[0]=t[0],a[1]=t[1];else if(i==n)a[i*2]=t[t.length-2],a[i*2+1]=t[t.length-1];else{var s=i/n;this._setCurvePoint(t,s,a,i*2)}return a}},{key:"_setCurvePoint",value:function(t,n,a,i){if(t.length<=2)a[i]=t[0],a[i+1]=t[1];else{for(var s=Array(t.length-2),o=0;o<s.length;o+=2){var u=(1-n)*t[o]+n*t[o+2],l=(1-n)*t[o+1]+n*t[o+3];s[o]=u,s[o+1]=l}return this._setCurvePoint(s,n,a,i)}}},{key:"endBatch",value:function(){var t=this.gl,n=this.vao,a=this.vertexCount,i=this.instanceCount;if(i!==0){var s=this.renderTarget.picking?this.pickingProgram:this.program;t.useProgram(s),t.bindVertexArray(n);var o=vr(this.buffers),u;try{for(o.s();!(u=o.n()).done;){var l=u.value;l.bufferSubData(i)}}catch(v){o.e(v)}finally{o.f()}for(var c=this.batchManager.getAtlases(),f=0;f<c.length;f++)c[f].bufferIfNeeded(t);for(var d=0;d<c.length;d++)t.activeTexture(t.TEXTURE0+d),t.bindTexture(t.TEXTURE_2D,c[d].texture),t.uniform1i(s.uTextures[d],d);t.uniform1f(s.uZoom,F2(this.r)),t.uniformMatrix3fv(s.uPanZoomMatrix,!1,this.panZoomMatrix),t.uniform1i(s.uAtlasSize,this.batchManager.getAtlasSize());var h=ha(this.bgColor,1);t.uniform4fv(s.uBGColor,h),t.drawArraysInstanced(t.TRIANGLES,0,a,i),t.bindVertexArray(null),t.bindTexture(t.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:i,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var t=this.atlasManager.getDebugInfo(),n=t.reduce(function(s,o){return s+o.atlasCount},0),a=this.batchDebugInfo,i=a.reduce(function(s,o){return s+o.count},0);return{atlasInfo:t,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:a.length,batchInfo:a,totalInstances:i}}}])}(),Im={};Im.initWebgl=function(r,e){var t=this,n=t.data.contexts[t.WEBGL];r.bgColor=iC(t),r.webglTexSize=Math.min(r.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),r.webglTexRows=Math.min(r.webglTexRows,54),r.webglTexRowsNodes=Math.min(r.webglTexRowsNodes,54),r.webglBatchSize=Math.min(r.webglBatchSize,16384),r.webglTexPerBatch=Math.min(r.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),t.webglDebug=r.webglDebug,t.webglDebugShowAtlases=r.webglDebugShowAtlases,t.pickingFrameBuffer=H2(n),t.pickingFrameBuffer.needsDraw=!0,t.drawing=new aC(t,n,r);var a=function(f){return function(d){return t.getTextAngle(d,f)}},i=function(f){return function(d){var h=d.pstyle(f);return h&&h.value}},s=function(f){return function(d){return d.pstyle("".concat(f,"-opacity")).value>0}},o=function(f){var d=f.pstyle("text-events").strValue==="yes";return d?iu.USE_BB:iu.IGNORE},u=function(f){var d=f.position(),h=d.x,v=d.y,y=f.outerWidth(),p=f.outerHeight();return{w:y,h:p,x1:h-y/2,y1:v-p/2}};t.drawing.addAtlasCollection("node",{texRows:r.webglTexRowsNodes}),t.drawing.addAtlasCollection("label",{texRows:r.webglTexRows}),t.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),t.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:u,isSimple:z2,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),t.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:u,isVisible:s("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),t.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:u,isVisible:s("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),t.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:pc(e.getLabelKey,null),getBoundingBox:gc(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:a(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:i("label")}),t.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:pc(e.getSourceLabelKey,"source"),getBoundingBox:gc(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:a("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:i("source-label")}),t.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:pc(e.getTargetLabelKey,"target"),getBoundingBox:gc(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:a("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:i("target-label")});var l=Is(function(){console.log("garbage collect flag set"),t.data.gc=!0},1e4);t.onUpdateEleCalcs(function(c,f){var d=!1;f&&f.length>0&&(d|=t.drawing.invalidate(f)),d&&l()}),sC(t)};function iC(r){var e=r.cy.container(),t=e&&e.style&&e.style.backgroundColor||"white";return ty(t)}function _m(r,e){var t=r._private.rscratch;return dr(t,"labelWrapCachedLines",e)||[]}var pc=function(e,t){return function(n){var a=e(n),i=_m(n,t);return i.length>1?i.map(function(s,o){return"".concat(a,"_").concat(o)}):a}},gc=function(e,t){return function(n,a){var i=e(n);if(typeof a=="string"){var s=a.indexOf("_");if(s>0){var o=Number(a.substring(s+1)),u=_m(n,t),l=i.h/u.length,c=l*o,f=i.y1+c;return{x1:i.x1,w:i.w,y1:f,h:l,yOffset:c}}}return i}};function sC(r){{var e=r.render;r.render=function(i){i=i||{};var s=r.cy;r.webgl&&(s.zoom()>wm?(oC(r),e.call(r,i)):(uC(r),Am(r,i,Zi.SCREEN)))}}{var t=r.matchCanvasSize;r.matchCanvasSize=function(i){t.call(r,i),r.pickingFrameBuffer.setFramebufferAttachmentSizes(r.canvasWidth,r.canvasHeight),r.pickingFrameBuffer.needsDraw=!0}}r.findNearestElements=function(i,s,o,u){return vC(r,i,s)};{var n=r.invalidateCachedZSortedEles;r.invalidateCachedZSortedEles=function(){n.call(r),r.pickingFrameBuffer.needsDraw=!0}}{var a=r.notify;r.notify=function(i,s){a.call(r,i,s),i==="viewport"||i==="bounds"?r.pickingFrameBuffer.needsDraw=!0:i==="background"&&r.drawing.invalidate(s,{type:"node-body"})}}}function oC(r){var e=r.data.contexts[r.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function uC(r){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,r.canvasWidth,r.canvasHeight),n.restore()};e(r.data.contexts[r.NODE]),e(r.data.contexts[r.DRAG])}function lC(r){var e=r.canvasWidth,t=r.canvasHeight,n=Qf(r),a=n.pan,i=n.zoom,s=dc();go(s,s,[a.x,a.y]),Kc(s,s,[i,i]);var o=dc();K2(o,e,t);var u=dc();return Y2(u,o,s),u}function Dm(r,e){var t=r.canvasWidth,n=r.canvasHeight,a=Qf(r),i=a.pan,s=a.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t,n),e.translate(i.x,i.y),e.scale(s,s)}function cC(r,e){r.drawSelectionRectangle(e,function(t){return Dm(r,t)})}function fC(r){var e=r.data.contexts[r.NODE];e.save(),Dm(r,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function dC(r){var e=function(a,i,s){for(var o=a.atlasManager.getAtlasCollection(i),u=r.data.contexts[r.NODE],l=o.atlases,c=0;c<l.length;c++){var f=l[c],d=f.canvas;if(d){var h=d.width,v=d.height,y=h*c,p=d.height*s,g=.4;u.save(),u.scale(g,g),u.drawImage(d,y,p),u.strokeStyle="black",u.rect(y,p,h,v),u.stroke(),u.restore()}}},t=0;e(r.drawing,"node",t++),e(r.drawing,"label",t++)}function hC(r,e,t,n,a){var i,s,o,u,l=Qf(r),c=l.pan,f=l.zoom;{var d=N2(r,c,f,e,t),h=Dt(d,2),v=h[0],y=h[1],p=6;i=v-p/2,s=y-p/2,o=p,u=p}if(o===0||u===0)return[];var g=r.data.contexts[r.WEBGL];g.bindFramebuffer(g.FRAMEBUFFER,r.pickingFrameBuffer),r.pickingFrameBuffer.needsDraw&&(g.viewport(0,0,g.canvas.width,g.canvas.height),Am(r,null,Zi.PICKING),r.pickingFrameBuffer.needsDraw=!1);var m=o*u,b=new Uint8Array(m*4);g.readPixels(i,s,o,u,g.RGBA,g.UNSIGNED_BYTE,b),g.bindFramebuffer(g.FRAMEBUFFER,null);for(var w=new Set,S=0;S<m;S++){var E=b.slice(S*4,S*4+4),x=U2(E)-1;x>=0&&w.add(x)}return w}function vC(r,e,t){var n=hC(r,e,t),a=r.getCachedZSortedEles(),i,s,o=vr(n),u;try{for(o.s();!(u=o.n()).done;){var l=u.value,c=a[l];if(!i&&c.isNode()&&(i=c),!s&&c.isEdge()&&(s=c),i&&s)break}}catch(f){o.e(f)}finally{o.f()}return[i,s].filter(Boolean)}function yc(r,e,t){var n=r.drawing;e+=1,t.isNode()?(n.drawNode(t,e,"node-underlay"),n.drawNode(t,e,"node-body"),n.drawTexture(t,e,"label"),n.drawNode(t,e,"node-overlay")):(n.drawEdgeLine(t,e),n.drawEdgeArrow(t,e,"source"),n.drawEdgeArrow(t,e,"target"),n.drawTexture(t,e,"label"),n.drawTexture(t,e,"edge-source-label"),n.drawTexture(t,e,"edge-target-label"))}function Am(r,e,t){var n;r.webglDebug&&(n=performance.now());var a=r.drawing,i=0;if(t.screen&&r.data.canvasNeedsRedraw[r.SELECT_BOX]&&cC(r,e),r.data.canvasNeedsRedraw[r.NODE]||t.picking){var s=r.data.contexts[r.WEBGL];t.screen?(s.clearColor(0,0,0,0),s.enable(s.BLEND),s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA)):s.disable(s.BLEND),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.viewport(0,0,s.canvas.width,s.canvas.height);var o=lC(r),u=r.getCachedZSortedEles();if(i=u.length,a.startFrame(o,t),t.screen){for(var l=0;l<u.nondrag.length;l++)yc(r,l,u.nondrag[l]);for(var c=0;c<u.drag.length;c++)yc(r,c,u.drag[c])}else if(t.picking)for(var f=0;f<u.length;f++)yc(r,f,u[f]);a.endFrame(),t.screen&&r.webglDebugShowAtlases&&(fC(r),dC(r)),r.data.canvasNeedsRedraw[r.NODE]=!1,r.data.canvasNeedsRedraw[r.DRAG]=!1}if(r.webglDebug){var d=performance.now(),h=!1,v=Math.ceil(d-n),y=a.getDebugInfo(),p=["".concat(i," elements"),"".concat(y.totalInstances," instances"),"".concat(y.batchCount," batches"),"".concat(y.totalAtlases," atlases"),"".concat(y.wrappedCount," wrapped textures"),"".concat(y.simpleCount," simple shapes")].join(", ");if(h)console.log("WebGL (".concat(t.name,") - time ").concat(v,"ms, ").concat(p));else{console.log("WebGL (".concat(t.name,") - frame time ").concat(v,"ms")),console.log("Totals:"),console.log("  ".concat(p)),console.log("Texture Atlases Used:");var g=y.atlasInfo,m=vr(g),b;try{for(m.s();!(b=m.n()).done;){var w=b.value;console.log("  ".concat(w.type,": ").concat(w.keyCount," keys, ").concat(w.atlasCount," atlases"))}}catch(S){m.e(S)}finally{m.f()}console.log("")}}r.data.gc&&(console.log("Garbage Collect!"),r.data.gc=!1,a.gc())}var la={};la.drawPolygonPath=function(r,e,t,n,a,i){var s=n/2,o=a/2;r.beginPath&&r.beginPath(),r.moveTo(e+s*i[0],t+o*i[1]);for(var u=1;u<i.length/2;u++)r.lineTo(e+s*i[u*2],t+o*i[u*2+1]);r.closePath()};la.drawRoundPolygonPath=function(r,e,t,n,a,i,s){s.forEach(function(o){return fm(r,o)}),r.closePath()};la.drawRoundRectanglePath=function(r,e,t,n,a,i){var s=n/2,o=a/2,u=i==="auto"?Qn(n,a):Math.min(i,o,s);r.beginPath&&r.beginPath(),r.moveTo(e,t-o),r.arcTo(e+s,t-o,e+s,t,u),r.arcTo(e+s,t+o,e,t+o,u),r.arcTo(e-s,t+o,e-s,t,u),r.arcTo(e-s,t-o,e,t-o,u),r.lineTo(e,t-o),r.closePath()};la.drawBottomRoundRectanglePath=function(r,e,t,n,a,i){var s=n/2,o=a/2,u=i==="auto"?Qn(n,a):i;r.beginPath&&r.beginPath(),r.moveTo(e,t-o),r.lineTo(e+s,t-o),r.lineTo(e+s,t),r.arcTo(e+s,t+o,e,t+o,u),r.arcTo(e-s,t+o,e-s,t,u),r.lineTo(e-s,t-o),r.lineTo(e,t-o),r.closePath()};la.drawCutRectanglePath=function(r,e,t,n,a,i,s){var o=n/2,u=a/2,l=s==="auto"?Nf():s;r.beginPath&&r.beginPath(),r.moveTo(e-o+l,t-u),r.lineTo(e+o-l,t-u),r.lineTo(e+o,t-u+l),r.lineTo(e+o,t+u-l),r.lineTo(e+o-l,t+u),r.lineTo(e-o+l,t+u),r.lineTo(e-o,t+u-l),r.lineTo(e-o,t-u+l),r.closePath()};la.drawBarrelPath=function(r,e,t,n,a){var i=n/2,s=a/2,o=e-i,u=e+i,l=t-s,c=t+s,f=kc(n,a),d=f.widthOffset,h=f.heightOffset,v=f.ctrlPtOffsetPct*d;r.beginPath&&r.beginPath(),r.moveTo(o,l+h),r.lineTo(o,c-h),r.quadraticCurveTo(o+v,c,o+d,c),r.lineTo(u-d,c),r.quadraticCurveTo(u-v,c,u,c-h),r.lineTo(u,l+h),r.quadraticCurveTo(u-v,l,u-d,l),r.lineTo(o+d,l),r.quadraticCurveTo(o+v,l,o,l+h),r.closePath()};var rp=Math.sin(0),np=Math.cos(0),jc={},Xc={},Rm=Math.PI/40;for(var Ha=0*Math.PI;Ha<2*Math.PI;Ha+=Rm)jc[Ha]=Math.sin(Ha),Xc[Ha]=Math.cos(Ha);la.drawEllipsePath=function(r,e,t,n,a){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,a/2,0,0,2*Math.PI);else for(var i,s,o=n/2,u=a/2,l=0*Math.PI;l<2*Math.PI;l+=Rm)i=e-o*jc[l]*rp+o*Xc[l]*np,s=t+u*Xc[l]*rp+u*jc[l]*np,l===0?r.moveTo(i,s):r.lineTo(i,s);r.closePath()};var Ms={};Ms.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Ms.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),a=this.findContainerClientCoords(),i=r.full?Math.ceil(n.w):a[2],s=r.full?Math.ceil(n.h):a[3],o=ie(r.maxWidth)||ie(r.maxHeight),u=this.getPixelRatio(),l=1;if(r.scale!==void 0)i*=r.scale,s*=r.scale,l=r.scale;else if(o){var c=1/0,f=1/0;ie(r.maxWidth)&&(c=l*r.maxWidth/i),ie(r.maxHeight)&&(f=l*r.maxHeight/s),l=Math.min(c,f),i*=l,s*=l}o||(i*=u,s*=u,l*=u);var d=document.createElement("canvas");d.width=i,d.height=s,d.style.width=i+"px",d.style.height=s+"px";var h=d.getContext("2d");if(i>0&&s>0){h.clearRect(0,0,i,s),h.globalCompositeOperation="source-over";var v=this.getCachedZSortedEles();if(r.full)h.translate(-n.x1*l,-n.y1*l),h.scale(l,l),this.drawElements(h,v),h.scale(1/l,1/l),h.translate(n.x1*l,n.y1*l);else{var y=e.pan(),p={x:y.x*l,y:y.y*l};l*=e.zoom(),h.translate(p.x,p.y),h.scale(l,l),this.drawElements(h,v),h.scale(1/l,1/l),h.translate(-p.x,-p.y)}r.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=r.bg,h.rect(0,0,i,s),h.fill())}return d};function pC(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:e})}function ap(r){var e=r.indexOf(",");return r.substr(e+1)}function Om(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new Ti(function(a,i){try{e.toBlob(function(s){s!=null?a(s):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(s){i(s)}});case"blob":return pC(ap(n()),t);case"base64":return ap(n());case"base64uri":default:return n()}}Ms.png=function(r){return Om(r,this.bufferCanvasImage(r),"image/png")};Ms.jpg=function(r){return Om(r,this.bufferCanvasImage(r),"image/jpeg")};var Mm={};Mm.nodeShapeImpl=function(r,e,t,n,a,i,s,o){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,a,i);case"polygon":return this.drawPolygonPath(e,t,n,a,i,s);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,a,i,s,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,a,i,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,a,i,s,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,a,i,o);case"barrel":return this.drawBarrelPath(e,t,n,a,i)}};var gC=km,ze=km.prototype;ze.CANVAS_LAYERS=3;ze.SELECT_BOX=0;ze.DRAG=1;ze.NODE=2;ze.WEBGL=3;ze.CANVAS_TYPES=["2d","2d","2d","webgl2"];ze.BUFFER_COUNT=3;ze.TEXTURE_BUFFER=0;ze.MOTIONBLUR_BUFFER_NODE=1;ze.MOTIONBLUR_BUFFER_DRAG=2;function km(r){var e=this,t=e.cy.window(),n=t.document;r.webgl&&(ze.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(ze.CANVAS_LAYERS),contexts:new Array(ze.CANVAS_LAYERS),canvasNeedsRedraw:new Array(ze.CANVAS_LAYERS),bufferCanvases:new Array(ze.BUFFER_COUNT),bufferContexts:new Array(ze.CANVAS_LAYERS)};var a="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var s=e.data.canvasContainer.style;e.data.canvasContainer.style[a]=i,s.position="relative",s.zIndex="0",s.overflow="hidden";var o=r.cy.container();o.appendChild(e.data.canvasContainer),o.style[a]=i;var u={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};c1()&&(u["-ms-touch-action"]="none",u["touch-action"]="none");for(var l=0;l<ze.CANVAS_LAYERS;l++){var c=e.data.canvases[l]=n.createElement("canvas"),f=ze.CANVAS_TYPES[l];e.data.contexts[l]=c.getContext(f),e.data.contexts[l]||bt("Could not create canvas of type "+f),Object.keys(u).forEach(function(Y){c.style[Y]=u[Y]}),c.style.position="absolute",c.setAttribute("data-id","layer"+l),c.style.zIndex=String(ze.CANVAS_LAYERS-l),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[l]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[ze.NODE].setAttribute("data-id","layer"+ze.NODE+"-node"),e.data.canvases[ze.SELECT_BOX].setAttribute("data-id","layer"+ze.SELECT_BOX+"-selectbox"),e.data.canvases[ze.DRAG].setAttribute("data-id","layer"+ze.DRAG+"-drag"),e.data.canvases[ze.WEBGL]&&e.data.canvases[ze.WEBGL].setAttribute("data-id","layer"+ze.WEBGL+"-webgl");for(var l=0;l<ze.BUFFER_COUNT;l++)e.data.bufferCanvases[l]=n.createElement("canvas"),e.data.bufferContexts[l]=e.data.bufferCanvases[l].getContext("2d"),e.data.bufferCanvases[l].style.position="absolute",e.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),e.data.bufferCanvases[l].style.zIndex=String(-l-1),e.data.bufferCanvases[l].style.visibility="hidden";e.pathsEnabled=!0;var d=ar(),h=function(N){return{x:(N.x1+N.x2)/2,y:(N.y1+N.y2)/2}},v=function(N){return{x:-N.w/2,y:-N.h/2}},y=function(N){var V=N[0]._private,U=V.oldBackgroundTimestamp===V.backgroundTimestamp;return!U},p=function(N){return N[0]._private.nodeKey},g=function(N){return N[0]._private.labelStyleKey},m=function(N){return N[0]._private.sourceLabelStyleKey},b=function(N){return N[0]._private.targetLabelStyleKey},w=function(N,V,U,j,ae){return e.drawElement(N,V,U,!1,!1,ae)},S=function(N,V,U,j,ae){return e.drawElementText(N,V,U,j,"main",ae)},E=function(N,V,U,j,ae){return e.drawElementText(N,V,U,j,"source",ae)},x=function(N,V,U,j,ae){return e.drawElementText(N,V,U,j,"target",ae)},T=function(N){return N.boundingBox(),N[0]._private.bodyBounds},B=function(N){return N.boundingBox(),N[0]._private.labelBounds.main||d},I=function(N){return N.boundingBox(),N[0]._private.labelBounds.source||d},_=function(N){return N.boundingBox(),N[0]._private.labelBounds.target||d},D=function(N,V){return V},A=function(N){return h(T(N))},O=function(N,V,U){var j=N?N+"-":"";return{x:V.x+U.pstyle(j+"text-margin-x").pfValue,y:V.y+U.pstyle(j+"text-margin-y").pfValue}},k=function(N,V,U){var j=N[0]._private.rscratch;return{x:j[V],y:j[U]}},P=function(N){return O("",k(N,"labelX","labelY"),N)},M=function(N){return O("source",k(N,"sourceLabelX","sourceLabelY"),N)},F=function(N){return O("target",k(N,"targetLabelX","targetLabelY"),N)},W=function(N){return v(T(N))},H=function(N){return v(I(N))},z=function(N){return v(_(N))},$=function(N){var V=B(N),U=v(B(N));if(N.isNode()){switch(N.pstyle("text-halign").value){case"left":U.x=-V.w-(V.leftPad||0);break;case"right":U.x=-(V.rightPad||0);break}switch(N.pstyle("text-valign").value){case"top":U.y=-V.h-(V.topPad||0);break;case"bottom":U.y=-(V.botPad||0);break}}return U},X=e.data.eleTxrCache=new Gi(e,{getKey:p,doesEleInvalidateKey:y,drawElement:w,getBoundingBox:T,getRotationPoint:A,getRotationOffset:W,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),te=e.data.lblTxrCache=new Gi(e,{getKey:g,drawElement:S,getBoundingBox:B,getRotationPoint:P,getRotationOffset:$,isVisible:D}),R=e.data.slbTxrCache=new Gi(e,{getKey:m,drawElement:E,getBoundingBox:I,getRotationPoint:M,getRotationOffset:H,isVisible:D}),L=e.data.tlbTxrCache=new Gi(e,{getKey:b,drawElement:x,getBoundingBox:_,getRotationPoint:F,getRotationOffset:z,isVisible:D}),K=e.data.lyrTxrCache=new Sm(e);e.onUpdateEleCalcs(function(N,V){X.invalidateElements(V),te.invalidateElements(V),R.invalidateElements(V),L.invalidateElements(V),K.invalidateElements(V);for(var U=0;U<V.length;U++){var j=V[U]._private;j.oldBackgroundTimestamp=j.backgroundTimestamp}});var ne=function(N){for(var V=0;V<N.length;V++)K.enqueueElementRefinement(N[V].ele)};X.onDequeue(ne),te.onDequeue(ne),R.onDequeue(ne),L.onDequeue(ne),r.webgl&&e.initWebgl(r,{getStyleKey:p,getLabelKey:g,getSourceLabelKey:m,getTargetLabelKey:b,drawElement:w,drawLabel:S,drawSourceLabel:E,drawTargetLabel:x,getElementBox:T,getLabelBox:B,getSourceLabelBox:I,getTargetLabelBox:_,getElementRotationPoint:A,getElementRotationOffset:W,getLabelRotationPoint:P,getSourceLabelRotationPoint:M,getTargetLabelRotationPoint:F,getLabelRotationOffset:$,getSourceLabelRotationOffset:H,getTargetLabelRotationOffset:z})}ze.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[ze.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[ze.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[ze.SELECT_BOX]=e;break;case"gc":t.data.gc=!0;break}};var yC=typeof Path2D<"u";ze.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};ze.usePaths=function(){return yC&&this.pathsEnabled};ze.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};ze.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};ze.makeOffscreenCanvas=function(r,e){var t;if((typeof OffscreenCanvas>"u"?"undefined":Nt(OffscreenCanvas))!=="undefined")t=new OffscreenCanvas(r,e);else{var n=this.cy.window(),a=n.document;t=a.createElement("canvas"),t.width=r,t.height=e}return t};[xm,cn,An,Zf,La,ua,ir,Im,la,Ms,Mm].forEach(function(r){we(ze,r)});var mC=[{name:"null",impl:um},{name:"base",impl:mm},{name:"canvas",impl:gC}],bC=[{type:"layout",extensions:WT},{type:"renderer",extensions:mC}],Pm={},Lm={};function Fm(r,e,t){var n=t,a=function(T){ot("Can not register `"+e+"` for `"+r+"` since `"+T+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(hs.prototype[e])return a(e);hs.prototype[e]=t}else if(r==="collection"){if(Ht.prototype[e])return a(e);Ht.prototype[e]=t}else if(r==="layout"){for(var i=function(T){this.options=T,t.call(this,T),Ke(this._private)||(this._private={}),this._private.cy=T.cy,this._private.listeners=[],this.createEmitter()},s=i.prototype=Object.create(t.prototype),o=[],u=0;u<o.length;u++){var l=o[u];s[l]=s[l]||function(){return this}}s.start&&!s.run?s.run=function(){return this.start(),this}:!s.start&&s.run&&(s.start=function(){return this.run(),this});var c=t.prototype.stop;s.stop=function(){var x=this.options;if(x&&x.animate){var T=this.animations;if(T)for(var B=0;B<T.length;B++)T[B].stop()}return c?c.call(this):this.emit("layoutstop"),this},s.destroy||(s.destroy=function(){return this}),s.cy=function(){return this._private.cy};var f=function(T){return T._private.cy},d={addEventFields:function(T,B){B.layout=T,B.cy=f(T),B.target=T},bubble:function(){return!0},parent:function(T){return f(T)}};we(s,{createEmitter:function(){return this._private.emitter=new Su(d,this),this},emitter:function(){return this._private.emitter},on:function(T,B){return this.emitter().on(T,B),this},one:function(T,B){return this.emitter().one(T,B),this},once:function(T,B){return this.emitter().one(T,B),this},removeListener:function(T,B){return this.emitter().removeListener(T,B),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(T,B){return this.emitter().emit(T,B),this}}),nt.eventAliasesOn(s),n=i}else if(r==="renderer"&&e!=="null"&&e!=="base"){var h=Nm("renderer","base"),v=h.prototype,y=t,p=t.prototype,g=function(){h.apply(this,arguments),y.apply(this,arguments)},m=g.prototype;for(var b in v){var w=v[b],S=p[b]!=null;if(S)return a(b);m[b]=w}for(var E in p)m[E]=p[E];v.clientFunctions.forEach(function(x){m[x]=m[x]||function(){bt("Renderer does not implement `renderer."+x+"()` on its prototype")}}),n=g}else if(r==="__proto__"||r==="constructor"||r==="prototype")return bt(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return ry({map:Pm,keys:[r,e],value:n})}function Nm(r,e){return ny({map:Pm,keys:[r,e]})}function wC(r,e,t,n,a){return ry({map:Lm,keys:[r,e,t,n],value:a})}function SC(r,e,t,n){return ny({map:Lm,keys:[r,e,t,n]})}var Zc=function(){if(arguments.length===2)return Nm.apply(null,arguments);if(arguments.length===3)return Fm.apply(null,arguments);if(arguments.length===4)return SC.apply(null,arguments);if(arguments.length===5)return wC.apply(null,arguments);bt("Invalid extension access syntax")};hs.prototype.extension=Zc;bC.forEach(function(r){r.extensions.forEach(function(e){Fm(r.type,e.name,e.impl)})});var su=function(){if(!(this instanceof su))return new su;this.length=0},Oa=su.prototype;Oa.instanceString=function(){return"stylesheet"};Oa.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};Oa.css=function(r,e){var t=this.length-1;if(ge(r))this[t].properties.push({name:r,value:e});else if(Ke(r))for(var n=r,a=Object.keys(n),i=0;i<a.length;i++){var s=a[i],o=n[s];if(o!=null){var u=qt.properties[s]||qt.properties[fu(s)];if(u!=null){var l=u.name,c=o;this[t].properties.push({name:l,value:c})}}}return this};Oa.style=Oa.css;Oa.generateStyle=function(r){var e=new qt(r);return this.appendToStyle(e)};Oa.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,a=t.properties;r.selector(n);for(var i=0;i<a.length;i++){var s=a[i];r.css(s.name,s.value)}}return r};var xC="3.33.0",Ma=function(e){if(e===void 0&&(e={}),Ke(e))return new hs(e);if(ge(e))return Zc.apply(Zc,arguments)};Ma.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Ma),r.apply(null,e),this};Ma.warnings=function(r){return cy(r)};Ma.version=xC;Ma.stylesheet=Ma.Stylesheet=su;let lt=null;const At={activeController:null,lockControl:function(r){return this.activeController?this.activeController!==r:(this.activeController=r,lt.autoungrabify(!0),console.log("control locked to",r.name),!1)},releaseControl:function(r){this.activeController===r&&(console.log("control released from",r.name),lt.autoungrabify(!1),this.activeController=null)}},Tt={box:document.getElementById("labelInputBox"),input:document.getElementById("labelInputText"),submitButton:document.getElementById("labelInputSubmit"),position:function(r,e){Tt.box.style.left=`${r}px`,Tt.box.style.top=`${e}px`,Tt.box.style.display="block"},isFocused:function(){return this.box.style.display==="block"},focus:function(){this.input.value="",this.input.focus()},hide:function(){this.box.style.display="none"},getValue:function(){return this.input.value.trim()}};class EC{constructor(e){lt=e,new DC().init(),new IC().init(),new CC().init(),new _C().init(),new BC().init(),new TC().init(),document.addEventListener("keydown",t=>{t.key=="Enter"&&Tt.submitButton.click(),t.key=="Escape"&&(At.activeController.onDistraction(),Tt.hide())}),Tt.submitButton.onclick=()=>{At.activeController.onLabelSubmit(),Tt.hide()},lt.on("zoom pan",t=>{At.activeController&&(At.activeController.onDistraction(),Tt.hide())}),lt.on("tapselect","node",t=>{At.activeController||t.target.addClass("selected")}),lt.on("tapunselect","node",t=>{t.target.removeClass("selected")})}}class Di{constructor(e){qr(this,"name");this.name=e}onDistraction(){}onLabelSubmit(){}}class TC extends Di{constructor(){super("edgeDeletion")}init(){lt.on("cxttap","edge",e=>{At.lockControl(this)||(lt.remove(e.target),At.releaseControl(this))})}}class CC extends Di{constructor(){super("nodeDeletion")}init(){lt.on("cxttap","node",e=>{At.lockControl(this)||(lt.remove(e.target),At.releaseControl(this))})}}class BC extends Di{constructor(){super("edgeEditing");qr(this,"editEdge");qr(this,"prevLabel");this.editEdge=null,this.prevLabel=null}init(){return lt.on("dbltap","edge",t=>{if(At.lockControl(this))return;this.editEdge&&this.editEdge.data("label",this.prevLabel),this.editEdge=t.target,this.prevLabel=this.editEdge.data("label"),this.editEdge.data("label","");const n=this.editEdge.renderedMidpoint(),a=lt.container().getBoundingClientRect();Tt.position(a.left+n.x-50,a.top+n.y-10),Tt.focus()}),this}onLabelSubmit(){const t=Tt.getValue();if(!t){this.editEdge.data("label",this.prevLabel),this.finish();return}this.editEdge.data("label",t),this.finish()}onDistraction(){this.editEdge.data("label",this.prevLabel),this.finish()}finish(){At.releaseControl(this),this.editEdge=null,this.prevLabel=null}}class IC extends Di{constructor(){super("nodeEditing");qr(this,"editNode");qr(this,"prevLabel");this.editNode=null,this.prevLabel=null}init(){return lt.on("dbltap","node",t=>{if(At.lockControl(this))return;this.editNode&&this.editNode.data("label",this.prevLabel),this.editNode=t.target,this.prevLabel=this.editNode.data("label"),this.editNode.data("label","");const n=this.editNode.renderedPosition(),a=lt.container().getBoundingClientRect();Tt.position(a.left+n.x-50,a.top+n.y-10),Tt.focus()}),this}onLabelSubmit(){const t=Tt.getValue();if(!t){this.editNode.data("label",this.prevLabel),this.finish();return}const n=Math.max(25,t.length*3);this.editNode.style({width:n,height:n}),this.editNode.data("label",t),this.finish()}onDistraction(){this.editNode.data("label",this.prevLabel),this.finish()}finish(){At.releaseControl(this),this.editNode=null,this.prevLabel=null}}class _C extends Di{constructor(){super("edgeCreation");qr(this,"edge");qr(this,"ghostNode");qr(this,"sourceNode");this.edge=null,this.ghostNode=null,this.sourceNode=null}init(){return lt.on("cxttap","node",t=>{const n=t.target;this.sourceNode&&this.sourceNode.id()===n.id()&&this.finish(!0)}),lt.on("mousemove",t=>{!this.ghostNode||At.lockControl(this)||this.ghostNode.position(t.position)}),lt.on("tap","node",t=>{if(!this.ghostNode||At.lockControl(this))return;const n=t.target;if(n.id()===this.sourceNode.id())return;this.edge.move({target:n.id()});const a=this.edge.renderedMidpoint(),i=lt.container().getBoundingClientRect();Tt.position(i.left+a.x-50,i.top+a.y-10),Tt.focus()}),lt.on("taphold","node",t=>{At.lockControl(this)||(this.sourceNode=t.target,this.sourceNode.addClass("selectedNode"),this.ghostNode=lt.add({group:"nodes",data:{id:"ghost_"+this.sourceNode.id(),label:""},position:{...this.sourceNode.position()}}),this.ghostNode.addClass("edgeGhost"),this.edge=lt.add({group:"edges",data:{source:this.sourceNode.id(),target:this.ghostNode.id(),label:""}}))}),this}onDistraction(){Tt.isFocused()&&this.finish(!0)}onLabelSubmit(){const t=Tt.getValue();if(!t){this.finish(!0);return}this.edge.data("label",t),this.finish(!1)}finish(t){t&&(lt.remove(this.edge),this.edge=null),lt.remove(this.ghostNode),this.ghostNode=null,this.sourceNode.removeClass("selectedNode"),At.releaseControl(this)}}class DC extends Di{constructor(){super("nodeCreation");qr(this,"ghostNode");this.ghostNode=null}init(){return lt.on("tap","node",t=>{this.ghostNode&&(t.target,!At.lockControl(this)&&(this.deleteGhost(),Tt.hide(),this.finish()))}),lt.on("tap",t=>{if(t.target!=lt||At.lockControl(this))return;this.ghostNode&&this.deleteGhost(),this.ghostNode=lt.add({group:"nodes",data:{label:""},position:t.position});const n=this.ghostNode.renderedPosition(),a=lt.container().getBoundingClientRect();Tt.position(a.left+n.x-50,a.top+n.y-10),Tt.focus()}),this}onDistraction(){this.deleteGhost(),this.finish()}onLabelSubmit(){const t=Tt.getValue();if(!t){this.deleteGhost(),this.finish();return}const n=Math.max(25,t.length*3);this.ghostNode.style({width:n,height:n}),this.ghostNode.data({id:this.ghostNode.id(),label:t}),this.finish()}deleteGhost(){lt.remove(this.ghostNode),this.ghostNode=null}finish(){At.releaseControl(this),this.ghostNode=null}}let yo=null;document.getElementById("cy");function AC(r){yo||(yo=Ma({container:document.getElementById("cy"),layout:{name:"grid"},elements:r.elements,zoomingEnabled:!0,style:[{selector:"node",style:{"background-color":"#647CBF",label:"data(label)","font-size":"12px","font-family":"Arial",color:"#FBF9F9","text-outline-color":"#000000","text-outline-width":2,"text-valign":"center","text-halign":"center","text-justification":"center","text-wrap":"wrap","text-max-width":"35px","border-width":3,"border-color":"#392E8F",width:25,height:25}},{selector:"edge",style:{label:"data(label)",color:"#fff","font-family":"Arial","font-size":"12px","text-outline-color":"#000","text-outline-width":2,"curve-style":"bezier","control-point-distance":50,"target-arrow-shape":"triangle","target-arrow-color":"#ccc","line-color":"#ccc",width:2}},{selector:".selectedNode",style:{"background-color":"pink","border-color":"red","border-width":2}},{selector:".edgeGhost",style:{visibility:"hidden",events:"no",opacity:.5,"z-index":.4,width:2,height:2}},{selector:".selected",style:{"background-color":"lime","border-color":"green"}}]}),new EC(yo))}function RC(r){const t=r.detail.args;AC(t.cm_data),t.submit_request&&(console.log("submit_request"),jn.setComponentValue(yo.json())),jn.setFrameHeight()}jn.events.addEventListener(jn.RENDER_EVENT,RC);jn.setComponentReady();jn.setFrameHeight();
